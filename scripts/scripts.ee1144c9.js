"use strict";function documentUtilsService(a,b,c,d){function e(){return q}function f(a){q=a}function g(a,b,c){var d;if(a.byteLength<5e8){var e=new Blob([a],{type:c}),f=window.URL||window.webkitURL||window.mozURL||window.msURL;d=f.createObjectURL(e)}else d=a.getRequestedUrl()+"/download";if(!_.isUndefined(d)){var g=document.createElement("a");g.setAttribute("href",d),g.setAttribute("download",b);var h=new MouseEvent("click");g.dispatchEvent(h)}}function h(a,b){var c=a.indexOf(b);return c>-1&&a.splice(c,1),a}function i(a,b){angular.isArray(a)||(a=[a]),swal({title:m,text:n,type:"warning",showCancelButton:!0,confirmButtonColor:"#DD6B55",confirmButtonText:o,cancelButtonText:p,closeOnConfirm:!0,closeOnCancel:!0},function(c){c&&b(a)})}function j(a,b){b.isSelected=!b.isSelected,b.isSelected?a.push(b):h(a,b)}function k(a,b){var c={},e=d.defer();return a.get(b.uuid).then(function(d){c=d,d.hasThumbnail?a.thumbnail(b.uuid).then(function(a){c.thumbnail=a}):delete c.thumbnail,e.resolve(c)},function(a){e.reject(a)}),e.promise}function l(a){for(var b=a.length-1;b>=0;b--)a[b].isSelected=!1,a.splice(b,1)}var m,n,o,p,q=!1;return c(function(){a(["SWEET_ALERT.ON_FILE_DELETE.TITLE","SWEET_ALERT.ON_FILE_DELETE.TEXT","SWEET_ALERT.ON_FILE_DELETE.CONFIRM_BUTTON","SWEET_ALERT.ON_FILE_DELETE.CANCEL_BUTTON"]).then(function(a){m=a["SWEET_ALERT.ON_FILE_DELETE.TITLE"],n=a["SWEET_ALERT.ON_FILE_DELETE.TEXT"],o=a["SWEET_ALERT.ON_FILE_DELETE.CONFIRM_BUTTON"],p=a["SWEET_ALERT.ON_FILE_DELETE.CANCEL_BUTTON"]})},0),{downloadFileFromResponse:g,removeElementFromCollection:h,deleteDocuments:i,selectDocument:j,getItemDetails:k,resetItemSelection:l,getReloadDocumentsList:e,setReloadDocumentsList:f}}function validate(a){return a=a.trim(),a=a.replace(/^\/|\/$/g,"")}documentUtilsService.$inject=["$translate","$log","$timeout","$q"],angular.module("linshare.userProfile",[]).service("LinshareUserService",function(){function a(){this.firstName=null,this.lastName=null,this.mail=null,this.locale=null,this.role=null,this.accountType=null,this.preferences={},this.expirationDate=null}return angular.extend(a.prototype,{getUser:function(){return this},setUser:function(a){this.firstName=a.firstName,this.lastName=a.lastName,this.mail=a.mail,this.locale=a.locale,this.role=a.role,this.accountType=a.accountType,this.expirationDate=a.expirationDate||null},hasRightAccountType:function(a){return this.accountType===a},hasRightRole:function(a){return this.role===a}}),a}),function(){angular.module("linshare.authentication",["restangular","http-auth-interceptor"]).config(["RestangularProvider",function(a){a.setBaseUrl("linshare"),a.setDefaultHttpFields({cache:!1}),a.setDefaultHeaders({"Content-Type":"application/json;"}),a.addFullRequestInterceptor(function(a,b,c,d,e){e["WWW-No-Authenticate"]="linshare"})}])}(),function(){function a(a,b,c,d,e,f,g,h,i){function j(a){return a=!!_.isUndefined(a)||a,c.debug("AuthenticationRestService : checkAuthentication"),p(h.all(q).withHttpConfig({ignoreAuthModule:!0}).customGET("authorized"),void 0,a).then(function(a){return o.resolve(a),a})["catch"](function(a){return o.reject(a),c.debug("current user not authenticated",a),a})}function k(){return c.debug("AuthenticationRestService : getCurrentUser"),o.promise}function l(a,b){return o=d.defer(),c.debug("AuthenticationRestService : login"),p(h.all(q).withHttpConfig({ignoreAuthModule:!0}).customGET("authorized",{},{Authorization:"Basic "+Base64.encode(a+":"+b)})).then(function(a){f.loginConfirmed(a),o.resolve(a)})["catch"](function(a){o.reject(a)}),o.promise}function m(){c.debug("AuthenticationRestService : logout"),p(h.all(q).one("logout").get()).then(function(){if(o=void 0,c.info("Authentication logout : success"),a.remove("JSESSIONID"),g.postLogoutUrl)e.location.href=g.postLogoutUrl;else{var d=b.absUrl();e.location=d.split("#")[0]}f.loginCancelled()})["catch"](function(a){c.error("Authentication logout : failed",a.status)})}function n(){return c.debug("AuthenticationRestService : version"),p(h.one(q,"version").get())}var o=d.defer(),p=i.responseHandler,q="authentication",r={checkAuthentication:j,getCurrentUser:k,login:l,logout:m,version:n};return r}angular.module("linshare.authentication").factory("authenticationRestService",a),a.$inject=["$cookies","$location","$log","$q","$window","authService","lsAppConfig","Restangular","ServerManagerService"]}(),function(){function a(a,b,c){function d(){c.logout()}var e=this;e.logout=d}angular.module("linshare.authentication").controller("AuthenticationController",a),a.$inject=["$scope","$log","authenticationRestService"]}(),function(){angular.module("linshare.audit",["restangular"])}(),function(){function a(a,b,c,d,e,f,g,h){function i(){d.addPart("audit"),m.dateFormat="fr-FR"===c.use()?p:n,m.beginDate.setDate(m.beginDate.getDate()-7),j()}function j(){m.beginDate.setHours(0,0,0,0),m.endDate.setHours(24,0,0,0),f.getList({beginDate:m.beginDate,endDate:m.endDate}).then(function(a){m.itemsList=a.plain(),e.generateAllDetails(b.userLogged.uuid,m.itemsList),k(m.tableFilterType,"type"),k(m.tableFilterAction,"action"),_.isUndefined(m.tableParams)?l():m.tableParams.reload()})}function k(b,c){b.length=0;var d=_.uniq(_.map(m.itemsList,c)).sort();_.pull(d,"ANONYMOUS_SHARE_ENTRY"),_.forEach(d,function(d){var e=a("translate")(o+c.toUpperCase()+"."+d);b.push({id:e,title:e})}),b.sort(function(a,b){return a.title>b.title?1:b.title>a.title?-1:0}),b.unshift({id:"",title:a("translate")(o+c.toUpperCase()+".ALL")})}function l(){h.initTableParams(m.itemsList),m.tableParamsService=h,m.tableParams=h.getTableParams(),m.tableApplyFilter=h.tableApplyFilter,m.tableSort=h.tableSort,m.tableParams.sorting("creationDate")}var m=this;const n=g.date_en_format,o="FILTERS_SELECT.",p=g.date_fr_format;m.beginDate=new Date,m.endDate=new Date,m.findAuditActionsByDate=j,m.maxDate=new Date,m.tableFilterAction=[],m.tableFilterType=[],i()}angular.module("linshare.audit").controller("AuditController",a),a.$inject=["$filter","$scope","$translate","$translatePartialLoader","auditDetailsService","auditRestService","lsAppConfig","tableParamsService"]}(),function(){function a(a){function b(){a.addPart("audit")}var c={restrict:"A",templateUrl:"modules/linshare.audit/directives/audit-details/audit-details.html",link:b};return c}angular.module("linshare.audit").directive("auditDetails",a),a.$inject=["$translatePartialLoader"]}(),function(){function a(a,b,c){function d(c){return a.debug("auditRestService : getList"),e(b.all(f).getList(c))}var e=c.responseHandler,f="audit",g={getList:d};return g}angular.module("linshare.audit").factory("auditRestService",a),a.$inject=["$log","Restangular","ServerManagerService"]}(),function(){function a(a,b,c){function d(c,d){return b(function(b){I=a("translate")("AUTHOR_ME"),J=a("translate")("AUTHOR_SUPERADMIN"),K=a("translate")("AUTHOR_SYSTEM"),L=a("translate")("DISABLED"),M=a("translate")("ENABLED"),_.forEach(d,function(a){a.resource?e(c,a):(a.resource=a.authUser,e(c,a))}),b(d)})}function e(a,b){b.isAuthor=l(b,a),b.authorName=h(b),b.authorReference=g(b),b.dateShortVarious=i(b,"shortTime"),b.dateCalendarVarious=i(b,"calendarTime"),b.resourceName=m(b,a),b.resourceNameVarious=n(b),b.userVarious=y(b,a),b.shareRecipient=p(b,a),b.icon=r(b.type),b.hasBracket=k(b.type),b.sentenceKey=o(b,".SENTENCE"),b.sentenceAction=o(b,".ACTION"),b.sentenceVars=q(b),b.updatedValues=t(b),b.translatedAction=s(b.action,"ACTION."),b.translatedType=s(b.type,"TYPE.")}function f(a){return"boolean"==typeof a?a?M:L:a}function g(a){return a.isAuthor?"AUTHOR":"VIEWER"}function h(a){return a.isAuthor?I:j(a.actor)}function i(b,c){return a(c)(b.creationDate)}function j(a){var b;return b=a.role===c.accountType.system?K:a.role===c.accountType.superadmin?J:a.name?a.name:a.firstName||a.lastName?a.firstName+" "+a.lastName:a.mail}function k(a){return A.indexOf(a)!==-1}function l(a,b){return a.authUser.uuid===b}function m(a,b){var c;return c=a.resource.user?a.resource.user.uuid===b?I:j(a.resource.user):a.resource.firstName?a.resource.uuid===b?I:j(a.resource):a.resource.name}function n(a){var b;return a.workGroup?b=a.workGroup.name:a.list&&(b=a.list.name),b}function o(a,b){return B+"."+a.type+"."+a.action+"."+a.authorReference+b}function p(a,b){var c;return a.type!==D.ANONYMOUS_SHARE_ENTRY&&a.type!==D.SHARE_ENTRY||(c=a.resource.recipient?a.resource.recipient.uuid===b?I:j(a.resource.recipient):a.recipientMail),c}function q(a){return{authorName:"<b>"+a.authorName+"</b>",dateVarious:'<b title="'+a.dateCalendarVarious+'">'+a.dateShortVarious+"</b>",userVarious:'<span class="activity-user-target">'+a.userVarious+"</span>",resourceName:'<span class="activity-resource-name">'+a.resourceName+"</span>",resourceNameVarious:'<span class="activity-resource-name">'+a.resourceNameVarious+"</span>",updatedValues:"<b>"+a.updatedValues+"</b>"}}function r(a){return C[a]}function s(b,c){return a("translate")("FILTERS_SELECT."+c+b)}function t(a){var b={};return a.action===z.UPDATE&&(u(a.resource,a.resourceUpdated,b),(b.firstName||b.lastName)&&delete b.name,v(a,b),w(a,b)),b}function u(a,b,c){_.forEach(b,function(d,e){"object"==typeof d||"[object Array]"===Object.prototype.toString.call(d)?u(d,b[e]):a[e]!==b[e]&&H.indexOf(e)!==-1&&(c[e]={keyName:F+E[e],oldValue:f(a[e]),newValue:f(b[e])})})}function v(b,c){if(b.type===D.GUEST){var d=b.resource.expirationDate,e=b.resourceUpdated.expirationDate;d!==e&&(c.expirationDate={keyName:F+E.expirationDate,oldValue:a("shortTime")(d),newValue:a("shortTime")(e),oldValueFull:a("calendarTime")(d),newValueFull:a("calendarTime")(e)})}}function w(a,b){if(a.type===D.WORKGROUP_MEMBER){var c=x(a.resource),d=x(a.resourceUpdated);c!==d&&(b.right={keyName:F+E.right,oldValue:G+c,newValue:G+d,rightsUpdate:!0})}}function x(a){var b;return b=a.admin?c.roles.admin:!a.admin&&a.canUpload?c.roles.write:c.roles.readonly}function y(a,b){var c;return a.resource.firstName?c=a.resource.uuid===b?I:j(a.resource):a.resource.sender&&a.resource.sender.uuid!==a.actor.uuid?c=a.resource.sender.uuid===b?I:j(a.resource.sender):a.resource.recipient?c=a.resource.recipient.uuid===b?I:j(a.resource.recipient):a.recipientMail&&(c=a.recipientMail),c}const z={ADDITION:"ADDITION",COPY:"COPY",CREATE:"CREATE",CREATE_SHARE:"CREATE_SHARE",DELETE:"DELETE",DOWNLOAD:"DOWNLOAD",FAILURE:"FAILURE",READ:"READ",RECEIVE_SHARE:"RECEIVE_SHARE",SUCCESS:"SUCCESS",UPDATE:"UPDATE",UPLOAD:"UPLOAD",VIEWED:"VIEWED"},A=["CONTACTS_LISTS_CONTACTS","GUEST","WORKGROUP_DOCUMENT","WORKGROUP_FOLDER","WORKGROUP_MEMBER"],B="DETAILS_POPUP.SENTENCES",C={ANONYMOUS_SHARE_ENTRY:"zmdi zmdi-share",AUTHENTICATION:"ls-my-profile",CONTACTS_LISTS:"ls-contact-list-item",CONTACTS_LISTS_CONTACTS:"ls-contact-list-item",DOCUMENT_ENTRY:"zmdi zmdi-file",GUEST:"ls-guest-account",SHARE_ENTRY:"zmdi zmdi-share",WORKGROUP:"ls-workgroup",WORKGROUP_DOCUMENT:"zmdi zmdi-file",WORKGROUP_FOLDER:"ls-folder",WORKGROUP_MEMBER:"ls-user"},D={ANONYMOUS_SHARE_ENTRY:"ANONYMOUS_SHARE_ENTRY",AUTHENTICATION:"AUTHENTICATION",CONTACTS_LISTS:"CONTACTS_LISTS",CONTACTS_LISTS_CONTACTS:"CONTACTS_LISTS_CONTACTS",DOCUMENT_ENTRY:"DOCUMENT_ENTRY",GUEST:"GUEST",SHARE_ENTRY:"SHARE_ENTRY",WORKGROUP:"WORKGROUP",WORKGROUP_DOCUMENT:"WORKGROUP_DOCUMENT",WORKGROUP_FOLDER:"WORKGROUP_FOLDER",WORKGROUP_MEMBER:"WORKGROUP_MEMBER"},E={canCreateGuest:"CAN_CREATE_GUEST",canUpload:"CAN_UPLOAD",expirationDate:"EXPIRATION_DATE",name:"NAME",identifier:"NAME",firstName:"FIRST_NAME",lastName:"LAST_NAME",mail:"NAME",restricted:"RESTRICTED",right:"RIGHT"},F="DETAILS_POPUP.UPDATED_FIELDS.",G="DETAILS_POPUP.UPDATED_FIELDS_RIGHTS.",H=["canCreateGuest","canUpload","expirationDate","firstName","identifier","lastName","mail","name","restricted"];var I,J,K,L,M,N={generateAllDetails:d};return N}angular.module("linshare.audit").factory("auditDetailsService",a),a.$inject=["$filter","$q","lsAppConfig"]}(),angular.module("linshare.components",[]).constant("componentsConfig",{path:"modules/linshare.components/"}),function(){function a(){var a={restrict:"C",link:b};return a}function b(a,b){angular.element(b).appendTo("body"),a.$on("$destroy",function(){b.detach()})}angular.module("linshare.components").directive("appendToBody",a)}(),function(){function a(a){var b={restrict:"A",templateUrl:a.path+"dragAndDrop/dragAndDropTemplate.html",scope:{$flow:"=dragAndDropFlow",submitted:"&dragAndDropSubmitted",success:"&dragAndDropSuccess"},transclude:!0};return b}angular.module("linshare.components").directive("dragAndDrop",a),a.$inject=["componentsConfig"]}(),angular.module("linshare.components").service("scrollService",function(){var a={};return a.malihuScroll=function(a,b,c){$(a).mCustomScrollbar({theme:b,scrollInertia:100,axis:"yx",mouseWheel:{enable:!0,axis:c,preventDefault:!0}})},a}).service("growlService",["$translate",function(a){var b={from:"top",align:"right",icon:"icon",timer:1e3},c={from:"bottom",align:"left",icon:"icon",timer:1e3},d={from:"bottom",align:"right",icon:"icon",timer:1e3},e={from:"top",align:"center",icon:"icon",timer:0},f=function(b,c,d){a([b]).then(function(a){$.growl({icon:d.icon,title:"",message:a[b],url:""},{element:"body",type:c,allow_dismiss:!0,placement:{from:d.from,align:d.align},offset:{x:20,y:85},spacing:10,z_index:1031,delay:2500,timer:d.timer,url_target:"_blank",mouse_over:!1,animate:{enter:d.animIn,exit:d.animOut},icon_type:"class",template:'<div data-growl="container" class="alert" role="alert"><button type="button" class="close" data-growl="dismiss"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button><span data-growl="icon"></span><span data-growl="title"></span><span data-growl="message"></span><a href="#" data-growl="url"></a></div>'})})};return{notifyer:f,notifyTopRight:function(a,c){return f(a,c,b)},notifyBottomLeft:function(a,b){return f(a,b,c)},notifyBottomRight:function(a,b){return f(a,b,d)},notifyTopCenter:function(a,b){return f(a,b,e)}}}]),function(){function a(a,b,c){function d(){var b=c.get("locale");return b?b:a.use()}function e(d){d=g(d),a.use(d),c.set("locale",d),b.debug("locale changed to ",d)}function f(){a.refresh(d())}function g(a){if(a.indexOf("-")===-1)switch(a){case"fr":a+="-FR";break;case"en":a+="-US";break;case"vi":a+="-VN";break;default:a="en-US"}return a}var h={changeLocale:e,getLocale:d,refreshLocale:f};return h}angular.module("linshare.components").factory("languageService",a),a.$inject=["$translate","$log","localStorageService"]}(),function(){function a(){function a(a,c,e){var f=0;if(_.isUndefined(a)||null===a||isNaN(a))return f;var g=_.isUndefined(c)?b(a):c;return f=a/Math.pow(10,d[g].factor),f=f%1===0?f:f.toFixed(2),e?f+" "+g:f}function b(a){switch(a.toString().length){case 1:case 2:case 3:return d.B.value;case 4:case 5:case 6:return d.KB.value;case 7:case 8:case 9:return d.MB.value;case 10:case 11:case 12:return d.GB.value;case 13:case 14:case 15:return d.TB.value;case 16:case 17:case 18:return d.PB.value;case 19:case 20:case 21:return d.EB.value;case 22:case 23:case 24:return d.ZB.value;default:return d.YB.value}}function c(a,b,c){var e=0;return _.isUndefined(a)||null===a||isNaN(a)?e:(e=a*Math.pow(10,d[b].factor),e=e%1===0?e:e.toFixed(2),c?e+d.B:e)}var d={B:{value:"B",factor:0},KB:{value:"KB",factor:3},MB:{value:"MB",factor:6},GB:{value:"GB",factor:9},TB:{value:"TB",factor:12},PB:{value:"PB",factor:15},EB:{value:"EB",factor:18},ZB:{value:"ZB",factor:21},YB:{value:"YB",factor:24}},e={byteTo:a,find:b,toByte:c,units:d};return e}angular.module("linshare.components").factory("unitService",a)}(),function(){function a(a){var b={restrict:"E",scope:{filterBoxDate:"@?",filterBoxSize:"@?",filterBoxUser:"@?"},controller:"FilterBoxController",controllerAs:"filterBoxVm",bindToController:{filterBoxItems:"=",filterBoxTable:"="},templateUrl:a.path+"filterBox/filterBoxTemplate.html"};return b}angular.module("linshare.components").directive("filterBox",a),a.$inject=["componentsConfig"]}(),function(){function a(a,b,c,d,e,f){function g(){o.sizeStart=void 0,o.sizeEnd=void 0,o.dateStart=void 0,o.dateEnd=void 0,o.selectedContact=void 0,o.activate=!1,k(),o.showed=_.cloneDeep(o.filterBoxItems),delete o.filterBoxTable.filter().sender,j()}function h(a){if(!_.isUndefined(a)&&""!==a.firstName)return a.firstName.concat(" ",a.lastName)}function i(){if(o.activate||(o.filterBoxItemsInit=_.cloneDeep(o.filterBoxItems),o.activate=!0),k(),o.showUnit)var a=o.sizeStart?o.unitService.toByte(o.sizeStart,o.unitSize.value,!1):0,b=o.sizeEnd?o.unitService.toByte(o.sizeEnd,o.unitSize.value,!1):999999999999;if(o.showDateRange)var c=o.dateStart?moment(o.dateStart):moment("0000-01-01"),d=o.dateEnd?moment(o.dateEnd).add("day",1):moment().add("day",1);_.remove(o.filterBoxItems,function(e){var f=!0,g=!0;if(o.showUnit){var h=e.size.toFixed(1);f=h>=a&&h<=b}if(o.showDateRange){var i="1"===o.dateType?e.modificationDate:e.creationDate;g=i>=c&&i<=d}return!(f&&g)}),o.showRecipients&&!_.isUndefined(o.selectedContact)?_.extend(o.filterBoxTable.filter(),{sender:{firstName:o.selectedContact.firstName,lastName:o.selectedContact.lastName,mail:o.selectedContact.mail}}):delete o.filterBoxTable.filter().sender,o.showed=_.cloneDeep(o.filterBoxItems),j()}function j(){o.filterBoxTable.reload().then(function(a){var c=o.filterBoxTable._params,d=o.filterBoxItems.slice((c.page-1)*c.count,c.page*c.count);_.isEqual(a.length,d.length)||b(function(){j()},0)})}function k(){if(!_.isNil(o.showed)&&!_.isEqual(o.showed,o.filterBoxItems)){var a=_.differenceBy(o.showed,o.filterBoxItems,"uuid");_.pullAllBy(o.filterBoxItemsInit,a,"uuid");var b=_.differenceBy(o.filterBoxItems,o.showed,"uuid");o.filterBoxItemsInit.push.apply(o.filterBoxItemsInit,b)}_.pullAll(o.filterBoxItems,o.filterBoxItems),o.filterBoxItems.push.apply(o.filterBoxItems,o.filterBoxItemsInit)}function l(a){return _.isString(a)?a:_.isObject(a)?"<span>"+a.firstName+" "+a.lastName+'</span> <span > <i class="zmdi zmdi-email"></i> &nbsp;'+a.mail+"</span>":void 0}const m=e.date_fr_format,n=e.date_en_format;var o=this;o.autocompleteUserRestService=d,o.clearParams=g,o.activate=!1,o.formatLabel=h,o.format="fr"===c.use()?m:n,o.maxDate=a.maxDate?null:new Date,o.unitService=f,o.updateFilters=i,o.userRepresentation=l}angular.module("linshare.components").controller("FilterBoxController",a),a.$inject=["$scope","$timeout","$translate","autocompleteUserRestService","lsAppConfig","unitService"]}(),function(){function a(a){function b(a,b){function c(){a.fabDOM=angular.element(b[0]),a.fabDOM.detach(),angular.element("body").append(a.fabDOM)}function d(){var b=0;return _.forEach(a.fabButtonActions,function(a){_.isUndefined(a.hide)&&b++}),b}c(),a.fab={isOpen:!1,selectedDirection:"left"},a.isDoubleRowFab=d()>3,a.$watch("fab.isOpen",function(b){b?(angular.element("body").addClass("lock-scroll fab-open"),angular.element(".md-toolbar-tools").addClass("setWhite"),angular.element(".multi-select-mobile").addClass("setDisabled"),angular.element("#overlayMobileFab").addClass("toggledMobileShowOverlay"),angular.element("#content-container").addClass("setDisabled"),a.isDoubleRowFab&&angular.element("#overlayMobileFab").addClass("double-row-fab")):(angular.element("body").removeClass("lock-scroll fab-open"),angular.element(".md-toolbar-tools").removeClass("setWhite"),angular.element(".multi-select-mobile").removeClass("setDisabled"),angular.element("#overlayMobileFab").removeClass("toggledMobileShowOverlay"),angular.element("#content-container").removeClass("setDisabled"),a.isDoubleRowFab&&angular.element("#overlayMobileFab").removeClass("double-row-fab"))}),a.$on("$destroy",function(a){a.currentScope.fabDOM.detach()})}var c={restrict:"A",templateUrl:a.path+"fabButton/fabButtonTemplate.html",scope:{$flow:"=?fabButtonFlow",fabButtonActions:"=",fabButtonToolbar:"=?"},link:b};return c}angular.module("linshare.components").directive("fabButton",a),a.$inject=["componentsConfig"]}(),function(){function a(a){function b(a){a._=_}var c={restrict:"E",templateUrl:a.path+"fabButton/directives/fabLink/fabLinkTemplate.html",scope:{fabLinkAction:"=",fabLinkIcon:"=",fabLinkLabel:"="},link:b};return c}angular.module("linshare.components").directive("fabLink",a),a.$inject=["componentsConfig"]}(),function(){function a(a){function b(b,c,d){var e=a.getOwner(b.ownerLabelUser);_.isNil(b.ownerLabelAttr)?c.text(e):_.isNil(d[_.camelCase(b.ownerLabelAttr)])?c.attr(b.ownerLabelAttr,e):d[_.camelCase(b.ownerLabelAttr)]=e}var c={restrict:"A",scope:{ownerLabelUser:"=",ownerLabelAttr:"@?"},link:b};return c}angular.module("linshare.components").directive("ownerLabel",a),a.$inject=["ownerLabel"]}(),function(){function a(a,b,c){function d(){a.all([c.getCurrentUser(),b(["BY","ME"])]).then(function(a){g=a[0],f=a[1].BY,h=a[1].ME})}function e(a){return _.isNil(a.mail)?_.isEqual(_.pick(g,["firstName","lastName"]),a)?f+" "+h:f+" "+a.firstName+" "+a.lastName:_.isEqual(_.pick(g,["firstName","lastName","mail"]),a)?f+" "+h:f+" "+a.firstName+" "+a.lastName}var f,g,h,i={getOwner:e};return d(),i}angular.module("linshare.components").factory("ownerLabel",a),a.$inject=["$q","$translate","authenticationRestService"]}(),function(){function a(a,b,c){function d(a,c,d,g){function h(a){var b=new Date(a).setHours(0,0,0,0);return!(b<new Date(d.min).setHours(0,0,0,0)||b>new Date(d.max).setHours(0,0,0,0))}function i(b,c){b.preventDefault(),b.stopPropagation(),a[c]=!0}g.$validators.invalidDate=h,a.format="fr"===b.use()?e:f,a.open=i}var e=c.date_fr_format,f=c.date_en_format,g={restrict:"A",scope:!1,transclude:!0,require:"ngModel",link:d};return g}angular.module("linshare.components").directive("workingDatePicker",a),a.$inject=["componentsConfig","$translate","lsAppConfig"]}(),function(){function a(a,b,c,d,e,f){function g(){a.all([c([k.empty.key,k.endingPoint.key]),c(k.rejectedChar.key,{rejectedChar:k.rejectedChar.param})]).then(function(a){k.empty.value=a[0][k.empty.key],k.endingPoint.value=a[0][k.endingPoint.key],k.rejectedChar.value=a[1]})}function h(a){return""===a?(f.error(k.empty.value),!1):"."===a.charAt(a.length-1)?(f.error(k.endingPoint.value),!1):!l.test(a)||(f.error(k.rejectedChar.value),!1)}function i(a,b){if(0!==a.length&&_.some(a,{name:b})){var c=0;return _.forEach(a,function(a){if(a.name.indexOf(b)>-1){var d=parseInt(a.name.replace(/\D/g,""));c=d>c?d:c}}),c+1}return 0}function j(c,d){function f(a,b){var d=angular.element(b.target).text();d===a&&c.uuid?i(c):j(d,c)}function g(){n.attr("contenteditable","false").off("focus").off("keydown").off("focus")}function i(a){k=!0,b(function(){g()},0),n.text(m),l.reject({config:a,data:{errCode:e.CANCELLED_BY_USER,data:a}})}function j(a,b){a=a.trim(),h(a)?(k=!0,b.name=a,b.save().then(function(a){l.resolve(a)})["catch"](function(a){l.reject(a),n.text(m),b.name=m,n.focus()})["finally"](function(){g()})):n.focus()}var k=!1,l=a.defer(),m=c.name.trim(),n=angular.element(document.querySelector("body")).find(d);return n.attr("contenteditable","true").on("focus",function(){b(function(){n.text(m),document.execCommand("selectAll",!1,null)},0)}).on("focusout",function(a){k||f(m,a)}).on("keydown",function(a){27!==a.which&&27!==a.keyCode||i(c),13===a.which&&f(m,a)}),n.focus(),l.promise}var k={empty:{key:"GROWL_ALERT.ERROR.RENAME_INVALID.EMPTY",value:""},endingPoint:{key:"GROWL_ALERT.ERROR.RENAME_INVALID.ENDING_POINT",value:""},rejectedChar:{key:"GROWL_ALERT.ERROR.RENAME_INVALID.REJECTED_CHAR",param:d.rejectedChar.join("-, -").replace(new RegExp("-","g"),"'"),value:""}},l=new RegExp("[\\"+d.rejectedChar.join("-").replace(new RegExp("-","g"),"\\")+"]"),m={isNameValid:h,itemNumber:i,rename:j};return g(),m}angular.module("linshare.components").factory("itemUtilsService",a),a.$inject=["$q","$timeout","$translate","lsAppConfig","lsErrorCode","toastService"]}(),angular.module("linshare.components").filter("readableSize",function(){return function(a,b){var c=b?1e3:1024;if(a<0)return"0 B";if(a<c)return a+" B";var d=b?["kB","MB","GB","TB","PB","EB","ZB","YB"]:["KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"],e=-1;do a/=c,++e;while(a>=c);return a.toFixed(1)+" "+d[e]}}).filter("getextension",function(){return function(a){if(a)return a.split(".").pop().toUpperCase()}}).filter("mimetypeIcone",function(){return function(a){var b="ls-file-type-other iconcolor-text",c=[{regex:/pdf/,icone:"ls-file-type-pdf iconcolor-pdf",info:"PDF"},{regex:/image|png|jpeg|jpg/,icone:"ls-file-type-img iconcolor-text",info:"IMAGE"},{regex:/audio/,icone:"ls-file-type-audio iconcolor-text",info:"AUDIO"},{regex:/video/,icone:"ls-file-type-video iconcolor-text",info:"VIDEO"},{regex:/powerpoint/,icone:"ls-file-type-presentation iconcolor-powerpoint",info:"POWERPOINT"},{regex:/application\/vnd.oasis.opendocument.presentation/,icone:"ls-file-type-presentation iconcolor-powerpoint",info:"ODP"},{regex:/word/,icone:"ls-file-type-text iconcolor-text",info:"WORD"},{regex:/application\/vnd.oasis.opendocument.text/,icone:"ls-file-type-text iconcolor-text",info:"ODT"},{regex:/zip|tar|compressed|tar.bz2|tgz/,icone:"ls-file-type-archive iconcolor-text",info:"ARCHIVE"},{regex:/excel/,icone:"ls-excel-alt iconcolor-excel",info:"EXCEL"},{regex:/application\/vnd.oasis.opendocument.spreadsheet/,icone:"ls-excel-alt iconcolor-excel",info:"ODS"},{regex:/text\/plain/,icone:"ls-file-type-text iconcolor-text",info:"TEXT"},{regex:/text/,icone:"ls-file-type-code iconcolor-text",info:"CODE"}];return _.forEach(c,function(c){if(a.match(c.regex))return b=c.icone,!1}),b}}),function(){function a(){function a(a){return parseInt(a/e)+" h"+parseInt(60*(parseFloat(a/e)-parseInt(a/e)))+" min"}function b(a){return parseInt(a/f)+" min"+Math.round(60*(parseFloat(a/f)-parseInt(a/f)))+" s"}function c(c){return Number.isFinite(c)?c<f?Math.round(c)+" s":f<=c<e?b(c):e<=c<d?a(c):void 0:"-"}const d=86400,e=3600,f=60;return c}angular.module("linshare.components").filter("remainingTime",a)}(),function(){function a(a){function b(a){return moment(a).format("LLLL")}var c=a.use().substring(0,a.use().indexOf("-"));return moment.locale(c),b}angular.module("linshare.components").filter("calendarTime",a),a.$inject=["$translate"]}(),function(){function a(a){function b(a){return moment(a).fromNow()}var c=a.use().substring(0,a.use().indexOf("-"));return moment.locale(c),b}angular.module("linshare.components").filter("relativeTime",a),a.$inject=["$translate"]}(),function(){function a(a){function b(b,c){return c?a("translate")(b):b}return b}angular.module("linshare.components").filter("translateIf",a),a.$inject=["$filter"]}(),function(){function a(a){function b(a){return moment(a).format("L")}var c=a.use().substring(0,a.use().indexOf("-"));return moment.locale(c),b}angular.module("linshare.components").filter("shortTime",a),a.$inject=["$translate"]}(),function(){function a(){function a(a,b){a.isNewAddition&&(angular.element(b).addClass("set-hidden-anim").delay(200).queue(function(){$(this).addClass("anim-in")}),a.isNewAddition=!1)}var b={restrict:"A",link:a};return b}angular.module("linshare.components").directive("newUploadAnim",a)}(),function(){function a(a,b,c){function d(a,b,c){return n={toastText:a,toastLabel:b,toastDetails:c,toastError:!0,toastClose:j},k(n,m.none)}function e(a,b,c){return n={toastText:a,toastLabel:b,toastDetails:c,toastInfo:!0,toastClose:j},k(n,m["default"])}function f(){return l}function g(a,b,c){return n={toastText:a,toastLabel:b,toastDetails:c,toastIsolate:!0,toastClose:j},k(n,m.none)}function h(a,b,c){return n={toastText:a,toastLabel:b,toastDetails:c,toastSuccess:!0,toastClose:j},k(n,m["default"])}function i(a,b,c){return n={toastText:a,toastLabel:b,toastDetails:c,toastWarning:!0,toastClose:j},k(n,m["default"])}function j(b){return l=!1,b.openDetails=!1,_.isUndefined(b.toastDetails)?a.hide():a.hide(b.toastDetails)}function k(c,d){return l=!0,b(function(){l=!1},1e3),a.show({locals:c,controller:"toastController",controllerAs:"toastVm",bindToController:!0,hideDelay:d,position:o,templateUrl:p})}var l=!1,m={"default":3e3,none:0},n={},o="bottom right",p=c.path+"toast/toast.html",q={error:d,info:e,isActive:f,isolate:g,success:h,warning:i};return q}angular.module("linshare.components").factory("toastService",a),a.$inject=["$mdToast","$timeout","componentsConfig"]}(),function(){function a(){var a=this;_.extend(a.scope,a.locals)}angular.module("linshare.components").controller("toastController",a)}(),function(){function a(a,b,c,d){function e(a){var b=I?I.filter():null,c=I?I.orderBy():[j()];if(!_.isNil(a)){var d=g(C,b,c);return Math.floor(_.findIndex(d,{uuid:a})/D)+1}return 1}function f(){return I.page()}function g(b,c,d){var e=c?a("filter")(b,c):b;return d?a("orderBy")(e,d):e}function h(a,b){var c=_.find(a,{uuid:b});return _.isNil(c)?null:c}function i(){return B}function j(){var a=Object.keys(F)[0],b="desc"===F[a]?"-":"";return b+a}function k(){return H}function l(){return G}function m(){return I}function n(){return J}function o(){B={},C={},D=c.tableParams.count,E={},F=c.tableParams.sorting,H=[],G=!1,I=null,J=!0}function p(a,c,f){return b(function(b){o(),C=a,E=c||{};var i={};i.itemToSelect=h(C,f);var j=!_.isNil(i.itemToSelect);I=new d({page:j?e(f):1,sorting:F,count:D,filter:E},{getData:function(a){var b=g(C,a.filter(),a.orderBy());return a.total(b.length),j&&(A(i.itemToSelect),j=!1),b.slice((a.page()-1)*a.count(),a.page()*a.count())}}),b(i)})}function q(a){return f()===e(a)}function r(){G=!G,I.filter().isSelected?delete I.filter().isSelected:I.filter().isSelected=!0}function s(){return H.length}function t(a){for(var b=a.length-1;b>=0;b--)a[b].isSelected=!1,a.splice(b,1)}function u(a){return _.isNil(a)||(C=a),I.reload()}function v(){G=!1,delete I.filter().isSelected,t(H),w()}function w(a){var b=a||B;_.forEach(b,function(a,c){b[c]=!1})}function x(a,b,c){_.forEach(b,function(b){E[b]=a}),I.operator=c?c:"&&",I.filter(E),I.reload()}function y(a,b,c){var d=a||I.data,e=b||I.page(),f=c||B[e];f?(_.forEach(d,function(a){_.find(H,a)&&(a.isSelected=!1,_.remove(H,function(b){return t(b),b.uuid===a.uuid}))}),B[e]=!1):(_.forEach(d,function(a){a.isSelected||(a.isSelected=!0,H.push(a))}),B[e]=!0)}function z(a,b){J=!J,I.sorting(a,J?"desc":"asc");var c=b.currentTarget;angular.element(".sort-dropdown a").removeClass("selected-sorting").promise().done(function(){angular.element(c).addClass("selected-sorting")})}function A(a){if(a.isSelected=!a.isSelected,a.isSelected)H.push(a);else{var b=H.indexOf(a);b>-1&&H.splice(b,1)}}var B,C,D,E,F,G,H,I,J,K={getCurrentPage:f,getFlagsOnSelectedPages:i,getSelectedItemsList:k,getSelectionIsIsolated:l,getTableParams:m,getToggleSelectedSort:n,initTableParams:p,isItemAddedOnCurrentPage:q,isolateSelection:r,lengthOfSelectedDocuments:s,reloadTableParams:u,resetSelectedItems:v,resetFlagsOnSelectedPages:w,tableApplyFilter:x,tableSelectAll:y,tableSort:z,toggleItemSelection:A};return K}angular.module("linshare.components").factory("tableParamsService",a),a.$inject=["$filter","$q","lsAppConfig","NgTableParams"]}(),function(){angular.module("linshare.contactsLists",["linshare.components","ngTable","restangular"])}(),function(){function a(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s){function t(){n.getFunctionalityParams("CONTACTS_LIST__CREATION_RIGHT").then(function(a){ea.functionality=a}),g.addPart("contactsLists"),J(),f.refresh().then(function(){f(["ACTION.NEW_CONTACTS_LIST","CONTACTS_LISTS_ACTION.FILTER_BY.MY_LISTS","CONTACTS_LISTS_ACTION.FILTER_BY.OTHER_LISTS","CONTACTS_LISTS_DETAILS.PRIVATE","CONTACTS_LISTS_DETAILS.PUBLIC","GROWL_ALERT.WARNING.CONTACT_STILL_EXISTS","ACTION.COPY_ADJ","GROWL_ALERT.ERROR.RENAME_CONTACTS_LIST"]).then(function(a){aa=a["ACTION.NEW_CONTACTS_LIST"],ea.myLists=a["CONTACTS_LISTS_ACTION.FILTER_BY.MY_LISTS"],ea.otherLists=a["CONTACTS_LISTS_ACTION.FILTER_BY.OTHER_LISTS"],ea.currentView=ea.isFromMyContactsLists?ea.myLists:ea.otherLists,ba=a["CONTACTS_LISTS_DETAILS.PRIVATE"],ca=a["CONTACTS_LISTS_DETAILS.PUBLIC"],da=a["GROWL_ALERT.WARNING.CONTACT_STILL_EXISTS"],Y=a["ACTION.COPY_ADJ"],Z=a["GROWL_ALERT.ERROR.RENAME_CONTACTS_LIST"]})}),e(function(){ea.createNew&&ea.isFromMyContactsLists&&y()},0),b.$on("$stateChangeSuccess",function(){angular.element(".multi-select-mobile").appendTo("body")}),ea.fabButton={actions:[{action:function(){return ea.isFromMyContactsLists?ea.createContactsList():ea.goToMineAndCreateContactsList();
},label:"CONTACTS_LISTS_ACTION.CREATE_CONTACTS_LIST",icon:"zmdi zmdi-plus"}]}}function u(a){m.selectDocument(ea.selectedContactsLists,a)}function v(a){return a.trim().replace(/(\r\n|\n|\r)/gm,"")}function w(){angular.element("#drop-area").removeClass("search-toggled"),angular.element("#searchInMobileFiles").val("").trigger("change")}function x(a,b){j.getList(a).then(function(a){ea.contactsToAddList=a,O(!0,b)})}function y(){ea.isFromMyContactsLists||(ea.isFromMyContactsLists=!ea.isFromMyContactsLists);var a=o.itemNumber(ea.itemsList.plain(),aa),b=a>0?aa+" ("+a+")":aa;z(b)}function z(a){if(ea.canCreate&&ea.functionality.enable){var c=i.restangularize({name:v(a),owner:_.pick(b.userLogged,["firstName","lastName","uuid"])});ea.canCreate=!1,ea.itemsList.push(c),ea.tableParams.sorting("modificationDate","desc"),ea.tableParams.reload(),e(function(){M(c,'td[uuid=""] .file-name-disp')},0)}}function A(a){_.forEach(a,function(a){a.remove().then(function(){f("GROWL_ALERT.ACTION.DELETE_SINGULAR").then(function(a){s.success(a)}),_.remove(ea.itemsList,a),_.remove(ea.selectedContactsLists,a),ea.tableParams.reload()})})}function B(a){m.deleteDocuments(a,A)}function C(a){var c=_.clone(a);c.name=c.name+" ("+Y+" "+moment().format()+")",c.owner=b.userLogged,P(c,!0)}function D(a){return m.getItemDetails(i,a)}function E(a){return a["public"]?ca:ba}function F(a,b){c.go("administration.contactslists.list.contacts",{contactsListUuid:a,contactsListName:b,addContacts:!0})}function G(a,b){var d=$("td[uuid="+a+"]").find(".file-name-disp");"false"===angular.element(d).attr("contenteditable")&&c.go("administration.contactslists.list.contacts",{contactsListUuid:a,contactsListName:b})}function H(){c.go("administration.contactslists.list",{from:ea.contactsListsMinePage,createNew:!0})}function I(a){b.mainVm.sidebar.setData(ea),b.mainVm.sidebar.setContent(a),b.mainVm.sidebar.show()}function J(){ea.tableParams=new r({page:1,sorting:{modificationDate:"desc"},count:20,filter:ea.paramFilter},{getData:function(b){var c=[];switch(b.filter().operator){case"||":_.forOwn(b.filter(),function(b,d){var e={};e[d]=b,"operator"!==d&&(c=_.concat(c,a("filter")(ea.itemsList,e)))}),c=_.uniq(c);break;default:c=b.hasFilter()?a("filter")(ea.itemsList,b.filter()):ea.itemsList}var d=b.sorting()?a("orderBy")(c,b.orderBy()):c;return b.total(d.length),b.settings({counts:c.length>10?[10,25,50,100]:[]}),d.slice((b.page()-1)*b.count(),b.page()*b.count())}})}function K(){angular.element("#drop-area").addClass("search-toggled"),angular.element("#top-search-wrap input").focus()}function L(){_.forEach(ea.itemsList,function(a){_.isUndefined(a)||a.modificationDate||_.remove(ea.itemsList,a)})}function M(a,b){b=b||"td[uuid="+a.uuid+"] .file-name-disp",o.rename(a,b).then(function(b){a=_.assign(a,b),ea.canCreate=!0})["catch"](function(c){25001===c.data.errCode&&(s.error(Z),M(a,b)),c.data.errCode===q.CANCELLED_BY_USER&&(a.uuid||ea.itemsList.splice(_.findIndex(ea.itemsList,a),1),ea.canCreate=!0)})["finally"](function(){ea.tableParams.reload()})}function N(){delete ea.tableParams.filter().isSelected,m.resetItemSelection(ea.selectedContactsLists),ea.flagsOnSelectedPages={}}function O(a,c){var d=!1,e=ea.contactsToAddList.length;c=c||ea.contactsListUuidAddContacts,_.forEach(ea.contactsToAddList,function(g,h){j.create(c,g).then(function(){a||f("GROWL_ALERT.ACTION.UPDATE").then(function(a){s.success(a)}),_.remove(ea.contactsToAddList,{mail:g.mail}),h+1===e&&b.mainVm.sidebar.hide()},function(a){if(45400===a.data.errCode){var b=g.firstName+" "+g.lastName+" "+da;s.error(b),_.remove(ea.contactsToAddList,{mail:g.mail})}d=!0})})}function P(a,b){i.create({name:v(a.name)}).then(function(c){L(),b&&x(a.uuid,c.uuid),ea.itemsList.push(c),ea.tableParams.reload()},function(a){return a&&(L(),ea.tableParams.reload()),null})}function Q(a,b,c){var d=b||ea.tableParams.page(),e=a||ea.tableParams.data,f=c||ea.flagsOnSelectedPages[d];f?(ea.selectedContactsLists=_.xor(ea.selectedContactsLists,e),_.forEach(e,function(a){a.isSelected&&(a.isSelected=!1,_.remove(ea.selectedContactsLists,function(b){return b.uuid===a.uuid}))}),ea.flagsOnSelectedPages[d]=!1):(_.forEach(e,function(a){a.isSelected||(a.isSelected=!0,ea.selectedContactsLists.push(a))}),ea.flagsOnSelectedPages[d]=!0)}function R(a){var b=a.currentTarget;angular.element(b).closest("ul").find(".active-check").removeClass("active-check"),e(function(){angular.element(b).addClass("active-check")},200)}function S(a,b){i.get(a.uuid).then(function(a){ea.currentSelectedDocument.current=a,ea.loadSidebarContent(p.contactslists),ea.mdtabsSelection.selectedIndex=0});var c=b.currentTarget;angular.element("#file-list-table tr li").removeClass("activeActionButton").promise().done(function(){angular.element(c).addClass("activeActionButton")})}function T(a,b){ea.toggleSelectedSort=!ea.toggleSelectedSort,ea.tableParams.sorting(a,ea.toggleSelectedSort?"desc":"asc");var c=b.currentTarget;angular.element(".files .sort-dropdown a ").removeClass("selected-sorting").promise().done(function(){angular.element(c).addClass("selected-sorting")})}function U(a){a["public"]=!a["public"],i.update(a).then(function(a){ea.currentSelectedDocument.current=a,_.find(ea.itemsList,{uuid:a.uuid})["public"]=a["public"],ea.tableParams.reload()})}function V(a,b,c){_.forEach(b,function(b){ea.paramFilter[b]=a}),ea.paramFilter.operator=c?c:"&&",ea.tableParams.filter(ea.paramFilter),ea.tableParams.reload()}function W(){ea.tableParams.filter().isSelected?delete ea.tableParams.filter().isSelected:ea.tableParams.filter().isSelected=!0}function X(){ea.searchMobileDropdown?w():K(),ea.searchMobileDropdown=!ea.searchMobileDropdown}var Y,Z,aa,ba,ca,da,ea=this;ea.addSelectedDocument=u,ea.canCreate=!0,ea.closeSearch=w,ea.contactsListsMinePage=p.contactsListsMinePage,ea.contactsListsOthersPage=p.contactsListsOthersPage,ea.contactsToAddList=[],ea.createContactsList=y,ea.createNew=l,ea.currentSelectedDocument={},ea.deleteContactsList=B,ea.duplicateItem=C,ea.flagsOnSelectedPages={},ea.getDetails=D,ea.getOwnerName=k.getOwnerName,ea.getVisibility=E,ea.goToContactsListAndAddContacts=F,ea.goToContactsListTarget=G,ea.goToMineAndCreateContactsList=H,ea.isFromMyContactsLists=d.from===p.contactsListsMinePage,ea.itemsList=h,ea.loadSidebarContent=I,ea.loadTable=J,ea.mdtabsSelection={selectedIndex:0},ea.openSearch=K,ea.paramFilter={},ea.resetSelectedDocuments=N,ea.renameContactsList=M,ea.saveContacts=O,ea.selectDocumentsOnCurrentPage=Q,ea.selectedContactsLists=[],ea.setDropdownSelected=R,ea.showItemDetails=S,ea.sortDropdownSetActive=T,ea.switchVisibility=U,ea.tableApplyFilter=V,ea.toggleFilterBySelectedFiles=W,ea.toggleSearchState=X,t()}angular.module("linshare.contactsLists").controller("contactsListsListController",a),a.$inject=["$filter","$scope","$state","$stateParams","$timeout","$translate","$translatePartialLoader","contactsListsList","contactsListsListRestService","contactsListsContactsRestService","contactsListsService","createNew","documentUtilsService","functionalityRestService","itemUtilsService","lsAppConfig","lsErrorCode","NgTableParams","toastService"]}(),function(){function a(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){function p(){f.addPart("contactsLists"),D(),i.get(O.contactsListUuid).then(function(a){O.contactsListDetails=a,O.canManage=O.contactsListDetails.owner.uuid===b.userLogged.uuid,O.contactsListUuid=a.uuid,O.fabButton={actions:[{action:function(){return O.onAddContacts()},label:"CONTACTS_LISTS_ACTION.MORE.ADD_CONTACT",icon:"zmdi zmdi-plus",hide:!O.canManage}]}}),d(function(){O.addContacts&&x()},0),w(),e(["CONTACTS_LISTS_DETAILS.PRIVATE","CONTACTS_LISTS_DETAILS.PUBLIC","GROWL_ALERT.WARNING.CONTACT_STILL_EXISTS"]).then(function(a){L=a["CONTACTS_LISTS_DETAILS.PRIVATE"],M=a["CONTACTS_LISTS_DETAILS.PUBLIC"],N=a["GROWL_ALERT.WARNING.CONTACT_STILL_EXISTS"]}),b.$on("$stateChangeSuccess",function(){angular.element(".multi-select-mobile").appendTo("body")})}function q(a){var b=_.find(O.itemsList,{mail:a.mail});if(_.isUndefined(b)){var c={firstName:a.firstName||a.mail.substring(0,a.mail.indexOf("@")),lastName:a.lastName||"",mail:a.mail,mailingListUuid:O.contactsListUuid};A(c)}else{var d=(a.firstName||a.mail)+" "+(a.lastName||"")+" "+N;o.info(d)}}function r(a){l.selectDocument(O.selectedContacts,a)}function s(){angular.element("#drop-area").removeClass("search-toggled"),angular.element("#searchInMobileFiles").val("").trigger("change")}function t(a){_.forEach(a,function(a){delete a.show,a.remove().then(function(){e("GROWL_ALERT.ACTION.DELETE_SINGULAR").then(function(a){o.success(a)}),_.remove(O.itemsList,a),_.remove(O.selectedContacts,a),O.itemsListCopy=O.itemsList,O.tableParams.reload(),b.mainVm.sidebar.hide()})})}function u(a){l.deleteDocuments(a,t)}function v(a){b.mainVm.sidebar.setData(O),b.mainVm.sidebar.setContent(a),b.mainVm.sidebar.show()}function w(){O.tableParams=new n({page:1,sorting:{modificationDate:"desc"},count:20,filter:O.paramFilter},{getData:function(b){var c=[];switch(b.filter().operator){case"||":_.forOwn(b.filter(),function(b,d){var e={};e[d]=b,"operator"!==d&&(c=_.concat(c,a("filter")(O.itemsList,e)))}),c=_.uniq(c);break;default:c=b.hasFilter()?a("filter")(O.itemsList,b.filter()):O.itemsList}var d=b.sorting()?a("orderBy")(c,b.orderBy()):c;return b.total(d.length),b.settings({counts:c.length>10?[10,25,50,100]:[]}),d.slice((b.page()-1)*b.count(),b.page()*b.count())}})}function x(){O.mdtabsSelection.selectedIndex=1,O.loadSidebarContent(m.contactslistsAddContacts),angular.element("#focusInputShare").focus()}function y(){angular.element("#drop-area").addClass("search-toggled"),angular.element("#top-search-wrap input").focus()}function z(){delete O.tableParams.filter().isSelected,l.resetItemSelection(O.selectedContacts),O.flagsOnSelectedPages={}}function A(a){j.create(O.contactsListUuid,a).then(function(a){D(a),O.itemsList.push(a),e("GROWL_ALERT.ACTION.INSERT").then(function(a){o.success(a)}),O.tableParams.sorting("modificationDate","desc"),O.tableParams.reload()})}function B(a,b,c){var d=b||O.tableParams.page(),e=a||O.tableParams.data,f=c||O.flagsOnSelectedPages[d];f?(O.selectedContacts=_.xor(O.selectedContacts,e),_.forEach(e,function(a){a.isSelected&&(a.isSelected=!1,_.remove(O.selectedContacts,function(b){return b.uuid===a.uuid}))}),O.flagsOnSelectedPages[d]=!1):(_.forEach(e,function(a){a.isSelected||(a.isSelected=!0,O.selectedContacts.push(a))}),O.flagsOnSelectedPages[d]=!0)}function C(a){var b=a.currentTarget;angular.element(b).closest("ul").find(".active-check").removeClass("active-check"),d(function(){angular.element(b).addClass("active-check")},200)}function D(a){function b(a){a._firstName=_.clone(a.firstName),a.firstNameModel=function(b){return _.isUndefined(b)?a._firstName:a._firstName=b},a._lastName=_.clone(a.lastName),a.lastNameModel=function(b){return _.isUndefined(b)?a._lastName:a._lastName=b}}a?b(a):_.forEach(O.itemsList,function(a){b(a)})}function E(a){a.$setSubmitted(),_.forEach(a,function(b){b&&b.$$parentForm===a&&b.$setSubmitted&&E(b)})}function F(a,b,c){if(O.currentSelectedDocument.current=a,O.loadSidebarContent(m.contactslistsContact),O.mdtabsSelection.selectedIndex=c||0,angular.element("#lastname").trigger("focus"),b){var d=b.currentTarget;angular.element("#file-list-table tr li").removeClass("activeActionButton").promise().done(function(){angular.element(d).addClass("activeActionButton")})}}function G(a,b){O.toggleSelectedSort=!O.toggleSelectedSort,O.tableParams.sorting(a,O.toggleSelectedSort?"desc":"asc");var c=b.currentTarget;angular.element(".files .sort-dropdown a ").removeClass("selected-sorting").promise().done(function(){angular.element(c).addClass("selected-sorting")})}function H(a,b,c){_.forEach(b,function(b){O.paramFilter[b]=a}),O.paramFilter.operator=c?c:"&&",O.tableParams.filter(O.paramFilter),O.tableParams.reload()}function I(){O.tableParams.filter().isSelected?delete O.tableParams.filter().isSelected:O.tableParams.filter().isSelected=!0}function J(){O.searchMobileDropdown?s():y(),O.searchMobileDropdown=!O.searchMobileDropdown}function K(a,c){if(a.$valid){var d=_.cloneDeep(c);d.firstName=d._firstName,d.lastName=d._lastName,delete d._firstName,delete d._lastName,j.update(O.contactsListUuid,d).then(function(){O.itemsList[_.findIndex(O.itemsList,{uuid:d.uuid})]=d,D(d),e("GROWL_ALERT.ACTION.UPDATE").then(function(a){o.success(a)}),O.tableParams.reload(),b.mainVm.sidebar.hide()})}else O.setSubmitted(a)}var L,M,N,O=this;O.addContacts=g,O.addRecipientToCreateUsersList=q,O.addSelectedDocument=r,O.closeSearch=s,O.contactsListName=c.contactsListName,O.contactsListUuid=c.contactsListUuid,O.currentSelectedDocument={},O.deleteContact=u,O.flagsOnSelectedPages={},O.getOwnerName=k.getOwnerName,O.itemsList=h,O.itemsListCopy=O.itemsList,O.loadSidebarContent=v,O.loadTable=w,O.mdtabsSelection={selectedIndex:0},O.onAddContacts=x,O.openSearch=y,O.paramFilter={},O.resetSelectedDocuments=z,O.saveContact=A,O.selectDocumentsOnCurrentPage=B,O.selectedContacts=[],O.setDropdownSelected=C,O.setSubmitted=E,O.showItemDetails=F,O.sortDropdownSetActive=G,O.tableApplyFilter=H,O.toggleFilterBySelectedFiles=I,O.toggleSearchState=J,O.updateContact=K,p()}angular.module("linshare.contactsLists").controller("contactsListsContactsController",a),a.$inject=["$filter","$scope","$stateParams","$timeout","$translate","$translatePartialLoader","addContacts","contactsListsContacts","contactsListsListRestService","contactsListsContactsRestService","contactsListsService","documentUtilsService","lsAppConfig","NgTableParams","toastService"]}(),function(){function a(a,b){function c(){b.addPart("contactsLists"),a.refresh().then(function(){a(["ME"]).then(function(a){e=a.ME})})}function d(a,b){if(!_.isUndefined(a))return a.owner.uuid===b?e:a.owner.firstName+" "+a.owner.lastName}var e,f={getOwnerName:d};return c(),f}angular.module("linshare.contactsLists").factory("contactsListsService",a),a.$inject=["$translate","$translatePartialLoader"]}(),function(){function a(a,b,c){function d(c){return a.debug("contactsListsListRestService - create"),j(b.all(k).post(c))}function e(c){return a.debug("contactsListsListRestService - get",c),j(b.one(k,c).get())}function f(c){return a.debug("contactsListsListRestService - getList"),j(b.all(k).getList({mine:c}))}function g(c){return a.debug("contactsListsListRestService - remove",c),j(b.one(k,c).remove())}function h(c){return a.debug("contactsListsListRestService - restangularize",c),b.restangularizeElement(null,c,k)}function i(c){return a.debug("contactsListsListRestService - update"),j(b.one(k,c.uuid).customPUT(c))}var j=c.responseHandler,k="contact_lists",l={create:d,"delete":g,get:e,getList:f,restangularize:h,update:i};return l}angular.module("linshare.contactsLists").factory("contactsListsListRestService",a),a.$inject=["$log","Restangular","ServerManagerService"]}(),function(){function a(a,b,c){function d(c,d){return a.debug("contactsListsContactsRestService - create"),i(b.one(j,c).all(k).post(d))}function e(c,d){return a.debug("contactsListsContactsRestService - get ",c,d),i(b.one(j,c).getList(k,d).get())}function f(c){return a.debug("contactsListsContactsRestService - getList"),i(b.one(j,c).getList(k))}function g(c,d){return a.debug("contactsListsContactsRestService - delete"),i(b.one(j,c).one(k,d).remove())}function h(c,d){return a.debug("contactsListsContactsRestService - update"),i(b.one(j,c).one(k).customPUT(d))}var i=c.responseHandler,j="contact_lists",k="contacts",l={create:d,"delete":g,get:e,getList:f,update:h};return l}angular.module("linshare.contactsLists").factory("contactsListsContactsRestService",a),a.$inject=["$log","Restangular","ServerManagerService"]}(),angular.module("linshare.document",["restangular","ngTable","linshare.components"]),angular.module("linshare.document").factory("documentUtilsService",documentUtilsService),function(){function a(a,b,c){function d(c){return a.debug("LinshareDocumentRestService : create",c),l(b.all(m).post(c))}function e(c){return a.debug("LinshareDocumentRestService : download",c),l(b.all(m).one(c,"download").withHttpConfig({responseType:"arraybuffer"}).get())}function f(c){return a.debug("LinshareDocumentRestService : get",c),l(b.one(m,c).get({withShares:!0}))}function g(c){return a.debug("LinshareDocumentRestService : getAudit",c),l(b.one(m,c).one("audit").get())}function h(){return a.debug("LinshareDocumentRestService: getList"),l(b.all(m).getList())}function i(c){return a.debug("LinshareDocumentRestService : remove",c),l(b.one(m,c).remove())}function j(c){return a.debug("LinshareDocumentRestService : thumbnail",c),l(b.one(m,c).one("thumbnail").get({base64:!0}))}function k(c,d){a.debug("LinshareDocumentRestService : update",c,d);var e=_.cloneDeep(d);return e.thumbnail&&delete e.thumbnail,l(b.one(m,c).customPUT(e))}var l=c.responseHandler,m="documents",n={create:d,download:e,get:f,getAudit:g,getList:h,remove:i,thumbnail:j,update:k};return n}angular.module("linshare.document").factory("LinshareDocumentRestService",a),a.$inject=["$log","Restangular","ServerManagerService"]}(),function(){function a(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){function q(){d.addPart("filesList"),a.fabButton={toolbar:{activate:!0,label:"BOUTON_ADD_FILE_TITLE"},actions:[{action:"documents.upload({from: lsAppConfig.mySpacePage})",label:"ADD_FILES_DROPDOWN.UPLOAD_SHARE",icon:"ls-share-file",flowBtn:!0},{action:null,label:"ADD_FILES_DROPDOWN.UPLOAD_FILE",icon:"ls-upload-fill",flowBtn:!0},{action:null,label:"ADD_FILES_DROPDOWN.UPLOAD_IN_WORKGROUP",icon:"ls-shared-space disabled-work-in-progress",disabled:!0,hide:l.linshareModeProduction}]},c(["SWEET_ALERT.ON_MULTIPLE_DOWNLOAD.TITLE","SWEET_ALERT.ON_MULTIPLE_DOWNLOAD.TEXT","SWEET_ALERT.ON_MULTIPLE_DOWNLOAD.CONFIRM_BUTTON","GROWL_ALERT.ACTION.DELETE","TOAST_ALERT.ACTION.INFO_ERROR_FILE","TOAST_ALERT.ACTION.CLOSE","TOAST_ALERT.WARNING.ELEMENTS_NOT_DELETED","TOAST_ALERT.ACTION.CLOSE","TOAST_ALERT.WARNING.ELEMENTS_NOT_DELETED_SINGULAR","TOAST_ALERT.ACTION.CLOSE","TOAST_ALERT.WARNING.ELEMENTS_NOT_DELETED_PLURAL","TOAST_ALERT.WARNING.ERROR_404","TOAST_ALERT.WARNING.ERROR_403","TOAST_ALERT.WARNING.ERROR_400","TOAST_ALERT.WARNING.ERROR_500","GROWL_ALERT.ACTION.DELETE_SINGULAR","GROWL_ALERT.ACTION.DELETE_PLURAL"]).then(function(a){T=a["SWEET_ALERT.ON_MULTIPLE_DOWNLOAD.TITLE"],U=a["SWEET_ALERT.ON_MULTIPLE_DOWNLOAD.TEXT"],V=a["SWEET_ALERT.ON_MULTIPLE_DOWNLOAD.CONFIRM_BUTTON"],Z=a["GROWL_ALERT.ACTION.DELETE"],$=a["TOAST_ALERT.ACTION.INFO_ERROR_FILE"],aa=a["TOAST_ALERT.ACTION.CLOSE"],W=a["TOAST_ALERT.WARNING.ELEMENTS_NOT_DELETED"],X=a["TOAST_ALERT.WARNING.ELEMENTS_NOT_DELETED_SINGULAR"],Y=a["TOAST_ALERT.WARNING.ELEMENTS_NOT_DELETED_PLURAL"],ba=a["TOAST_ALERT.WARNING.ERROR_404"],ca=a["TOAST_ALERT.WARNING.ERROR_403"],da=a["TOAST_ALERT.WARNING.ERROR_400"],ea=a["TOAST_ALERT.WARNING.ERROR_500"],fa=a["GROWL_ALERT.ACTION.DELETE_SINGULAR"],ga=a["GROWL_ALERT.ACTION.DELETE_PLURAL"]}),a.$on("$stateChangeSuccess",function(){angular.element(".multi-select-mobile").appendTo("body")}),a.$on("linshare-share-done",function(){a.reloadDocuments()}),a.$watch(function(){return h.getReloadDocumentsList()},function(b){b&&(a.reloadDocuments(),h.setReloadDocumentsList(!1))},!0),C()}function r(b){b._from===a.mySpacePage&&b.asyncUploadDeferred.promise.then(function(b){a.documentsList.push(b.linshareDocument),a.isNewAddition=o.isItemAddedOnCurrentPage(b.linshareDocument.uuid),o.reloadTableParams(),g(function(){a.isNewAddition=!1},0)})}function s(){a.sidebarRightDataType===l.shareDetails&&a.loadSidebarContent(l.details)}function t(){angular.element("#file-list-table tr li").removeClass("activeActionButton")}function u(){angular.element("#drop-area").removeClass("search-toggled"),angular.element("#searchInMobileFiles").val("").trigger("change")}function v(b){var c=b.length,d=[];i.all(P(b,d)).then(function(){if(d.length>0){var b=1===d.length?X:d.length+Y,e=[];_.forEach(d,function(a){switch(a[1].status){case 404:e.push({title:a[0],message:ba});break;case 403:e.push({title:a[0],message:ca});break;case 400:e.push({title:a[0],message:da});break;default:e.push({title:a[0],message:ea})}}),m.error(b,void 0,e)}else{var f=1===c?fa:ga;m.success(f),g(function(){a.getUserQuotas()},350)}})}function w(a){h.deleteDocuments(a,v)}function x(a){b.download(a.uuid).then(function(b){h.downloadFileFromResponse(b,a.name,a.type)})}function y(b){_.forEach(b,function(b){a.downloadFile(b)})}function z(b){return a.showCurrentFile(b)}function A(c){b.get(c).then(function(b){a.currentSelectedDocument.current.shares=b.shares})}function B(c){b.thumbnail(c).then(function(b){a.currentSelectedDocument.current.thumbnail=b})}function C(){var b=n.fileUuid||n.uploadedFileUuid;o.initTableParams(a.documentsList,a.paramFilter,b).then(function(b){a.tableParamsService=o,a.tableParams=o.getTableParams(),a.lengthOfSelectedDocuments=o.lengthOfSelectedDocuments,a.resetSelectedDocuments=o.resetSelectedItems,a.selectedDocuments=o.getSelectedItemsList(),a.selectDocumentsOnCurrentPage=o.tableSelectAll,a.addSelectedDocument=o.toggleItemSelection,a.sortDropdownSetActive=o.tableSort,a.toggleFilterBySelectedFiles=o.isolateSelection,a.flagsOnSelectedPages=o.getFlagsOnSelectedPages(),a.toggleSelectedSort=o.getToggleSelectedSort(),a.reloadDocuments=K,n.fileUuid&&(_.isNil(b.itemToSelect)?c("GROWL_ALERT.ERROR.FILE_NOT_FOUND").then(function(a){m.error(a)}):c("TOAST_ALERT.WARNING.ISOLATED_FILE").then(function(c){m.isolate(c),a.addSelectedDocument(b.itemToSelect),a.toggleFilterBySelectedFiles(),a.showCurrentFile(b.itemToSelect)}))})}function D(b){a.mainVm.sidebar.setData(a),a.mainVm.sidebar.setContent(b||l.share),a.mainVm.sidebar.show()}function E(){return"fr-FR"===c.use()?"d MMMM y":"MMMM d y"}function F(){return"fr-FR"===c.use()?"Le d MMMM y   h:mm a":"The MMMM d  y at h:mma"}function G(){a.data.selectedIndex=Math.min(a.data.selectedIndex+1,2)}function H(b){if(a.loadSidebarContent(),g(function(){angular.element("#focusInputShare").trigger("focus")},350),b){var c=a.selectedDocuments.indexOf(b);c===-1?(b.isSelected=!0,a.selectedDocuments.push(b)):e.debug("addItem - item is already in the list")}}function I(){angular.element("#drop-area").addClass("search-toggled"),angular.element("#top-search-wrap input").focus()}function J(){a.data.selectedIndex=Math.max(a.data.selectedIndex-1,0)}function K(){b.getList().then(function(b){a.documentsList=b,a.isNewAddition=!0,o.reloadTableParams(a.documentsList),g(function(){a.isNewAddition=!1},0)},500)}function L(a){var b=a.currentTarget,c=angular.element(b).text();""===c?angular.element(b).parent().find("span").css("display","block"):angular.element(b).parent().find("span").css("display","none")}function M(c,d,e){var f=i.defer();return a.currentSelectedDocument.current=c,i.all([b.get(c.uuid),b.getAudit(c.uuid)]).then(function(f){a.currentSelectedDocument.current=f[0],c.hasThumbnail&&b.thumbnail(c.uuid).then(function(b){a.currentSelectedDocument.current.thumbnail=b}),p.generateAllDetails(a.userLogged.uuid,f[1].plain()).then(function(b){if(a.currentSelectedDocument.current.auditActions=b,e&&(a.data.selectedIndex=0,a.loadSidebarContent(l.details),!_.isUndefined(d))){var c=d.currentTarget;angular.element("#file-list-table tr li").removeClass("activeActionButton").promise().done(function(){angular.element(c).addClass("activeActionButton")})}})}),f.resolve(a.currentSelectedDocument.current),f.promise}function N(a){var b=a.currentTarget;angular.element(b).parent().addClass("show-full-comment")}function O(a){var b=a.currentTarget;angular.element(b).parent().removeClass("show-full-comment")}function P(b,c){if(b)return _.map(b,function(b){return b.remove().then(function(){return _.remove(a.documentsList,b),_.remove(a.selectedDocuments,b),o.reloadTableParams(),o.resetFlagsOnSelectedPages(a.flagsOnSelectedPages),c})["catch"](function(a){return c.push([b.name,a]),c})})}function Q(){a.searchMobileDropdown?a.closeSearch():a.openSearch(),a.searchMobileDropdown=!a.searchMobileDropdown}function R(d){var e=_.cloneDeep(d);c(["SAVING"]).then(function(c){var d=c.SAVING;a.currentSelectedDocument.current.description=d,b.update(e.uuid,e).then(function(){a.currentSelectedDocument.current.description=e.description})})}function S(){swal({title:T,text:U,type:"error",confirmButtonColor:"#05b1ff",confirmButtonText:V,closeOnConfirm:!0})}var T,U,V,W,X,Y,Z,$,aa,ba,ca,da,ea,fa,ga;a.addUploadedDocument=r,a.backToSidebarContentDetails=s,a.closeDetailSidebar=t,a.closeSearch=u,a.currentDocument={},a.currentPage="my_files",a.currentSelectedDocument={current:""},a.data={selectedIndex:0,bottom:!1},a.deleteDocuments=w,a.documentsList=f,a.downloadFile=x,a.downloadSelectedFiles=y,a.flagsOnSelectedPages={},a.flowUploadService=j,a.getDetails=z,a.getDocumentInfo=A,a.getDocumentThumbnail=B,a.itemUtilsService=k,a.loadSidebarContent=D,a.lsAppConfig=l,a.lsFormat=E,a.lsFullDateFormat=F,a.mySpacePage=l.mySpacePage,a.nextTab=G,a.onShare=H,a.openSearch=I,a.paramFilter={name:""},a.previousTab=J,a.recipientShareDetails={current:""},a.showCurrentFile=M,a.setTextInput=L,a.slideTextarea=N,a.slideUpTextarea=O,a.toggleSearchState=Q,a.unavailableMultiDownload=S,a.updateDocument=R,q()}a.$inject=["$scope","LinshareDocumentRestService","$translate","$translatePartialLoader","$log","documentsList","$timeout","documentUtilsService","$q","flowUploadService","itemUtilsService","lsAppConfig","toastService","$stateParams","tableParamsService","auditDetailsService"],angular.module("linshare.document").controller("documentController",a)}(),function(){function a(a,b,c){function d(b){a.mainVm.sidebar.setData(a),a.mainVm.sidebar.setContent(b||c.share),a.mainVm.sidebar.show()}function e(){a.loadSidebarContent(),angular.element("#focusInputShare").focus()}a.loadSidebarContent=d,a.multipleSelection=!0,a.onShare=e,a.selectedDocuments=[],b.addPart("filesList")}angular.module("linshare.document").controller("documentsController",a),a.$inject=["$scope","$translatePartialLoader","lsAppConfig"]}(),function(){function a(a,b,c){function d(){i&&e(),angular.element(window).resize(function(){e()}),angular.forEach(j,function(b){a.selectedDocuments.push(b)}),a.loadSidebarContent(c.share)}function e(){a.mainVm.sidebar.hide(),angular.element("#collapsible-content").removeClass("set-width")}function f(){return a.selectedDocuments.length+Object.keys(a.selectedUploads).length}function g(b){a.mainVm.sidebar.setData(a),void 0!==b&&a.mainVm.sidebar.setContent(b),a.mainVm.sidebar.show()}function h(b){var c=a.selectedDocuments.indexOf(b);c>-1&&(b.isSelected=!1,a.selectedDocuments.splice(c,1))}var i=angular.element("html").hasClass("ismobile"),j=b.selected;a.currentPage="",a.lengthOfSelectedDocuments=f,a.loadSidebarContent=g,a.removeSelectedDocuments=h,a.selectedFlowIdentifiers=b.selected,d()}angular.module("linshare.document").controller("selectedDocumentsController",a),a.$inject=["lsAppConfig"]}(),function(){function a(){return{link:function(a,b,c){b.bind("click",function(a){var d=b.parent().parent().parent().parent().hasClass("highlight-list-elem");c.eventPropagationStop&&!d||a.stopPropagation()})}}}angular.module("linshare.document").directive("eventPropagationStop",a)}(),function(){function a(){return{restrict:"E",templateUrl:"modules/linshare.document/directives/lsDocumentsTable/lsDocumentsTable.html"}}angular.module("linshare.document").directive("lsDocumentsTable",a)}(),function(){function a(){return{restrict:"E",templateUrl:"modules/linshare.document/directives/lsDocumentsTable/lsDocumentsMenu.html"}}angular.module("linshare.document").directive("lsDocumentsMenu",a)}(),function(){function a(){function a(a){a.toggleDocumentSelection=function(){if(a.currentSelectedDocument.current=a.documentFile,a.documentFile.isSelected=!a.documentFile.isSelected,a.documentFile.isSelected)a.mainVm.sidebar.isVisible()&&(a.documentFile.shared>0&&a.getDocumentInfo(a.documentFile.uuid),a.documentFile.hasThumbnail===!0&&a.getDocumentThumbnail(a.documentFile.uuid)),a.$apply(function(){a.selectedDocuments.push(a.documentFile)});else{var b=a.selectedDocuments.indexOf(a.documentFile);b>-1&&a.$apply(function(){a.selectedDocuments.splice(b,1)})}}}return a.$inject=["$scope"],{restrict:"A",scope:!0,link:function(a,b){b.bind("contextmenu",function(){var c=b.hasClass("highlight-list-elem");c||a.toggleDocumentSelection()}),b.bind("click",function(){a.mainVm.sidebar.isVisible()&&(b.siblings().find("li.activeActionButton").removeClass("activeActionButton"),b.find("li")[0].className="activeActionButton"),a.toggleDocumentSelection()})},controller:a}}angular.module("linshare.document").directive("lsOnDocumentSelect",a)}(),function(){function a(a){function b(a){a.toggleDocumentSelection=function(){a.currentSelectedDocument.current=a.item;a.rightSidebarOpen&&a.detailsFunction?a.detailsFunction(a.item).then(function(b){a.currentSelectedDocument.current=b}):a.rightSidebarOpen&&a.localDetails&&(a.currentSelectedDocument.current=a.localDetails),a.$apply()}}return b.$inject=["$scope"],{restrict:"A",scope:{selectedDocuments:"=",currentSelectedDocument:"=",item:"=documentFile",detailsFunction:"=",localDetails:"=",rightSidebarOpen:"="},link:function(b,c){c.bind("contextmenu",function(){var a=c.hasClass("highlight-list-elem");a||b.toggleDocumentSelection()}),c.bind("click",function(){a.debug("directive itemselection : click event"),b.rightSidebarOpen&&(c.siblings().find("li.activeActionButton").removeClass("activeActionButton"),c.find("li")[0].className="activeActionButton"),b.toggleDocumentSelection()})},controller:b}}a.$inject=["$log"],angular.module("linshare.document").directive("lsItemSelection",a)}(),function(){angular.module("linshare.upload",["flow","restangular","ngTable","linshare.components"])}(),function(){function a(a,b,c,d,e,f,g,h,i,j,k,l){function m(){if(N.fabButton={actions:[{action:null,icon:"zmdi zmdi-plus",flowBtn:!0,hide:!N.isFromMySpace}]},g.addPart("upload"),f.refresh().then(function(){f(["UPLOAD_SHARE_ALERT.CANCEL","UPLOAD_SHARE_ALERT.CONTINUE_AND_EXCLUDE","UPLOAD_SHARE_ALERT.MAIN_DIALOG_BUTTON_TITLE","UPLOAD_SHARE_ALERT.MESSAGE","UPLOAD_SHARE_ALERT.MESSAGE_PLURAL","UPLOAD_SHARE_ALERT.MESSAGE_SINGULAR","UPLOAD_SHARE_ALERT.TITLE_PLURAL","UPLOAD_SHARE_ALERT.TITLE_SINGULAR"]).then(function(a){N.warningCancel=a["UPLOAD_SHARE_ALERT.CANCEL"],N.warningContinueMainButton=a["UPLOAD_SHARE_ALERT.MAIN_DIALOG_BUTTON_TITLE"],N.warningMessage=a["UPLOAD_SHARE_ALERT.MESSAGE"],N.warningMessagePlural=a["UPLOAD_SHARE_ALERT.MESSAGE_PLURAL"],N.warningMessageSingular=a["UPLOAD_SHARE_ALERT.MESSAGE_SINGULAR"],N.warningTitlePlural=a["UPLOAD_SHARE_ALERT.TITLE_PLURAL"],N.warningTitleSingular=a["UPLOAD_SHARE_ALERT.TITLE_SINGULAR"]})}),_.forEach(N.$flow.files,function(a){a.isSelected=!1,a.hideOnIsolate=!1}),O){var c=N.$flow.getFromUniqueIdentifier(O);c._from===N.fromWhere&&(N.selectUploadingFile(c,!0),e(function(){window.scrollTo(0,angular.element('div.media-body[data-uid-flow="'+O+'"]').first().offset().top)},250))}b.$on("flow::fileAdded",function(a,c,d){d._from=b.mySpacePage,N.selectUploadingFile(d,!0)}),b.$on("flow::fileError",function(){N.isflowUploadingError=!0}),N.location={mySpace:!1,workgroup:!1},a.all([h.getCurrentUser(),j.getAll()]).then(function(a){var b=a[0],c=a[1];N.location.mySpace=b.canUpload,N.location.workgroup=c.WORK_GROUP.enable})}function n(a,b,c){var d,e;1===a?(e=N.warningTitleSingular,d=N.warningMessageSingular):(e=_.clone(N.warningTitlePlural).replace("${nbErrorFilesSelected}",a),d=N.warningMessagePlural),swal({html:!0,title:e,text:d,type:"warning",showCancelButton:!0,confirmButtonColor:"#3fa9ff",confirmButtonText:N.warningContinueMainButton,cancelButtonText:N.warningCancel,closeOnConfirm:!0,closeOnCancel:!0},function(a){a&&t(b,c)})}function o(){_.forInRight(N.$flow.files,function(a){a._from!==N.fromWhere||a.isComplete()&&!a.error||N.removeSelectedDocuments(a)})}function p(){_.forInRight(N.$flow.files,function(a){!a.isSelected||a.isComplete()&&!a.error||N.removeSelectedDocuments(a)})}function q(a,b){if(N.nbErrorFilesSelected=0,_.forEach(N.$flow.files,function(a){a.isSelected&&a.error&&N.nbErrorFilesSelected++}),N.nbErrorFilesSelected===u()){var c=u()>1?"NO_SHAREABLE_FILE_SELECTED_PLURAL":"NO_SHAREABLE_FILE_SELECTED_SINGULAR";
f("UPLOAD_SHARE_ALERT."+c).then(function(a){l.error(a)})}else N.nbErrorFilesSelected>0?n(N.nbErrorFilesSelected,a,b):t(a,b)}function r(){_.forInRight(N.$flow.files,function(a){a._from===N.fromWhere&&a.isComplete()&&!a.error&&N.removeSelectedDocuments(a)})}function s(){_.forInRight(N.$flow.files,function(a){a.isSelected&&a.isComplete()&&!a.error&&N.removeSelectedDocuments(a)})}function t(a,c){A().then(function(){a?a(c,N.selectedDocuments,N.selectedUploads):(b.onShare(),N.loadSidebarContent(N.lsAppConfig.share))})}function u(){return Object.keys(b.selectedUploads).length}function v(a){b.mainVm.sidebar.setData(N),b.mainVm.sidebar.setContent(a),b.mainVm.sidebar.show()}function w(){_.forInRight(N.$flow.files,function(a){a._from!==N.fromWhere||a.paused||N.pauseFile(a)}),N.$flow.isPaused=!0}function x(a){a.pause(),a.quotaChecked=!1}function y(){_.forEach(N.$flow.files,function(a){a.isSelected&&!a.paused&&N.pauseFile(a)})}function z(a){delete b.selectedUploads[a.uniqueIdentifier],a.cancel()}function A(){var c=a.defer();return N.nbErrorFilesSelected>0&&_.forEach(N.$flow.files,function(a){a.isSelected&&a.error&&(a.isSelected=!1,delete b.selectedUploads[a.uniqueIdentifier])}),c.resolve(),c.promise}function B(){_.forEach(b.selectedUploads,function(a,c){var d=N.$flow.getFromUniqueIdentifier(c);d.isSelected=!1,delete b.selectedUploads[c]}),N.selectAll=!0}function C(){_.forInRight(N.$flow.files,function(a){a._from===N.fromWhere&&a.paused&&a.resume()}),N.$flow.isPaused=!1}function D(a){a.resume(),N.flowUploadService.checkQuotas([a],!1,b.setUserQuotas)}function E(){_.forEach(N.$flow.files,function(a){a.isSelected&&a.paused&&a.resume()})}function F(){_.forInRight(N.$flow.files,function(a){a._from===N.fromWhere&&a.error&&N.retryFile(a)}),N.isflowUploadingError=!1}function G(a){a.canBeRetried&&(a.errorAgain=!1,N.flowUploadService.checkQuotas([a],!0,b.setUserQuotas))}function H(){_.forEach(N.$flow.files,function(a){a.isSelected&&a.error&&N.retryFile(a)}),N.isflowUploadingError=!1}function I(a,b){var c=a||N.$flow.files,d=!!b||N.selectAll;_.forEach(c,function(a){a._from===N.fromWhere&&N.selectUploadingFile(a,d)}),b||(N.selectAll=!N.selectAll)}function J(a,c){a.isSelected=c,a.isSelected?b.selectedUploads[a.uniqueIdentifier]={name:a.name,size:a.size,type:a.getType(),uniqueIdentifier:a.uniqueIdentifier}:delete b.selectedUploads[a.uniqueIdentifier]}function K(a){var b=a.currentTarget;angular.element(b).hasClass("activeShowMore")?(angular.element(b).parent().prev().find("div").first().removeClass("data-list-slide-toggle"),angular.element(b).removeClass("activeShowMore")):angular.element(b).addClass("activeShowMore").parent().prev().find("div").first().addClass("data-list-slide-toggle")}function L(a){_.isUndefined(a.folderDetails)?c.go("documents.files",{uploadedFileUuid:a.linshareDocument.uuid}):(a.folderDetails.uploadedFileUuid=a.linshareDocument.uuid,_.isNil(a.folderDetails.folderUuid)?c.go("sharedspace.workgroups.root",a.folderDetails):c.go("sharedspace.workgroups.folder",a.folderDetails))}function M(){_.forEach(N.$flow.files,function(a){a.hideOnIsolate?a.hideOnIsolate=!1:a.isSelected||(a.hideOnIsolate=!0)})}var N=this,O=d.idUpload;b.lengthOfSelectedDocuments=u,b.resetSelectedDocuments=B,b.selectedUploads={},N.lengthOfSelectedDocuments=b.lengthOfSelectedDocuments,N.resetSelectedDocuments=b.resetSelectedDocuments,N.selectedDocuments=b.selectedDocuments,N.selectedUploads=b.selectedUploads,N.$flow=b.$flow,N.cancelAllFiles=o,N.cancelSelectedFiles=p,N.checkSharableFiles=q,N.clearAllFiles=r,N.clearSelectedFiles=s,N.currentPage="upload",N.currentSelectedDocument={},N.flowUploadService=i,N.fromWhere=d.from,N.identifiers=[],N.isflowUploadingError=!1,N.isFromMySpace=N.fromWhere===b.mySpacePage,N.loadSidebarContent=v,N.lsAppConfig=k,N.pauseAllFiles=w,N.pauseFile=x,N.pauseSelectedFiles=y,N.removeSelectedDocuments=z,N.retryAllFiles=F,N.retrySelectedFiles=H,N.resumeAllFiles=C,N.resumeFile=D,N.resumeSelectedFiles=E,N.retryFile=G,N.selectAll=!0,N.selectUploadingDocuments=I,N.selectUploadingFile=J,N.showBtnList=K,N.showFileInSource=L,N.toggleFilterBySelectedFiles=M,m()}angular.module("linshare.upload").controller("uploadQueueController",a),a.$inject=["$q","$scope","$state","$stateParams","$timeout","$translate","$translatePartialLoader","authenticationRestService","flowUploadService","functionalityRestService","lsAppConfig","toastService"]}(),function(){function a(a,b,c,d,e,f,g,h,i,j){function k(a,d){a.asyncUploadDeferred=c.defer();var e=d.length>0?angular.fromJson(d):void 0,f=_.isUndefined(e);if(f||!e.chunkUploadSuccess){var g=null,h=u,i=A;f||(g=e.errorMessage,h=e.errorCode,i=B+h),b.error("Error occurred while uploading file : "+a.name+" - "+g),p(a,h,i,!1)["catch"](function(b){a.asyncUploadDeferred.reject(b)})}else a.asyncTaskUuid=e.asyncTaskUuid,s(a).then(function(b){a.asyncUploadDeferred.resolve(b)})["catch"](function(b){a.asyncUploadDeferred.reject(b)});return a.asyncUploadDeferred.promise}function l(a){return i.getAsyncUploadDetails(a.asyncTaskUuid).then(function(b){if(a.asyncUploadDetails=b.plain(),a.asyncUploadDetails.status!==x&&a.asyncUploadDetails.status!==w)return s(a);if(delete a.doingAsyncUpload,a.asyncUploadDetails.status===x)r(a).then(function(b){a.asyncUploadDeferred.resolve(b)});else{var c=!1,d=u,e=A;a.asyncUploadDetails&&(d=a.asyncUploadDetails.errorCode,46010===d?(e=n(y,"${maxFileSize}",a.quotas.maxFileSize),c=!0):46014===d?(e=n(z,"${quotaAttempt}",a.quotas.quota),c=!0):e=B+d),p(a,d,e,c).then(function(b){a.asyncUploadDeferred.reject(b)})}}),a.asyncUploadDeferred.promise}function m(d,e,g){y=a("translate")(B+46010),z=a("translate")(B+46014),f.getCurrentUser().then(function(a){i.getQuota(a.quotaUuid).then(function(a){b.debug("Getting quotas - ",a.plain()),g(a.plain()),_.forEach(d,function(b){b.quotas=a.plain(),b.asyncUploadDeferred=c.defer();var d=u,f=null,g=!1;a.maintenance&&e?f=B+u:b.size>a.maxFileSize?(d=46010,f=n(y,"${maxFileSize}",a.maxFileSize),g=!0):a.quota-a.usedSpace<=b.size&&(d=46014,f=n(z,"${quotaAttempt}",a.quota),g=!0),f?p(b,d,f,g):b.error&&b.canBeRetried&&q(b),b.quotaChecked=!0,a.usedSpace+=b.size})},function(a){b.debug("Getting quotas error - ",a)})})}function n(b,c,d){return _.clone(b).replace(c,a("readableSize")(d,!0))}function o(){e.addPart("serverResponse"),A=B+u}function p(a,b,c,e){return a.pause(),a.errorCode=b!==u?b:null,a.errorMessage=c,a.hasCustomMessage=e,a.canBeRetried=_.includes(v,b),a.error=!0,d(function(){a.errorAgain=!0},200),a.asyncUploadDeferred.reject(a),a.asyncUploadDeferred.promise}function q(a){return a.retry(),a.resume(),delete a.errorCode,delete a.errorMessage,delete a.hasCustomMessage,delete a.canBeRetried,delete a.doingAsyncUpload,a.error=!1,a.errorAgain=!1,b.debug("Error during upload, need to retry file : ",a.name),a.asyncUploadDeferred.reject(a),a.asyncUploadDeferred.promise}function r(a){var b=a._from===h.mySpacePage?g.get(a.asyncUploadDetails.resourceUuid):j.get(a.folderDetails.workgroupUuid,a.asyncUploadDetails.resourceUuid);return b.then(function(b){a.linshareDocument=b,a.asyncUploadDeferred.resolve(a)}),a.asyncUploadDeferred.promise}function s(a){var c=h.asyncUploadDelay;return _.isUndefined(a.asyncUploadDetails)||(c=a.asyncUploadDetails.frequency?a.asyncUploadDetails.frequency:c),d(function(){b.debug("Asking server async",a),l(a).then(function(b){a.asyncUploadDeferred.resolve(b)})["catch"](function(b){a.asyncUploadDeferred.reject(b)})},c),a.asyncUploadDeferred.promise}function t(a,b,c){_.forEach(a,function(a){a._from=b,b===h.workgroupPage&&(a.folderDetails=c)})}const u="NONE",v=[u,39001,40403,40404,46011,46012,46013,46014],w="FAILED",x="SUCCESS";var y,z,A,B="SERVER_RESPONSE.DETAILS.UPLOAD_ERROR.",C={addUploadedFile:k,checkAsyncUploadDetails:l,checkQuotas:m,initFlowUploadService:o,uploadFiles:t};return C}angular.module("linshare.upload").factory("flowUploadService",a),a.$inject=["$filter","$log","$q","$timeout","$translatePartialLoader","authenticationRestService","LinshareDocumentRestService","lsAppConfig","uploadRestService","workgroupNodesRestService"]}(),function(){function a(a,b,c){function d(c){return a.debug("uploadRestService - getAsyncUploadDetails",c,f),g(b.one(h.flow,c).get(),f)}function e(c){return a.debug("uploadRestService - getQuota",c,f),g(b.one(h.quota,c).get(),f)}var f="UPLOAD_ERROR",g=c.responseHandler,h={flow:"flow",quota:"quota"},i={getAsyncUploadDetails:d,getQuota:e};return i}angular.module("linshare.upload").factory("uploadRestService",a),a.$inject=["$log","Restangular","ServerManagerService"]}(),function(){function a(){return{restrict:"E",templateUrl:"modules/linshare.upload/directives/lsUploadQueue/lsUploadQueue.html",scope:!0,link:b}}function b(a,b,c){a.fromWhere=c.fromWhere}angular.module("linshare.upload").directive("lsUploadQueue",a)}(),angular.module("linshare.share",["restangular","ui.bootstrap","linshare.components"]).controller("DemoCtrl",function(){this.isOpen=!1,this.selectedMode="md-scale",this.selectedDirection="left"}).directive("uploadBoxSelection",function(){return{restrict:"A",scope:!1,link:function(a,b){function c(){0===a.numSelectedItems.length&&angular.element("#selection-actions").addClass("show-multi-menu")}b.bind("click",function(){var d=angular.element(".media-body").length,e=b.hasClass("highlight-list-elem");b.toggleClass("highlight-list-elem","removeListElem"),c(),a.isAllSelected.status===!0&&a.$apply(function(){a.isAllSelected.status=!1,a.isAllSelected.origin="directive"}),e?a.$apply(function(){a.numSelectedItems.pop(1)}):a.$apply(function(){a.numSelectedItems.push(1);var c=a.numSelectedItems.length;c===d&&(b.addClass("highlight-list-elem"),a.isAllSelected.status=!0)}),0===d&&angular.element(".drag-and-drop-ctn").removeClass("out-of-focus")}),angular.element(".exit-selection").bind("click",function(){a.closeContextualToolBar()}),a.closeContextualToolBar=function(){a.$apply(function(){a.numSelectedItems.pop(a.numSelectedItems.length)}),angular.element("#selection-actions").removeClass("show-multi-menu"),angular.element(".media-body").removeClass("highlight-list-elem")}}}}),function(){function a(a,b,c){function d(c){return a.debug("LinshareShareRestService : create",c),j(b.all(k).post(c))}function e(c){return a.debug("LinshareShareRestService : download",c),j(b.all(k).one(c,"download").withHttpConfig({responseType:"arraybuffer"}).get())}function f(c){return a.debug("LinshareShareRestService : get",c),j(b.one(k,c).get())}function g(){return a.debug("LinshareShareRestService : getList"),j(b.all(k).getList())}function h(c){return a.debug("LinshareShareRestService : delete",c),b.one(k,c).remove()}function i(c){return a.debug("LinshareShareRestService : thumbnail",c),j(b.one(k,c).one("thumbnail").get())}var j=c.responseHandler,k="shares",l={create:d,download:e,get:f,getList:g,remove:h,thumbnail:i};return l}angular.module("linshare.share").factory("LinshareShareService",a),a.$inject=["$log","Restangular","ServerManagerService"]}(),angular.module("linshare.share").factory("ShareObjectService",["$log","functionalityRestService","LinshareShareService","$q","toastService","$translate","authenticationRestService","lsAppConfig",function(a,b,c,d,e,f,g,h){function i(){return d.all([b.getAll(),g.getCurrentUser()]).then(function(a){var b=a[0];angular.extend(q,b.UNDOWNLOADED_SHARED_DOCUMENTS_ALERT__DURATION),q.value=moment().add(q.value,"days").valueOf(),angular.extend(p,b.UNDOWNLOADED_SHARED_DOCUMENTS_ALERT),angular.extend(o,b.SHARE_CREATION_ACKNOWLEDGEMENT_FOR_OWNER),angular.extend(n,b.SHARE_EXPIRATION),n.value=moment().endOf("day").add(n.value,n.unit).subtract(1,"days").valueOf(),angular.extend(r,b.ANONYMOUS_URL),a[1].accountType===h.accountType.guest&&a[1].restricted&&(r.enable=!1)})}function j(a){var b=this;i().then(function(){a=a||{},b.documents=a.documents||[],b.recipients=a.recipients||[],k=b.recipients,b.mailingListUuid=a.mailingListUuid||[],b.mailingList=a.mailingList||[],b.secured=a.secured||r,b.creationAcknowledgement=a.creationAcknowledgement||o,b.expirationDate=a.expirationDate||n,b.enableUSDA=a.enableUSDA||p,b.notificationDateForUSDA=a.notificationDateForUSDA||q,b.sharingNote=a.sharingNote||"",b.subject=a.subject||"",b.message=a.message||"",b.asyncShare=a.asyncShare||!1,b.setAsyncShare=function(a){b.asyncShare=a},b.waitingUploadIdentifiers=a.waitingUploadIdentifiers||[],b.uploadingDocuments=[],b.getMinDate=function(){return moment().endOf("day").valueOf()}})}var k=[],l=[],m=[],n={},o={},p={},q={},r={};return j.prototype.addRecipient=function(){var b=this.selectedUser,c=!1;switch(b.type){case"simple":angular.forEach(k,function(d){d.mail===b.identifier&&(c=!0,a.info("The user "+b.identifier+" is already in the recipients list"))}),c||(b.mail=b.identifier,k.push(_.omit(b,"restrictedContacts","type","display","identifier")));break;case"user":angular.forEach(k,function(d){d.mail===b.mail&&d.domain===b.domain&&(c=!0,a.info("The user "+b.mail+" is already in the recipients list"))}),c||k.push(_.omit(b,"restrictedContacts","type","display","identifier"));break;case"mailinglist":_.forEach(l,function(d){d.identifier===b.identifier&&(c=!0,a.info("The list "+b.listName+" is already in the mailinglist"))}),c||(l.push(b.identifier),m.push(_.omit(b,"display","identifier")))}},j.prototype.removeRecipient=function(a){k.splice(a,1)},j.prototype.getRecipients=function(){return k},j.prototype.getMailingListUuid=function(){return l},j.prototype.getMailingList=function(){return m},j.prototype.removeMailingList=function(a){l.splice(a,1),m.splice(a,1)},j.prototype.addDocuments=function(a){angular.isArray(a)||(a=[a]),angular.forEach(a,function(a){this.documents.push(a)},this)},j.prototype.getDocuments=function(){return this.documents},j.prototype.addwaitingUploadIdentifiers=function(a){this.waitingUploadIdentifiers.push(a)},j.prototype.getFormObj=function(){var a=[];return angular.forEach(this.documents,function(b){a.push(b.uuid)}),{recipients:k,documents:a,mailingListUuid:l,secured:r.value,creationAcknowledgement:o.value,expirationDate:n.value,enableUSDA:p.value,notificationDateForUSDA:q.value,sharingNote:this.sharingNote,subject:this.subject,message:this.message}},j.prototype.getObjectCopy=function(){return{recipients:k,documents:this.documents,mailingListUuid:l,secured:r.value,creationAcknowledgement:o.value,expirationDate:n.value,enableUSDA:p.value,notificationDateForUSDA:q.value,sharingNote:this.sharingNote,subject:this.subject,message:this.message,waitingUploadIdentifiers:this.waitingUploadIdentifiers}},j.prototype.share=function(){var b=d.defer();if(0===this.waitingUploadIdentifiers.length){if(this.documents.indexOf(void 0)===-1)return c.create(this.getFormObj()).then(function(){f("GROWL_ALERT.ACTION.SHARE").then(function(a){e.success(a)})});a.debug("SHARE FAILED -","file(s) upload error"),f("GROWL_ALERT.ACTION.SHARE_FAILED").then(function(a){e.error(a)}),b.reject({statusText:"file(s) upload error"})}else b.reject({statusText:"asyncMode"});return b.promise},j.prototype.addLinshareDocumentsAndShare=function(a,b){var c=this.waitingUploadIdentifiers.indexOf(a),d=this.documents;c>-1&&(_.forEach(d,function(c,e){_.isUndefined(c)||c.uniqueIdentifier===a&&(d[e]=b)},this),this.waitingUploadIdentifiers.splice(c,1)),this.share()},j.prototype.resetForm=function(){k=[],this.recipients=[],l=[],m=[],this.mailingList=[],l=[],this.mailingListUuid=[],this.documents=[],this.secured=r,this.creationAcknowledgement=o,this.expirationDate=n,this.enableUSDA=p,this.notificationDateForUSDA=q,this.sharingNote="",this.subject="",this.message="",this.asyncShare=!1,this.setAsyncShare=function(a){this.asyncShare=a},this.waitingUploadIdentifiers=[]},j.prototype.getUploadingDocuments=function(){return this.uploadingDocuments},j.prototype.addUploadingDocuments=function(){},j.prototype.isValid=function(){return this.documents.length>0&&(k.length||l.length>0)},j.prototype.isShared=function(){return 0===this.waitingUploadIdentifiers.length},j}]),function(){function a(a){function b(b,c,d){if(c.length>0){var e=b.uniqueIdentifier,f=d[e]||{shareArrayIndex:[]};f.shareArrayIndex.length>0&&(_.forEach(f.shareArrayIndex,function(d){if(!_.isUndefined(c[d])){var f={};angular.extend(f,c[d]);var g=new a(f);g.addLinshareDocumentsAndShare(e,b.linshareDocument),c[d]=angular.copy(g.getObjectCopy())}}),delete d[e])}}return{sharableDocuments:b}}angular.module("linshare.share").factory("sharableDocumentService",a),a.$inject=["ShareObjectService"]}(),angular.module("linshare.share").controller("LinshareShareActionController",["$scope","LinshareShareService","$log","$stateParams","$translate","ShareObjectService","toastService","documentUtilsService",function(a,b,c,d,e,f,g,h){function i(){k.newShare.resetForm(),a.mainVm.sidebar.hide()}function j(b,d,f){if(0===d.length&&(void 0===f||0===Object.keys(f).length))return void e("GROWL_ALERT.WARNING.AT_LEAST_ONE_DOCUMENT").then(function(a){g.error(a)});if(0===b.getRecipients().length&&0===b.getMailingListUuid().length)return void e("GROWL_ALERT.WARNING.AT_LEAST_ONE_RECIPIENT").then(function(a){g.error(a)});f=f||{};var i=f;for(var j in i)if(i.hasOwnProperty(j)){var l=a.$flow.getFromUniqueIdentifier(j);l.isSelected=!1,l.isComplete()?(k.newShare.addDocuments(l.linshareDocument),delete i[j]):(_.isUndefined(a.refFlowShares[j])&&(a.refFlowShares[j]={shareArrayIndex:[]}),a.refFlowShares[j].shareArrayIndex.push([a.share_array.length]),k.newShare.addwaitingUploadIdentifiers(j))}k.newShare.addDocuments(d),k.newShare.share().then(function(){a.$emit("linshare-share-done"),h.setReloadDocumentsList(!0),a.mainVm.sidebar.hide(),a.share_array.push(angular.copy(k.newShare.getObjectCopy())),k.newShare.resetForm(),a.mainVm.sidebar.getData().resetSelectedDocuments();for(var b in i)i.hasOwnProperty(b)&&delete a.selectedUploads[b]},function(b){if(b.statusText){c.debug("SHARE ASYNC -",b),e("GROWL_ALERT.ACTION.SHARE_ASYNC").then(function(a){g.info(a)}),a.mainVm.sidebar.hide();var d=_.cloneDeep(k.newShare.getObjectCopy());for(var f in i)i.hasOwnProperty(f)&&(d.documents.push(i[f]),delete a.mainVm.sidebar.getData().selectedUploads[f]);a.share_array.push(d),k.newShare.resetForm()}else e("GROWL_ALERT.ACTION.SHARE_FAILED").then(function(a){g.error(a)})})}var k=this;k.closeSideBar=i,k.uploadPage="upload",k.filesToShare=d.selected,k.newShare=new f,k.selectedContact={},k.submitShare=j}]),function(){function a(a,b,c,d,e,f,g){function h(){_.isUndefined(q.currentShare)?b.transitionTo("home"):(d.addPart("filesList"),q.selectedDocuments=q.currentShare.documents,q.loadSidebarContent(q.activeShareDetails),c(["SWEET_ALERT.ON_SHARE_DELETE.TITLE","SWEET_ALERT.ON_SHARE_DELETE.TEXT","SWEET_ALERT.ON_SHARE_DELETE.CONFIRM_BUTTON","SWEET_ALERT.ON_SHARE_DELETE.CANCEL_BUTTON"]).then(function(a){m=a["SWEET_ALERT.ON_SHARE_DELETE.TITLE"],n=a["SWEET_ALERT.ON_SHARE_DELETE.TEXT"],o=a["SWEET_ALERT.ON_SHARE_DELETE.CONFIRM_BUTTON"],p=a["SWEET_ALERT.ON_SHARE_DELETE.CANCEL_BUTTON"]}))}function i(b){q.confirmCancel(b,function(b){_.remove(a.share_array,b),q.goToPreviousState()})}function j(a,b){swal({title:m,text:n,type:"warning",showCancelButton:!0,confirmButtonColor:"#DD6B55",confirmButtonText:o,cancelButtonText:p,closeOnConfirm:!0,closeOnCancel:!0},function(c){c&&b(a)})}function k(){b.go(f.Name,f.Params),a.mainVm.sidebar.hide()}function l(b){a.mainVm.sidebar.setData(a),a.mainVm.sidebar.setContent(b||q.activeShareDetails),a.mainVm.sidebar.show()}var m,n,o,p,q=this;q.activeShareDetails=e.activeShareDetails,q.cancelShare=i,q.confirmCancel=j,q.currentShare=a.share_array[g],q.goToPreviousState=k,q.loadSidebarContent=l,q.shareIndex=Number(g)+1,q.waitingShareDetails=e.waitingShareDetails,h()}angular.module("linshare.share").controller("LinshareShareListController",a),a.$inject=["$scope","$state","$translate","$translatePartialLoader","lsAppConfig","previousState","shareIndex"]}(),angular.module("linshare.share").controller("LinshareShareController",["$scope","$filter","NgTableParams","sharedDocumentsList",function(a,b,c,d){a.tableParams=new c({page:1,sorting:{modificationDate:"desc"},count:20},{getData:function(a){var c=a.sorting()?b("orderBy")(d,a.orderBy()):d;return a.total(c.length),c.slice((a.page()-1)*a.count(),a.page()*a.count())}})}]),angular.module("linshare.share").controller("LinshareAdvancedShareController",["$scope","$log","$translate","LinshareShareService","lsAppConfig","toastService",function(a,b,c,d,e,f){function g(){angular.element(".savelistBtn").click()}function h(){angular.element(".slideCtn").removeClass("goToSlide1 goToSlide2 goToSlide3")}function i(){angular.element(".transfertFilesBtnCtn .nextLink").addClass("hide"),angular.element(".transfertFilesBtnCtn .sendLink").removeClass("hide")}function j(){angular.element(".transfertFilesBtnCtn .sendLink").addClass("hide"),angular.element(".transfertFilesBtnCtn .nextLink").removeClass("hide")}function k(b){var c=b,d=c+1;if(h(),j(),1===b){var e=angular.element(".sliderLinksCtn div:nth-child("+c+")").hasClass("done");e||angular.element(".form-wizard-nav .progress-bar").css("width","50%")}else 2===b?(angular.element(".form-wizard-nav .progress-bar").css("width","100%"),i()):3===b&&(d=1);angular.element(".slideCtn").addClass("goToSlide"+d),angular.element(".form-wizard-nav div.active").removeClass("active"),angular.element(".sliderLinksCtn div:nth-child("+d+")").addClass("active"),angular.element(".sliderLinksCtn div:nth-child("+c+")").addClass("done"),a.currSlide=d}function l(b){var c=b-1;h(),j(),1===b&&(c=1),angular.element(".slideCtn").addClass("goToSlide"+c),angular.element(".form-wizard-nav div.active").removeClass("active"),angular.element(".sliderLinksCtn div:nth-child("+c+")").addClass("active"),a.currSlide=c}a.sharesContainer={waiting:[],done:[]},a.submitShare=function(b,e){return 0===a.selectedDocuments.length?void c("GROWL_ALERT.WARNING.AT_LEAST_ONE_DOCUMENT").then(function(a){f.warning(a)}):void(e?d.create(b.getFormObj()).then(function(){c("GROWL_ALERT.ACTION.SHARE").then(function(a){f.info(a)}),a.$emit("linshare-share-done"),a.mainVm.sidebar.hide(),angular.element("tr").removeClass("info"),a.initSelectedDocuments(),a.share_array[1]={}},function(a){f.error(a.statusText)}):b.setAsyncShare(!e))},angular.forEach(a.filesToShare,function(b){a.share.documents.push(b.uuid)}),a.id=1;var m=!1;a.removeItem=function(a){var b=a.currentTarget;angular.element(b).parent().parent().css("display","none")},a.toggled=function(){m=!m,m&&angular.element("#labelList").focus()},a.createRecipientList=function(a){g(a)},a.closeDropdown=function(a){g(a)},a.addUploadedDocument=function(b,c,d){var e=[angular.fromJson(c)];a.share_array[1].addDocuments(e)},a.isComplete=!1,a.onCompleteUpload=function(b){a.isComplete=!0,b.asyncShare&&a.submitShare(b,!0)},angular.element(".chosen-select").chosen({width:"100%"}),angular.element(".chosen-results").on("change",function(a,b){}),angular.element(function(){function a(){var a=angular.element(".sticky").parent().width();if(a>768){if(angular.element(".sticky").offset()){var b=41*a/100;angular.element(".sticky").css("max-width",b);var c=angular.element(".sticky").offset().top;c-=50,angular.element(window).scroll(function(){var a=angular.element(window).scrollTop();c<a?angular.element(".sticky").css({position:"fixed",top:50}):angular.element(".sticky").css({position:"static",clear:"both"})})}angular.element("#recipientsCtn").removeClass("w768"),angular.element(".custom-list-container").css({width:"58%"})}a<450&&angular.element("#recipientsCtn").addClass("w450"),a>450&&angular.element("#recipientsCtn").hasClass("w450")&&angular.element("#recipientsCtn").removeClass("w450"),a<750&&(angular.element(".sticky").css("max-width","100%"),angular.element(".custom-list-container").css({width:"100%"}),angular.element("#recipientsCtn").addClass("w768"))}a(),angular.element(window).resize(function(){a()})}),a.currSlide=1,$(function(){function a(){var a=angular.element(".sticky").parent().width();if(a>768){if(angular.element(".sticky").offset()){var b=41*a/100;angular.element(".sticky").css("max-width",b);var c=angular.element(".sticky").offset().top;c-=50,angular.element(window).scroll(function(){var a=angular.element(window).scrollTop();c<a?angular.element(".sticky").css({position:"fixed",top:50}):angular.element(".sticky").css({position:"static",clear:"both"})})}angular.element("#recipientsCtn").removeClass("w768"),angular.element(".custom-list-container").css({width:"58%"})}a<450&&angular.element("#recipientsCtn").addClass("w450"),a>450&&angular.element("#recipientsCtn").hasClass("w450")&&angular.element("#recipientsCtn").removeClass("w450"),a<750&&(angular.element(".sticky").css("max-width","100%"),angular.element(".custom-list-container").css({width:"100%"}),angular.element("#recipientsCtn").addClass("w768"))}a(),angular.element(window).resize(function(){a()})}),a.moveSliderForward=function(){k(a.currSlide)},a.moveSliderBackwards=function(){l(a.currSlide)},a.goToSlide=function(b){j(),h(),3===b&&i(),angular.element(".slideCtn").addClass("goToSlide"+b),angular.element(".form-wizard-nav div.active").removeClass("active"),angular.element(".sliderLinksCtn div:nth-child("+b+")").addClass("active"),a.currSlide=b},a.showBtnList=function(a){var b=a.currentTarget;angular.element(b).hasClass("activeShowMore")?(angular.element(b).parent().prev().find("div").first().removeClass("data-list-slide-toggle"),angular.element(b).removeClass("activeShowMore"),angular.element(b).css("display:none !important;")):angular.element(b).addClass("activeShowMore").parent().prev().find("div").first().addClass("data-list-slide-toggle")},a.numSelectedItems=[],a.isAllSelected={status:!1,origin:""},a.$watch("isAllSelected",function(b){if(b.status===!0){var c=angular.element(".media-body").length;angular.element(".media-body").addClass("highlight-list-elem"),a.numSelectedItems.length=c}else"directive"!==b.origin&&(angular.element(".media-body").removeClass("highlight-list-elem"),a.numSelectedItems.pop(a.numSelectedItems.length))},!0),a.showSharingItems=function(b){a.isCurrentPartage=!0,b++,angular.element(".media-body").each(function(a){angular.element(this).hasClass("partage"+b)&&angular.element(this).addClass("highlight-list-elem")}),a.numSelectedItems.length=angular.element(".partage"+b).length,angular.element("#selection-actions").addClass("show-multi-menu"),a.currentSharingIndex=b,a.isUpdate=!0},a.createSharing=function(){a.isUpdate?a.updateSharing():(a.numberOfSharings++,a.resetSelection(),a.sharingsBtn.push(1),a.closeMultiSelectMenu(),a.numSelectedItems.length=0)},a.resetSelection=function(){angular.element(".media-body").each(function(b){angular.element(this).removeClass("partage"+a.numberOfSharings),angular.element(this).hasClass("highlight-list-elem")&&(a.isUpdate?angular.element(this).addClass("partage"+a.currentSharingIndex):angular.element(this).addClass("partage"+a.numberOfSharings))})},a.updateSharing=function(){a.resetSelection(),a.numSelectedItems.pop(a.numSelectedItems.length),a.closeMultiSelectMenu(),a.currentSharingIndex=0,a.isUpdate=!1,a.isCurrentPartage=!0},angular.element(".exit-selection").bind("click",function(){a.isCurrentPartage=!1,a.isUpdate=!1}),angular.element(".share-link").click(function(){a.$apply(function(){a.isCurrentPartage=!0})}),a.closeMultiSelectMenu=function(){angular.element("#selection-actions").removeClass("show-multi-menu"),angular.element(".media-body").removeClass("highlight-list-elem")},a.loadSidebarContent=function(b){a.mainVm.sidebar.setData(a),a.mainVm.sidebar.setContent(b),a.mainVm.sidebar.show()},a.currentSharingIndex=0,a.numberOfSharings=0,a.isUpdate=!1,a.isCurrentPartage=!1,a.sharingsBtn=[],a.onShare=function(){angular.element("#focusInputShare").focus(),a.loadSidebarContent(e.moreOptions)}}]),function(){function a(a){function b(a,b,c,d){a.autocompleteUsersVm.name="focusInputShare"+Math.random().toString(36).match(/[a-z]+/g).join(""),a.autocompleteUsersVm.form=d,a.autocompleteUsersVm.withEmail=!!_.isUndefined(a.autocompleteUsersVm.withEmail)||a.autocompleteUsersVm.withEmail,a.completeType=c.lsAutocompleteUser,a.completeThreadUuid=c.lsCompleteThreadUuid,b.bind("keypress",function(b){a.completeThreadUuid=c.lsCompleteThreadUuid,13===b.keyCode&&(a.noResult&&!a.autocompleteUsersVm.withEmail||a.autocompleteUsersVm.onSelect())})}var c={restrict:"A",scope:{isRequired:"=?",onSelectFunction:"=",selectedUsersList:"=",withEmail:"=?"},templateUrl:a.path+"autocompleteUsers/autocompleteTemplate.html",controller:"AutocompleteUsersController",controllerAs:"autocompleteUsersVm",bindToController:!0,link:b,replace:!0,require:"^form"};return c}angular.module("linshare.components").directive("lsAutocompleteUser",a),a.$inject=["componentsConfig"]}(),function(){function a(a,b,c,d,e,f,g,h){function i(){b.all([f.getFunctionalityParams("COMPLETION"),d.getCurrentUser()]).then(function(a){q.functionality=a[0],q.functionality.value=q.functionality.value||3,a[1].accountType===g.accountType.guest&&a[1].restricted&&(q.withEmail=!1)})}function j(){var b="Error in Function addElements:",c=!1,d=!1,e=q.selectedUser,f=q.selectedUsersList;if(_.isUndefined(e)&&(b+="\n\t- var selectedUser is not defined"),_.isUndefined(f)&&(b+="\n\t- var selectedUsersList is not defined"),d)return void a.error(b);switch(e.type){case"simple":angular.forEach(f,function(b){b.mail===e.identifier&&(c=!0,a.info("The user "+e.identifier+" is already in the selected user list list"))}),c||(e.mail=e.identifier,f.push(_.omit(e,"selectedUsersList","type","display","identifier")));break;case"user":angular.forEach(f,function(b){b.mail===e.mail&&b.domain===e.domain&&(c=!0,a.info("The user "+e.mail+" is already in the selected user list list"))}),c||f.push(_.omit(e,"selectedUsersList","uuid","type","display","identifier"));break;case"mailinglist":angular.forEach(f,function(b){b.identifier===e.identifier&&(c=!0,a.info("The list "+e.listName+" is already in the mailinglist"))}),c||f.push(_.omit(e,"display","identifier"))}}function k(){var a=q.form[q.name].$viewValue;return!!(q.withEmail&&q.noResult&&!_.isUndefined(a)&&a.length>=q.functionality.value)&&!r.test(a)}function l(){if(!_.isUndefined(q.form[q.name]))return(q.form[q.name].$touched||q.form.$submitted)&&q.form[q.name].$invalid&&q.required()}function m(){if(q.selectedUser)q.dealWithSelectedUser(q.selectedUser,q.selectedUsersList);else{var a=q.form[q.name].$viewValue;q.withEmail&&(r.test(a)?q.searchUsersAccount(a).then(function(a){q.selectedUser=a[0],q.dealWithSelectedUser(q.selectedUser,q.selectedUsersList)}):q.isEmail=!q.onErrorEmail())}}function n(){if(!_.isUndefined(q.selectedUsersList)&&!_.isUndefined(q.isRequired))return 0===q.selectedUsersList.length&&q.isRequired}function o(a){var d=b.defer();return a.length>=q.functionality.value&&e.search(a,c.completeType,c.completeThreadUuid).then(function(b){0===b.length&&q.withEmail&&r.test(a)&&b.push({mail:a,identifier:a,type:"simple"}),q.isEmail=!q.onErrorEmail(),d.resolve(b)}),d.promise}function p(a){var b='<div  class="recipientsAutocomplete" title="$title"><span class="firstLetterFormat $style">$firstLetter</span><p class="recipientsInfo"><span class="user-full-name">$name</span><span class="email">$info</span></p></div>';switch(a.type){case"simple":b=a.identifier;break;case"mailinglist":var c={firstName:a.ownerFirstName,lastName:a.ownerLastName,mail:a.ownerMail};b=b.replace("$title",a.listName).replace("$style","ls-contact-list-item").replace("$firstLetter","").replace("$name",a.listName).replace("$info",h.getOwner(c));break;case"user":b=b.replace("$title",a.mail).replace("$style","").replace("$firstLetter",a.firstName.charAt(0)).replace("$name",a.firstName+" "+a.lastName).replace("$info",a.mail);break;case"threadmember":b=b.replace("$title",a.mail).replace("$style",a.member===!0?" firstLetterBgdGreen":"").replace("$firstLetter",a.firstName.charAt(0)).replace("$name",a.firstName+" "+a.lastName).replace("$info",a.mail);break;default:b=a}return b}var q=this,r=/^\S+@\S+\.\S+$/;q.dealWithSelectedUser=q.onSelectFunction||j,q.isEmail=!0,q.onErrorEmail=k,q.onErrorEmpty=l,q.onSelect=m,q.required=n,q.searchUsersAccount=o,q.userRepresentation=p,i()}angular.module("linshare.components").controller("AutocompleteUsersController",a),
a.$inject=["$log","$q","$scope","authenticationRestService","autocompleteUserRestService","functionalityRestService","lsAppConfig","ownerLabel"]}(),function(){function a(a,b,c,d){function e(b,d,e){return a.debug("autocompleteUserRestService : search",b,d,e),f(c.all(g).one(b).get({type:d,threadUuid:e}))}var f=d.responseHandler,g="autocomplete",h={search:e};return h}angular.module("linshare.components").factory("autocompleteUserRestService",a),a.$inject=["$log","$q","Restangular","ServerManagerService"]}(),function(){angular.module("linshare.receivedShare",[])}(),function(){function a(a,b,c){function d(c){return a.debug("LinshareReceivedShareRestService : copy",c),j(b.one(k).one(c,"copy").post())}function e(c){return a.debug("LinshareReceivedShareRestService : download",c),j(b.all(k).one(c,"download").withHttpConfig({responseType:"arraybuffer"}).get())}function f(c){return a.debug("LinshareReceivedShareRestService : get",c),j(b.one(k,c).get())}function g(){return a.debug("LinshareReceivedShareRestService : getList"),j(b.all(k).getList())}function h(c){return a.debug("LinshareReceivedShareRestService : delete",c),j(b.one(k,c).remove())}function i(c){return a.debug("LinshareReceivedShareRestService : thumbnail",c),j(b.one(k,c).one("thumbnail").get({base64:!0}))}var j=c.responseHandler,k="received_shares",l={copy:d,download:e,get:f,getList:g,remove:h,thumbnail:i};return l}angular.module("linshare.receivedShare").factory("receivedShareRestService",a),a.$inject=["$log","Restangular","ServerManagerService"]}(),angular.module("linshare.receivedShare").controller("ReceivedController",["$filter","$log","$scope","$q","$timeout","$translate","$translatePartialLoader","$window","authenticationRestService","autocompleteUserRestService","documentSelected","documentUtilsService","files","lsAppConfig","NgTableParams","receivedShareRestService","toastService",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){function r(){c.filters.sizeStart=null,c.filters.sizeEnd=null,c.filters.unity="1000",c.filters.dateType="1",c.filters.dateStart="",c.filters.dateEnd="",c.showUnit=!0,c.filters.selectedContact=B,c.popoverValue="",c.selectedRecipient="",c.showDateRange=!0,c.tableParams.reload()}function s(){c.tableParams.reload(),C()}function t(a){c.mainVm.sidebar.setData(c),c.mainVm.sidebar.setContent(a||n.share),c.mainVm.sidebar.show()}function u(a){var b=!1;angular.forEach(c.showActions,function(c,d){c.uuid===a.uuid&&(b=d)}),a.isChecked&&!b?c.showActions.push(a):!a.isChecked&&b>=0&&b>-1&&c.showActions.splice(b,1)}function v(){c.showActions=[],c.datasIsSelected=!c.datasIsSelected,_.forEach(c.tableData.slice((c.tableParams.$params.page-1)*c.tableParams.$params.count,c.tableParams.$params.page*c.tableParams.$params.count),function(a,b){c.tableData[b].isChecked=c.datasIsSelected,c.datasIsSelected&&(a.isChecked=!0,c.showActions.push(a))})}function w(){c.activeBtnShowSelection=!c.activeBtnShowSelection,c.tableParams.filter().isSelected?delete c.tableParams.filter().isSelected:c.tableParams.filter().isSelected=!0}function x(){return d(function(b){b(new o({page:1,sorting:{modificationDate:"desc"},count:25,filter:c.paramFilter},{getData:function(b){var d=b.filter()?a("filter")(c.documentsList,b.filter()):c.documentsList,e=b.sorting()?a("orderBy")(d,b.orderBy()):d;return b.total(e.length),e.slice((b.page()-1)*b.count(),b.page()*b.count())}}))})}function y(a){angular.forEach(a,function(a){b.debug("value to delete",a),a.remove().then(function(){_.remove(c.documentsList,a),_.remove(c.selectedDocuments,a),c.documentsListCopy=c.documentsList,c.tableParams.reload(),K(),f("GROWL_ALERT.ACTION.DELETE_SINGULAR").then(function(a){q.success(a)})})})}function z(){c.searchMobileDropdown?c.closeSearch():c.openSearch(),c.searchMobileDropdown=!c.searchMobileDropdown}function A(a){l.selectDocument(c.selectedDocuments,a)}g.addPart("receivedShare"),c.documentSelected=k,c.toggleFilterBySelectedFiles=w,c.datasIsSelected=!1,c.advancedFilterBool=!1,c.showActions=[],c.filters={},c.showDateRangeStart=!1,c.filters.dateStart="",c.filters.dateEnd="",c.showUnit=!0;var B={firstName:"",mail:"",lastName:""};c.selectedDocuments=[],c.filters.selectedContact=B,c.selectedRecipient={};var C=function(){c.showActions.length!==c.showActions.length!==0&&(c.datasIsSelected=!1)},D=function(a){var b=[],c=[{regex:/pdf/,image:"fa-file-pdf-o",info:"PDF"},{regex:/image/,image:"fa-file-image-o",info:"IMAGE"},{regex:/audio/,image:"fa-file-audio-o",info:"AUDIO"},{regex:/video/,image:"fa-file-video-o",info:"VIDEO"},{regex:/powerpoint/,image:"fa-file-powerpoint-o",info:"POWERPOINT"},{regex:/word/,image:"fa-file-word-o",info:"WORD"},{regex:/zip|tar|compressed/,image:"fa-file-archive-o",info:"ARCHIVE"},{regex:/excel/,image:"fa-file-excel-o",info:"EXCEL"},{regex:/text\/plain/,image:"fa-file-text-o",info:"TEXT"},{regex:/text/,image:"fa-file-code-o",info:"CODE"}];return _.forEach(a,function(a){_.forEach(c,function(b){a.type.match(b.regex)&&(a.typeImage=b.image,a.info=b.info)}),a.typeImage||(a.typeImage="fa-file-text-o",a.info="TEXT"),b.push(a)}),b},E=D(m);c.paramsIsActivate=function(a){return a>0},c.clearParams=r,i.getCurrentUser().then(function(a){c.canUpload=a.canUpload}),c.updateParams=s;var F,G,H,I,J;f(["SWEET_ALERT.ON_FILE_COPY.TEXT","SWEET_ALERT.ON_FILE_COPY.CONFIRM_BUTTON","SWEET_ALERT.ON_MULTIPLE_DOWNLOAD.TITLE","SWEET_ALERT.ON_MULTIPLE_DOWNLOAD.TEXT","SWEET_ALERT.ON_MULTIPLE_DOWNLOAD.CONFIRM_BUTTON"]).then(function(a){F=a["SWEET_ALERT.ON_FILE_COPY.TEXT"],G=a["SWEET_ALERT.ON_FILE_COPY.CONFIRM_BUTTON"],H=a["SWEET_ALERT.ON_MULTIPLE_DOWNLOAD.TITLE"],I=a["SWEET_ALERT.ON_MULTIPLE_DOWNLOAD.TEXT"],J=a["SWEET_ALERT.ON_MULTIPLE_DOWNLOAD.CONFIRM_BUTTON"]}),c.downloadFile=function(a){p.download(a.uuid).then(function(b){l.downloadFileFromResponse(b,a.name,a.type)})},c.download=function(){angular.forEach(c.showActions,function(a){c.downloadFile(a)})},c.resetSelectedDocuments=function(){c.activeBtnShowSelection=!c.activeBtnShowSelection,delete c.tableParams.filter().isSelected,angular.forEach(c.selectedDocuments,function(a){a.isSelected=!1}),c.selectedDocuments=[],c.flagsOnSelectedPages={}},c.getDocumentThumbnail=function(a){p.thumbnail(a).then(function(a){c.currentSelectedDocument.current.thumbnail=a})},c.loadSidebarContent=t,c.currentSelectedDocument={current:""},c.flagsOnSelectedPages={};var K=function(){c.flagsOnSelectedPages={}};c.selectDocumentsOnCurrentPage=function(a,b,d){var e=b||c.tableParams.page(),f=a||c.tableParams.data,g=d||c.flagsOnSelectedPages[e];g?(c.selectedDocuments=_.xor(c.selectedDocuments,f),angular.forEach(f,function(a){a.isSelected&&(a.isSelected=!1,_.remove(c.selectedDocuments,function(b){return b.uuid===a.uuid}))}),c.flagsOnSelectedPages[e]=!1):(angular.forEach(f,function(a){a.isSelected||(a.isSelected=!0,c.selectedDocuments.push(a))}),c.flagsOnSelectedPages[e]=!0)},c.showCurrentFile=function(a,b){if(c.currentSelectedDocument.current=a,a.shared>0&&p.get(a.uuid).then(function(a){c.currentSelectedDocument.current.shares=a.shares}),a.hasThumbnail===!0&&p.thumbnail(a.uuid).then(function(a){c.currentSelectedDocument.current.thumbnail=a}),c.loadSidebarContent(n.details),!_.isUndefined(b)){var d=b.currentTarget;angular.element("#file-list-table tr li").removeClass("activeActionButton").promise().done(function(){angular.element(d).addClass("activeActionButton")})}};var L,M,N,O;f(["SWEET_ALERT.ON_FILE_DELETE.TITLE","SWEET_ALERT.ON_FILE_DELETE.TEXT","SWEET_ALERT.ON_FILE_DELETE.CONFIRM_BUTTON","SWEET_ALERT.ON_FILE_DELETE.CANCEL_BUTTON"]).then(function(a){L=a["SWEET_ALERT.ON_FILE_DELETE.TITLE"],M=a["SWEET_ALERT.ON_FILE_DELETE.TEXT"],N=a["SWEET_ALERT.ON_FILE_DELETE.CONFIRM_BUTTON"],O=a["SWEET_ALERT.ON_FILE_DELETE.CANCEL_BUTTON"]}),c.copyIntoFiles=function(a){c.canUpload&&(_.isArray(a)||(a=[a]),swal({title:L,text:F,type:"info",showCancelButton:!0,confirmButtonColor:"#05b1ff",confirmButtonText:G,cancelButtonText:O,closeOnConfirm:!0,closeOnCancel:!0},function(b){b&&angular.forEach(a,function(b,d){p.copy(b.uuid).then(function(){angular.forEach(E,function(e,f){e.uuid===b.uuid&&(E.splice(f,1),a.splice(d,1),c.tableParams.reload())})})})}))},c.unavailableMultiDownload=function(){swal({title:H,text:I,type:"error",confirmButtonColor:"#05b1ff",confirmButtonText:J,closeOnConfirm:!0})},c.sortDropdownSetActive=function(a,b){c.toggleSelectedSort=!c.toggleSelectedSort,c.tableParams.sorting(a,c.toggleSelectedSort?"desc":"asc");var d=b.currentTarget;angular.element(".labeled-dropdown.open a").removeClass("selected-sorting").promise().done(function(){angular.element(d).addClass("selected-sorting")})},c.setShowActions=u,c.selectAll=v,c.$watch("tableParams.$params.page",function(){var a=!0;c.tableData&&(angular.forEach(c.tableData.slice((c.tableParams.$params.page-1)*c.tableParams.$params.count,c.tableParams.$params.page*c.tableParams.$params.count),function(b){b.isChecked||(a=!1)}),c.datasIsSelected=a)}),c.paramFilter={name:""},x().then(function(a){c.tableParams=a,_.isUndefined(c.documentSelected)?f("GROWL_ALERT.ERROR.FILE_NOT_FOUND").then(function(a){q.error(a)}):null!==c.documentSelected&&(f("TOAST_ALERT.WARNING.ISOLATED_FILE").then(function(a){q.isolate(a)}),c.addSelectedDocument(c.documentSelected),c.toggleFilterBySelectedFiles(),c.showCurrentFile(c.documentSelected))}),c.documentsListCopy=E,c.documentsList=E,c.deleteDocuments=function(a){l.deleteDocuments(a,y)},c.formatLabel=function(a){if(""!==a.firstName)return a.firstName.concat(" ",a.lastName)},c.userRepresentation=function(a){return angular.isString(a)?a:"<span>"+a.firstName+" "+a.lastName+'</span> <span > + <i class="zmdi zmdi-email"></i> &nbsp;'+a.mail+"</span>"},c.searchGuestRestrictedContacts=function(a){return c.popoverValue="",c.selectedRecipient="",j.search(a,"SHARING")},c.addRecipients=function(a,b){c.selectedRecipient=b,c.filters.selectedContact=b,c.popoverValue=b.mail},c.removeRecipients=function(a,b){a.splice(b,1)},c.today=function(){c.dt=new Date},c.today(),c.minRange="",c.toggleMin=function(){c.minDate=c.minDate?null:new Date,c.maxDate=c.maxDate?null:new Date},c.toggleMin(),c.open=function(a,b){a.preventDefault(),a.stopPropagation(),c[b]=!0},c.dateOptions={formatYear:"yy",startingDay:1},c.formats=["dd/MM/yyyy","yyyy/MM/dd","dd.MM.yyyy","shortDate"],c.format=c.formats[0],c.closeDetailSidebar=function(){angular.element("#file-list-table tr li").removeClass("activeActionButton")},c.sortDropdownSetActive=function(a,b){c.toggleSelectedSort=!c.toggleSelectedSort,c.tableParams.sorting(a,c.toggleSelectedSort?"desc":"asc");var d=b.currentTarget;angular.element(".labeled-dropdown.open a").removeClass("selected-sorting").promise().done(function(){angular.element(d).addClass("selected-sorting")})},c.toggleSearchState=z,c.openSearch=function(){angular.element("#drop-area").addClass("search-toggled"),angular.element("#top-search-wrap input").focus()},c.closeSearch=function(){angular.element("#drop-area").removeClass("search-toggled"),angular.element("#searchInMobileFiles").val("").trigger("change")},c.$on("$stateChangeSuccess",function(){angular.element(".multi-select-mobile").appendTo("body")}),c.currentPage="received_files",c.lsFormat=function(){return"fr-FR"===f.use()?"d MMMM y":"MMMM d y"},c.lsFullDateFormat=function(){return"fr-FR"===f.use()?"Le d MMMM y   h:mm a":"The MMMM d  y at h:mma"},c.getDetails=function(a){return l.getItemDetails(p,a)},c.addSelectedDocument=A}]).directive("slideable",function(){return{restrict:"C",compile:function(a){var b=a.html();return a.html('<div class="slideable_content" style="margin:0 !important; padding:0 !important" >'+b+"</div>"),function(a,b,c){c.duration=c.duration?c.duration:"1s",c.easing=c.easing?c.easing:"ease-in-out",b.css({overflow:"hidden",height:"0px",transitionProperty:"height",transitionDuration:c.duration,transitionTimingFunction:c.easing})}}}}),function(){angular.module("linshare.anonymousUrl",["ngResource","ngRoute","ui.router","ui.bootstrap"])}(),function(){function a(a,b,c){function d(b,d,e){var g=c.defer();return a.get([f,b,e,"download"].join("/"),{headers:{"linshare-anonymousurl-password":d},responseType:"arraybuffer"}).then(function(a){g.resolve(a)}),g.promise}function e(b,d){var e=c.defer();return a.get(f+"/"+b,{headers:{"linshare-anonymousurl-password":d}}).then(function(a){e.resolve(a)})["catch"](function(a){403===a.status?e.resolve(a):404===a.status&&e.reject(a)}),e.promise}var f="linshare/webservice/rest/external/anonymousurl",g={baseUrl:f,download:d,getAnonymousUrl:e,status:status};return g}angular.module("linshare.anonymousUrl").factory("anonymousUrlService",a),a.$inject=["$http","$log","$q"]}(),function(){function a(a,b,c){function d(){b.addPart("anonymousUrl")}var e=this;e.message=c,d()}angular.module("linshare.anonymousUrl").controller("AnonymousHomeController",a),a.$inject=["$scope","$translatePartialLoader","message"]}(),function(){function a(a,b,c,d,e,f,g,h){function i(){d.addPart("filesList"),d.addPart("anonymousUrl"),n.urlData.protectedByPassword?n.modalPasswordShow():n.tableParams=n.loadTable()}function j(a){f.download(n.urlData.uuid,n.password,a.uuid).then(function(b){k(a.name,a.type,b.data)})}function k(a,b,c){var d=new Blob([c],{type:b}),e=window.URL||window.webkitURL||window.mozURL||window.msURL,f=e.createObjectURL(d),g=document.createElement("a");g.setAttribute("href",f),g.setAttribute("download",a);var h=new MouseEvent("click");g.dispatchEvent(h)}function l(){return new h({page:1,sorting:{modificationDate:"desc"},filter:n.paramFilter,count:10},{total:n.anonymousUrlShareEntries.length,getData:function(b){return f.getAnonymousUrl(n.urlData.uuid,n.password).then(function(c){n.anonymousUrlData=c.data,n.anonymousUrlShareEntries=n.anonymousUrlData.documents;var d=b.filter()?a("filter")(n.anonymousUrlShareEntries,b.filter()):n.anonymousUrlShareEntries,e=b.sorting()?a("orderBy")(d,b.orderBy()):d;return b.total(e.length),e.slice((b.page()-1)*b.count(),b.page()*b.count())})}})}function m(){n.modalPassword=e.open({backdrop:"static",backdropClass:"modal-backdrop",controller:["$state","$uibModalInstance",function(a,c){function d(a,b){return(b.$touched||a.$submitted)&&b.$invalid}function e(){a.go("anonymousUrl.home"),c.close()}function g(){n.password=h.password,f.getAnonymousUrl(n.urlData.uuid,n.password).then(function(d){403===d.status?(_.isUndefined(h.password)||""===h.password||(h.invalid=!0),b.debug("Bad input for anonymous url password",d)):404===d.status?(a.go("anonymousUrl.home",{error:d.status}),b.debug("Anonymous url password doesn't exist",d)):(h.invalid=!1,n.tableParams=n.loadTable(),c.close())})["catch"](function(a){b.debug("Error on password submit",a)})}var h=this;h.hasError=d,h.hide=e,h.invalid=!1,h.submit=g}],controllerAs:"modalPasswordVm",templateUrl:"modules/linshare.anonymousUrl/views/passwordModal.html"})}var n=this;n.activate=i,n.anonymousUrlData={},n.anonymousUrlShareEntries=[],n.download=j,n.loadTable=l,n.modalPasswordShow=m,n.paramFilter={name:""},n.urlData=g,i()}angular.module("linshare.anonymousUrl").controller("AnonymousUrlController",a),a.$inject=["$filter","$log","$state","$translatePartialLoader","$uibModal","anonymousUrlService","anonymousUrlData","NgTableParams"]}(),function(){function a(a,b){var c={restrict:"EA",templateUrl:function(){return a.debug("status anourl",b.status),404===b.status?"modules/linshare.anonymousUrl/views/404.html":"modules/linshare.anonymousUrl/views/anonymousUrl.html"}};return c}angular.module("linshare.anonymousUrl").directive("lsAnonymousUrlTemplate",a),a.$inject=["$log","anonymousUrlService"]}(),function(){function a(a){a.state("anonymousUrl",{templateUrl:"modules/linshare.anonymousUrl/views/common.html"}).state("anonymousUrl.home",{url:"/external/anonymous/",params:{error:void 0},resolve:{message:["$state","$stateParams",function(a,b){var c="ANONYMOUS_URL.HOME.";return _.isUndefined(b.error)?c+"MESSAGE":c+b.error.status}]},controller:"AnonymousHomeController",controllerAs:"anonymousHomeVm",templateUrl:"modules/linshare.anonymousUrl/views/home.html"}).state("anonymousUrl.list",{url:"/external/anonymous/:uuid",controller:"AnonymousUrlController",controllerAs:"anonymousUrlVm",resolve:{anonymousUrlData:["$q","$state","$stateParams","anonymousUrlService",function(a,b,c,d){var e=a.defer();return d.getAnonymousUrl(c.uuid).then(function(a){var b=a.data;_.isUndefined(b.uuid)?(b.protectedByPassword=!0,b.uuid=c.uuid):b.protectedByPassword=!1,e.resolve(b)})["catch"](function(a){b.go("anonymousUrl.home",{error:a}),e.reject(a)}),e.promise}]},template:"<ls-anonymous-url-template></ls-anonymous-url-template>"})}a.$inject=["$stateProvider"],angular.module("linshare.anonymousUrl").config(a)}(),function(){angular.module("linshare.resetPassword",[])}(),function(){function a(a){a.state("reset",{url:"/external/reset/:uuid",templateUrl:"modules/linshare.resetPassword/views/resetForm.html",controller:"ResetPasswordController",controllerAs:"resetVm",resolve:{resetUuid:["$stateParams",function(a){return a.uuid}]}})}a.$inject=["$stateProvider"],angular.module("linshare.resetPassword").config(a)}(),function(){function a(a,b,c,d,e,f,g,h,i){function j(){s.reset.uuid=""!==h?h:void 0,d.addPart("general"),_.isUndefined(s.reset.uuid)?(s.reset.type="forgot",s.reset.action=l,s.reset.data=void 0):g.get(s.reset.uuid).then(function(a){"NEW_PASSWORD"===a.data.kind?(s.reset.type="create",s.reset.action=k):(s.reset.type="update",s.reset.action=m),s.reset.data=a.data})["catch"](function(a){s.notify(a),b.transitionTo("reset")})}function k(a){return g.update(a).then(function(){s.reset.type="finalize",c(function(){b.transitionTo("login")},5e3)})["catch"](function(a){s.notify(a)})}function l(a){return s.reset.data=a,g.reset(a.email).then(function(){s.reset.type="reinitialize"})["catch"](function(a){s.notify(a)})}function m(a){return g.update(a).then(function(){s.reset.type="finalize",c(function(){b.transitionTo("login")},5e3)})["catch"](function(a){s.notify(a)})}function n(a){e.changeLocale(a),s.loginLocale=p(a)}function o(b){var c=b.data.message;i.error(c),a.error("resetPasswordController - notify",b)}function p(a){return a=a.split("-"),q=a[0],a.length>1&&(r=a[1].toLowerCase()),{language:q,country:r}}var q,r,s=this,t=e.getLocale();s.changeLoginLanguage=n,s.loginLocale=p(t),s.lsAppConfig=f,s.notify=o,s.reset={},j()}angular.module("linshare.resetPassword").controller("ResetPasswordController",a),a.$inject=["$log","$state","$timeout","$translatePartialLoader","languageService","lsAppConfig","resetPasswordService","resetUuid","toastService"]}(),function(){function a(){function a(a,b){return"modules/linshare.resetPassword/directives/reset-form/reset-form-"+b.resetType+".html"}var b={restrict:"A",scope:{resetAction:"&",resetData:"=",resetType:"@"},templateUrl:a,controller:"ResetFormController",controllerAs:"resetFormVm",bindToController:!0};return b}angular.module("linshare.resetPassword").directive("lsResetForm",a),a.$inject=[]}(),function(){function a(a,b,c,d){function e(){c.addPart("resetPassword"),b.refresh().then(function(){h(i.resetData)}),a.$watch(function(){return i.languageService.getLocale()},function(){h(i.resetData)})}function f(){var a;return _.isUndefined(i.resetData)?a={email:i.email,password:i.password,passwordBis:i.passwordBis}:(a=i.resetData,a.password=i.password),a}function g(){i.password===i.passwordBis&&i.resetAction({formData:i.getFormData()}).then(function(a){i.translateInfoMessage(a)})}function h(a){b("RESET.FORM.INFO."+i.resetType.toUpperCase()).then(function(b){i.message=b;for(var c in a)a.hasOwnProperty(c)&&(i.message=i.message.replace("${"+c+"}",a[c]))})}var i=this;i.getFormData=f,i.languageService=d,i.resetSubmit=g,i.translateInfoMessage=h,e()}angular.module("linshare.resetPassword").controller("ResetFormController",a),a.$inject=["$scope","$translate","$translatePartialLoader","languageService"]}(),function(){function a(a,b,c){function d(b){var d=c.defer();return a.get(g+"/"+b).then(function(a){d.resolve(a)})["catch"](function(a){d.reject(a)}),d.promise}function e(b){var d=c.defer(),e={mail:b};return a.post(g,e).then(function(a){d.resolve(a)})["catch"](function(a){d.reject(a)}),d.promise}function f(b){var d=c.defer();return a.put(g+"/"+b.uuid,b).then(function(a){d.resolve(a)})["catch"](function(a){d.reject(a)}),d.promise}var g="linshare/webservice/rest/external/reset_password",h={get:d,reset:e,update:f};return h}angular.module("linshare.resetPassword").factory("resetPasswordService",a),a.$inject=["$http","$log","$q"]}(),function(){angular.module("linshare.guests",["restangular"])}(),function(){function a(a,b,c,d,e){function f(a){o=this,a=a||{},g().then(function(){o.allowedToAddEditors=_.cloneDeep(p),o.allowedToExpiration=_.cloneDeep(q),o.allowedToProlongExpiration=_.cloneDeep(r),o.allowedToRestrict=_.cloneDeep(s),o.allowedToUpload=_.cloneDeep(t),o.canUpload=l(a.canUpload,_.clone(t.value)),o.comment=l(a.comment,""),o.create=h,o.creationDate=l(a.creationDate,""),o.domain=l(a.domain,""),o.editorsContacts=l(a.editorsContacts,[]),o.expirationDate=l(a.expirationDate,q.value),o.firstName=l(a.firstName,""),o.lastName=l(a.lastName,""),o.mail=l(a.mail,""),o.message=l(a.message,""),o.modificationDate=l(a.modificationDate,""),o.owner=l(a.owner,{}),o.reset=i,o.restricted=l(a.restricted,_.clone(s.value)),o.restrictedContacts=l(a.restrictedContacts,_.cloneDeep(u)),o.toDTO=m,o.update=n,o.uuid=l(a.uuid,void 0),j().then(function(a){o.form=a,o.form.isRestrictedContact=_.some(o.restrictedContacts,{mail:w.mail}),_.isUndefined(o.uuid)||(o.form.activateMoreOptions=!0,o.form.display.firstName=_.clone(o.firstName),o.form.display.lastName=_.clone(o.lastName))})})}function g(){return a.all([d.getFunctionalityParams("GUESTS__CAN_UPLOAD").then(function(a){var b=_.cloneDeep(a);t=b,t.canOverride=!_.isUndefined(b.canOverride)&&b.canOverride,t.value=!_.isUndefined(b.value)&&b.value}),d.getFunctionalityParams("GUESTS__EXPIRATION").then(function(a){var b=_.cloneDeep(a);q=b,q.canOverride=!_.isUndefined(b.canOverride)&&b.canOverride,q.value=moment().endOf("day").add(b.value,b.unit).subtract(1,"days").valueOf()}),d.getFunctionalityParams("GUESTS__EXPIRATION_ALLOW_PROLONGATION").then(function(a){var b=_.cloneDeep(a);r=b,r.canOverride=!_.isUndefined(b.canOverride)&&b.canOverride}),d.getFunctionalityParams("GUESTS__RESTRICTED").then(function(a){var b=_.cloneDeep(a);if(s=b,s.canOverride=!_.isUndefined(b.canOverride)&&b.canOverride,s.value=!_.isUndefined(b.value)&&b.value,s.enable&&s.canOverride){var c={firstName:w.firstName,lastName:w.lastName,domain:w.domain,mail:w.mail};_.isUndefined(_.find(u,c))&&u.push(c)}})])}function h(){o=this;var b=a.defer(),c=o.toDTO();return e.create(c).then(function(a){null!==c.restrictedContacts&&c.restrictedContacts!==[]?e.update(a.uuid,c).then(function(a){b.resolve(a)})["catch"](function(a){b.reject(a)}):b.resolve(a)})["catch"](function(a){b.reject(a)}),b.promise}function i(){o=this,o.canUpload=_.clone(t.value),o.comment="",o.expirationDate=_.clone(v.datepicker.maxDate),o.firstName="",o.form=_.cloneDeep(v),o.lastName="",o.mail="",o.restricted=_.clone(s.value),o.restrictedContacts=_.cloneDeep(u)}function j(){var b=a.defer();return v.activateDescription=!(_.isUndefined(o.comment)||""===o.comment||null===o.comment),v.activateRestricted=l(o.restricted,s.value),v.activateUserSpace=l(o.canUpload,t.value),v.datepicker.maxDate=_.clone(q.value),_.isUndefined(o.uuid)||r.enable||(v.datepicker.maxDate=_.clone(o.expirationDate)),v.activateMoreOptions=!v.activateUserSpace,_.isUndefined(o.uuid)&&q.canOverride&&(v.datepicker.isEditable=!0),b.resolve(_.cloneDeep(v)),b.promise}function k(a,b){return b.enable?b.canOverride?_.isUndefined(a)?b.value:a:b.value:null}function l(a,b){return _.cloneDeep(_.isUndefined(a)?b:a)}function m(){o=this;var a={};return a.canUpload=k(o.canUpload,t),a.comment=_.isUndefined(o.comment)?"":o.comment,moment(o.expirationDate).endOf("day").valueOf(),_.isUndefined(o.uuid)?a.expirationDate=k(o.expirationDate,q):a.expirationDate=k(o.expirationDate,r),a.firstName=_.isUndefined(o.firstName)?"":o.firstName,a.lastName=_.isUndefined(o.lastName)?"":o.lastName,a.mail=_.isUndefined(o.mail)?"":o.mail,a.restricted=k(o.restricted,s),a.canUpload?s.enable&&s.canOverride?a.restrictedContacts=_.uniq(_.isUndefined(o.restrictedContacts)?u:o.restrictedContacts):a.restrictedContacts=null:(a.restricted=!1,a.restrictedContacts=null),_.isUndefined(o.uuid)||(a.uuid=o.uuid),a}function n(){o=this;var b=a.defer(),c=o.toDTO();return e.update(c.uuid,c).then(function(a){b.resolve(a)})["catch"](function(a){b.reject(a)}),b.promise}var o,p={},q={},r={},s={},t={},u=[],v={activateDescription:!1,activateEditors:!1,activateMoreOptions:!1,activateRestricted:!1,activateUserSpace:!1,datepicker:{isEditable:!1,maxDate:null,minDate:moment().endOf("day").valueOf(),options:null},display:{firstName:"",lastName:""},isRestrictedContact:!1},w=b.getCurrentUser().$$state.value;return f}angular.module("linshare.guests").factory("GuestObjectService",a),a.$inject=["$q","authenticationRestService","autocompleteUserRestService","functionalityRestService","guestRestService"]}(),function(){function a(a,b,c,d,e,f,g,h,i,j,k,l,m){function n(){K.guestObject=new i,g.addPart("guests"),g.addPart("filesList"),f.refresh().then(function(){f(["SWEET_ALERT.ON_GUEST_DELETE.TITLE","SWEET_ALERT.ON_GUEST_DELETE.TEXT","SWEET_ALERT.ON_GUEST_DELETE.CONFIRM_BUTTON","SWEET_ALERT.ON_GUEST_DELETE.CANCEL_BUTTON","HEADER_GUEST.SLIDER.MY_GUEST","HEADER_GUEST.SLIDER.OTHER_GUEST"]).then(function(a){J=a["SWEET_ALERT.ON_GUEST_DELETE.TITLE"],I=a["SWEET_ALERT.ON_GUEST_DELETE.TEXT"],H=a["SWEET_ALERT.ON_GUEST_DELETE.CONFIRM_BUTTON"],G=a["SWEET_ALERT.ON_GUEST_DELETE.CANCEL_BUTTON"],K.currentView=K.isMineGuest?a["HEADER_GUEST.SLIDER.MY_GUEST"]:a["HEADER_GUEST.SLIDER.OTHER_GUEST"]})}),K.tableParams=K.loadTable(),K.fabButton={actions:[{action:function(){return K.loadSidebarContent(K.guestCreate)},icon:"zmdi zmdi-plus",label:"CONTACTS_LISTS_ACTION.MORE.ADD_CONTACT"}]}}function o(a,b){a.$valid?b.create().then(function(){d.mainVm.sidebar.hide(a,b),f("SIDEBAR.NOTIFICATION.SUCCESS.CREATE").then(function(a){m.success(a)}),K.tableParams.reload()}):K.setSubmitted(a)}function p(a,b){swal({title:J,text:I.replace("${count}",a.count).replace("${plural}",a.plural),type:"warning",showCancelButton:!0,confirmButtonColor:"#DD6B55",confirmButtonText:H,cancelButtonText:G,closeOnConfirm:!0,closeOnCancel:!0},function(a){a&&b()})}function q(a){return j.get(a.uuid).then(function(a){K.selectedGuest=new i(a)})}function r(){return new l({page:1,sorting:{modificationDate:"desc"},count:25,filter:K.paramFilter},{getData:function(b){return j.getList(K.isMineGuest).then(function(c){var d=[];switch(b.filter().operator){case"||":_.forOwn(b.filter(),function(b,e){var f={};f[e]=b,"operator"!==e&&(d=_.concat(d,a("filter")(c,f)))}),d=_.uniq(d);break;default:d=b.hasFilter()?a("filter")(c,b.filter()):c}var e=b.sorting()?a("orderBy")(d,b.orderBy()):d;return b.total(e.length),e.slice((b.page()-1)*b.count(),b.page()*b.count())})}})}function s(a){d.mainVm.sidebar.setData(K),d.mainVm.sidebar.setContent(a||k.guestDetails),d.mainVm.sidebar.show()}function t(){return"fr-FR"===f.use()?"d MMMM y":"MMMM d y"}function u(){return"fr-FR"===f.use()?"Le d MMMM y   h:mm a":"The MMMM d  y at h:mma"}function v(a,b){return b?(d.mainVm.sidebar.hide(),void K.confirmDelete({count:1,plural:""},function(){return j.remove(a).then(function(){K.tableParams.reload()})})):j.remove(a).then(function(){K.tableParams.reload()})}function w(a){var b=a.length>1?"s":"";d.mainVm.sidebar.hide(),K.confirmDelete({count:a.length,plural:b},function(){_.forEach(a,function(b){K.removeGuest(b,!1).then(function(){_.remove(a,b)})})})}function x(a){a.$setSubmitted(),angular.forEach(a,function(b){b&&b.$$parentForm===a&&b.$setSubmitted&&x(b)})}function y(a,b){K.getGuestDetails(a).then(function(){K.selectedTab=b||0,K.loadSidebarContent(K.guestDetails)})}function z(a,b){b.isSelected=!b.isSelected,b.isSelected?a.push(b):_.pull(a,b)}function A(a,b,c){_.forEach(b,function(b){K.paramFilter[b]=a}),K.paramFilter.operator=c?c:"&&",K.tableParams.filter(K.paramFilter),K.tableParams.reload()}function B(){K.tableParams.filter().isSelected?delete K.tableParams.filter().isSelected:K.tableParams.filter().isSelected=!0}function C(){delete K.tableParams.filter().isSelected,_.forEach(K.selectedGuests,function(a){a.isSelected=!1}),K.selectedGuests=[]}function D(a,b,c){var d=b||K.tableParams.page(),e=a||K.tableParams.data,f=c||K.flagsOnSelectedPages[d];f?(K.selectedGuests=_.xor(K.selectedGuest,e),_.forEach(e,function(a){_.find(K.selectedGuests,a)&&(a.isSelected=!1,_.remove(K.selectedGuests,function(b){return b.uuid===a.uuid}))}),K.flagsOnSelectedPages[d]=!1):(_.forEach(e,function(a){a.isSelected||(a.isSelected=!0,K.selectedGuests.push(a))}),K.flagsOnSelectedPages[d]=!0)}function E(a,b){K.toggleSelectedSort=!K.toggleSelectedSort,K.tableParams.sorting(a,K.toggleSelectedSort?"desc":"asc");var c=b.currentTarget;angular.element(".files .sort-dropdown a ").removeClass("selected-sorting").promise().done(function(){angular.element(c).addClass("selected-sorting")})}function F(a,b){a.$valid?b.update().then(function(){d.mainVm.sidebar.hide(a,b),f("SIDEBAR.NOTIFICATION.SUCCESS.UPDATE").then(function(a){m.success(a)}),K.tableParams.reload()}):K.setSubmitted(a)}var G,H,I,J,K=this;K.addGuest=o,K.confirmDelete=p,K.currentPage=k.guestsList,K.currentSelectedGuest={current:""},K.flagsOnSelectedPages={},K.getGuestDetails=q,K.guestDetails=k.guestDetails,K.isMineGuest=!0,K.loadSidebarContent=s,K.loadTable=r,K.loggedUser=d.loggedUser,K.lsFormat=t,K.lsFullDateFormat=u,K.guestCreate=k.guestCreate,K.paramFilter={},K.removeGuest=v,K.removeSelectedGuests=w,K.selectedGuest={},K.selectedGuests=[],K.setSubmitted=x,K.showGuestDetails=y,K.tableAddSelectedGuest=z,K.tableApplyFilter=A,K.tableFilterBySelected=B,K.tableResetSelectedGuests=C,K.tableSelectAll=D,K.tableSort=E,K.toggleSelectedSort=!0,K.updateGuest=F,n(),K.selectedValue=0,K.openSearch=function(){angular.element("#top-search-wrap input").focus()},K.closeSearch=function(){angular.element("#searchInMobileFiles").val("").trigger("change")},d.$on("$stateChangeSuccess",function(){angular.element(".multi-select-mobile").appendTo("body")}),K.singleEventFab=function(a){a.stopPropagation()}}angular.module("linshare.guests").controller("LinshareGuestsController",a),a.$inject=["$filter","$log","$q","$scope","$state","$translate","$translatePartialLoader","authenticationRestService","GuestObjectService","guestRestService","lsAppConfig","NgTableParams","toastService"]}(),function(){function a(a,b,c){function d(c){return a.debug("LinshareGuestRestService : create",c),i(b.all(j).post(c))}function e(c){return a.debug("LinshareGuestRestService : get",c),i(b.all(j).one(c).get())}function f(c){return a.debug("LinshareGuestRestService : getList",c),i(b.all(j).getList({mine:c}))}function g(c){return a.debug("LinshareGuestRestService : remove",c),i(b.one(j,c.uuid).remove())}function h(c,d){return a.debug("LinshareGuestRestService : update",c,d),i(b.one(j,c).customPUT(d))}var i=c.responseHandler,j="guests",k={create:d,get:e,getList:f,remove:g,update:h};return k}angular.module("linshare.guests").factory("guestRestService",a),a.$inject=["$log","Restangular","ServerManagerService"]}(),function(){function a(){function a(a){a.formName=_.isUndefined(a.formName)?"guestForm"+Math.random().toString(36).match(/[a-z]+/g).join(""):a.formName,a.linshareModeProduction=a.$root.linshareModeProduction}var b={restrict:"A",scope:{formName:"=",guestObject:"="},templateUrl:"modules/linshare.guests/directives/guest-form/guest-form.html",link:a,replace:!0,transclude:!0};return b}angular.module("linshare.guests").directive("lsGuestForm",a)}(),function(){angular.module("linshare.sharedSpace",[])}(),function(){function a(a,b,c){function d(c){return a.debug("workgroupRestService : create",c),k(b.all(l).post(c))}function e(c){return a.debug("workgroupRestService : get",c),k(b.one(l,c).get())}function f(c,d){return a.debug("workgroupRestService : getAudit",c,d),k(b.one(l,c).one("audit").get())}function g(){return a.debug("workgroupRestService : getList"),k(b.all(l).getList());
}function h(c){return a.debug("workgroupRestService : remove",c),k(b.one(l,c).remove())}function i(c){return a.debug("workgroupRestService : restangularize",c),b.restangularizeElement(null,c,l)}function j(c){return a.debug("workgroupRestService : update",c),k(b.one(l,c.uuid).customPUT(c))}var k=c.responseHandler,l="work_groups",m={create:d,get:e,getAudit:f,getList:g,remove:h,restangularize:i,update:j};return m}angular.module("linshare.sharedSpace").factory("workgroupRestService",a),a.$inject=["$log","Restangular","ServerManagerService"]}(),function(){function a(a,b,c){function d(c,d,e){a.debug("workgroupNodesRestService : copy",c,d.uuid,e);var f=_.isNil(e)?"":e;return o(b.one(p,c).one(q,d.uuid).all("copy").post(d,{destinationNodeUuid:f}),n)}function e(c,d,e){return a.debug("workgroupNodesRestService : create",c,d,e),o(b.one(p,c).all(q).post(d,{dryRun:e}))}function f(c,d){return a.debug("workgroupNodesRestService : download",c,d),o(b.all(p).one(c,q).one(d,"download").withHttpConfig({responseType:"arraybuffer"}).get())}function g(c,d,e){return a.debug("workgroupNodesRestService : get",c,d),o(b.one(p,c).one(q,d).get({tree:e}))}function h(c,d){return a.debug("workgroupNodesRestService : getAudit",c,d),o(b.one(p,c).one(q,d).one("audit").get())}function i(c,d){return a.debug("workgroupNodesRestService : getList",c,d),o(b.one(p,c).getList(q,{parent:d}))}function j(c,d){return a.debug("workgroupNodesRestService : remove",c,d),o(b.one(p,c).one(q,d).remove())}function k(c,d){return a.debug("workgroupNodesRestService : restangularize",c,d),b.restangularizeElement(null,c,p+"/"+d+"/"+q)}function l(c,d){return a.debug("workgroupNodesRestService : thumbnail",c,d),o(b.one(p,c).one(q,d).customGET("thumbnail",{base64:!0}))}function m(c,d,e){return a.debug("workgroupNodesRestService : update",c,d,e),o(b.one(p,c).one(q,d).customPUT(e))}var n="WORKGROUP_NODES_ERROR",o=c.responseHandler,p="work_groups",q="nodes",r={copy:d,create:e,download:f,get:g,getAudit:h,getList:i,remove:j,restangularize:k,thumbnail:l,update:m};return r}angular.module("linshare.sharedSpace").factory("workgroupNodesRestService",a),a.$inject=["$log","Restangular","ServerManagerService"]}(),function(){function a(a,b,c){function d(c,d){return a.debug("workgroupEntriesRestService : copy",c,d),k(b.one(l,c).one(_.join(m,"/"),d).post())}function e(c,d){return a.debug("workgroupEntriesRestService : download",c,d),k(b.all(l).one(c,m[0]).one(d,"download").withHttpConfig({responseType:"arraybuffer"}).get())}function f(c,d){return a.debug("workgroupEntriesRestService : get",c,d),k(b.one(l,c).one(m[0],d).get())}function g(c){return a.debug("workgroupEntriesRestService : getList",c),k(b.one(l,c).getList(m[0]))}function h(c,d){return a.debug("workgroupEntriesRestService : remove",c,d),k(b.one(l,c).one(m[0],d).remove())}function i(c,d){return a.debug("workgroupEntriesRestService : thumbnail",c,d),k(b.one(l,c).one(m[0],d).customGET("thumbnail",{base64:!0}))}function j(c,d,e){return a.debug("workgroupEntriesRestService : update",c,d,e),k(b.one(l,c).one(m[0],d).customPUT(e))}var k=c.responseHandler,l="work_groups",m=["entries","copy"],n={copy:d,download:e,get:f,getList:g,remove:h,thumbnail:i,update:j};return n}angular.module("linshare.sharedSpace").factory("workgroupEntriesRestService",a),a.$inject=["$log","Restangular","ServerManagerService"]}(),function(){function a(a,b,c){function d(c,d){return a.debug("workgroupFoldersRestService : create",c,d),k(b.one(l,c).all(m).post(d))}function e(c,d){return a.debug("workgroupFoldersRestService : get",c,d),k(b.one(l,c).one(m,d).get())}function f(c){return a.debug("workgroupFoldersRestService : getList",c),k(b.one(l,c).getList(m))}function g(c,d){return a.debug("workgroupFoldersRestService : getParent",c,d),k(b.one(l,c).getList(m,{parent:d}))}function h(c,d){return a.debug("workgroupFoldersRestService : remove",c,d),k(b.one(l,c).one(m,d).remove())}function i(c,d){return a.debug("workgroupFoldersRestService : restangularize",c),b.restangularizeElement(null,c,l+"/"+d+"/"+m)}function j(c,d){return a.debug("workgroupFoldersRestService : updateFolder",c,d),k(b.one(l,c).one(m).customPUT(d))}var k=c.responseHandler,l="work_groups",m="folders",n={create:d,get:e,getList:f,getParent:g,remove:h,restangularize:i,update:j};return n}angular.module("linshare.sharedSpace").factory("workgroupFoldersRestService",a),a.$inject=["$log","Restangular","ServerManagerService"]}(),function(){function a(a,b,c){function d(c,d){return a.debug("workgroupMembersRestService : create",c,d),i(b.one(j,c).all(k).post(d))}function e(c,d){return a.debug("workgroupMembersRestService :  get",c,d),i(b.one(j,c).one(k,d).get())}function f(c){return a.debug("workgroupMembersRestService :  getList",c),i(b.one(j,c).all(k).getList())}function g(c,d){return a.debug("workgroupMembersRestService :  remove",c,d),i(b.one(j,c).one(k,d).remove())}function h(c,d){return a.debug("workgroupMembersRestService :  update",c,d),i(b.one(j,c).one(k,d.uuid).customPUT(d))}var i=c.responseHandler,j="work_groups",k="members",l={create:d,get:e,getList:f,remove:g,update:h};return l}angular.module("linshare.sharedSpace").factory("workgroupMembersRestService",a),a.$inject=["$log","Restangular","ServerManagerService"]}(),angular.module("linshare.sharedSpace").controller("SharedSpaceController",["$scope","$timeout","$translatePartialLoader","NgTableParams","$filter","$log","workgroups","$translate","$state","documentUtilsService","itemUtilsService","workgroupRestService","workgroupFoldersRestService","auditDetailsService","workgroupEntriesRestService","lsAppConfig","lsErrorCode","toastService","functionalityRestService",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s){function t(a){j.deleteDocuments(a,u)}function u(a){angular.forEach(a,function(a){f.debug("value to delete",a),a.remove().then(function(){h("GROWL_ALERT.ACTION.DELETE_SINGULAR").then(function(a){r.success(a)}),_.remove(B.itemsList,a),_.remove(B.selectedDocuments,a),B.itemsListCopy=B.itemsList,B.tableParams.reload()})})}function v(a){j.selectDocument(B.selectedDocuments,a)}function w(){B.tableParams.filter().isSelected?delete B.tableParams.filter().isSelected:B.tableParams.filter().isSelected=!0}function x(b,c){l.get(b.uuid).then(function(c){l.getAudit(b.uuid).then(function(b){n.generateAllDetails(a.userLogged.uuid,b.plain()).then(function(a){c.auditActions=a,B.currentSelectedDocument.current=c,B.loadSidebarContent(p.workgroupPage),B.mdtabsSelection.selectedIndex=0})})});var d=c.currentTarget;angular.element("#file-list-table tr li").removeClass("activeActionButton").promise().done(function(){angular.element(d).addClass("activeActionButton")})}function y(a,b){b=b||"td[uuid="+a.uuid+"] .file-name-disp",k.rename(a,b).then(function(b){a=_.assign(a,b),B.canCreate=!0})["catch"](function(b){b.data.errCode===q.CANCELLED_BY_USER&&(a.uuid||B.itemsList.splice(_.findIndex(B.itemsList,a),1),B.canCreate=!0)})["finally"](function(){B.tableParams.reload()})}function z(a){if(B.canCreate){var c=l.restangularize({name:a.trim()});B.canCreate=!1,B.itemsList.push(c),B.tableParams.reload(),b(function(){y(c,'td[uuid=""] .file-name-disp')},0)}}function A(a){o.download(B.uuid,a.uuid).then(function(b){j.downloadFileFromResponse(b,a.name,a.type)})}c.addPart("filesList"),c.addPart("sharedspace");var B=this;B.canCreate=!0,B.downloadFile=A,B.lsAppConfig=p,B.currentSelectedDocument={},B.itemsList=g,B.itemsListCopy=B.itemsList,B.selectedDocuments=[],B.addSelectedDocument=v,B.showItemDetails=x,B.paramFilter={name:""},B.currentWorkgroupMember={},B.tableParams=new d({page:1,sorting:{modificationDate:"desc"},count:20,filter:B.paramFilter},{getData:function(a){var b=a.filter()?e("filter")(B.itemsList,a.filter()):B.itemsList,c=a.sorting()?e("orderBy")(b,a.orderBy()):b;return a.total(c.length),a.settings({counts:b.length>10?[10,25,50,100]:[]}),c.slice((a.page()-1)*a.count(),a.page()*a.count())}}),B.deleteWorkGroup=t,B.memberRole="admin",B.mdtabsSelection={selectedIndex:0};var C,D;h(["ACTION.NEW_WORKGROUP","GROWL_ALERT.ERROR.RENAME_INVALID.REJECTED_CHAR"]).then(function(a){C=a["ACTION.NEW_WORKGROUP"],D=a["GROWL_ALERT.ERROR.RENAME_INVALID.REJECTED_CHAR"].replace("$rejectedChar",p.rejectedChar.join("-, -").replace(new RegExp("-","g"),"'"))}),B.createWorkGroup=function(){var a=k.itemNumber(B.itemsList,C),b=a>0?C+" ("+a+")":C;z(b)},B.renameFolder=y,B.getDetails=function(a){return j.getItemDetails(l,a)},B.toggleFilterBySelectedFiles=w,B.sortDropdownSetActive=function(a){B.toggleSelectedSort=!B.toggleSelectedSort;var b=a.currentTarget;angular.element(".files .sort-dropdown a ").removeClass("selected-sorting").promise().done(function(){angular.element(b).addClass("selected-sorting")})},B.resetSelectedDocuments=function(){delete B.tableParams.filter().isSelected,j.resetItemSelection(B.selectedDocuments)};var E=function(){angular.element("#drop-area").addClass("search-toggled"),angular.element("#top-search-wrap input").focus()},F=function(){angular.element("#drop-area").removeClass("search-toggled"),angular.element("#searchInMobileFiles").val("").trigger("change")};B.toggleSearchState=function(){B.searchMobileDropdown?F():E(),B.searchMobileDropdown=!B.searchMobileDropdown},a.$on("$stateChangeSuccess",function(){angular.element(".multi-select-mobile").appendTo("body")}),B.fabButton={toolbar:{activate:!0,label:"BOUTON_ADD_FILE_TITLE"},actions:[{action:null,label:"WORKGROUPS_LIST.ADD_A_MEMBER",icon:"ls-add-user disabled-work-in-progress",disabled:!0,hide:p.linshareModeProduction},{action:null,label:"ADD_FILES_DROPDOWN.UPLOAD_FILE",icon:"ls-upload-fill fab-groups disabled-work-in-progress",disabled:!0,hide:p.linshareModeProduction},{action:null,label:"WORKGROUPS_LIST.FOLDER",icon:"ls-folder disabled-work-in-progress",disabled:!0,hide:p.linshareModeProduction},{action:null,label:"WORKGROUPS_LIST.UPLOAD_REQUEST",icon:"ls-upload-request disabled-work-in-progress",disabled:!0,hide:p.linshareModeProduction},{action:null,label:"WORKGROUPS_LIST.PROJECT",icon:"ls-project disabled-work-in-progress",disabled:!0,hide:p.linshareModeProduction}]},s.getFunctionalityParams("WORK_GROUP__CREATION_RIGHT").then(function(a){B.functionality=a,a.enable&&B.fabButton.actions.splice(2,0,{action:function(){return B.createWorkGroup()},label:"WORKGROUPS_LIST.SHARED_FOLDER",icon:"ls-workgroup"})}),B.currentPage="group_list",B.sortDropdownSetActive=function(a,b){B.toggleSelectedSort=!B.toggleSelectedSort,B.tableParams.sorting(a,B.toggleSelectedSort?"desc":"asc");var c=b.currentTarget;angular.element(".labeled-dropdown.open a").removeClass("selected-sorting").promise().done(function(){angular.element(c).addClass("selected-sorting")})},B.loadSidebarContent=function(b){a.mainVm.sidebar.setData(B),a.mainVm.sidebar.setContent(b),a.mainVm.sidebar.show()},B.onAddMember=function(){B.mdtabsSelection.selectedIndex=1,B.loadSidebarContent(p.workgroupPage),angular.element("#focusInputShare").focus()},B.setDropdownSelected=function(a){var c=a.currentTarget;angular.element(c).closest("ul").find(".active-check").removeClass("active-check"),b(function(){angular.element(c).addClass("active-check")},200)},B.goToSharedSpaceTarget=function(a,b){i.go("sharedspace.workgroups.root",{workgroupUuid:a,workgroupName:b.trim()})},B.flagsOnSelectedPages={},B.selectDocumentsOnCurrentPage=function(a,b,c){var d=b||B.tableParams.page(),e=a||B.tableParams.data,f=c||B.flagsOnSelectedPages[d];f?(B.selectedDocuments=_.xor(B.selectedDocuments,e),angular.forEach(e,function(a){a.isSelected&&(a.isSelected=!1,_.remove(B.selectedDocuments,function(b){return b.uuid===a.uuid}))}),B.flagsOnSelectedPages[d]=!1):(angular.forEach(e,function(a){a.isSelected||(a.isSelected=!0,B.selectedDocuments.push(a))}),B.flagsOnSelectedPages[d]=!0)}}]),angular.module("linshare.sharedSpace").directive("hoverDropdownFix",function(){return{restrict:"A",link:function(a,b){a.$watch(function(){return b.hasClass("open")},function(a,c){c&&angular.element(".uib-dropdown-menu.open").removeClass("open"),a?(angular.element(".uib-dropdown-menu").each(function(){var a=angular.element(this).css("display");"block"===a&&angular.element(this).addClass("open")}),angular.element(b).parent().addClass("setVisible")):angular.element(b).parent().removeClass("setVisible")})}}}),function(){function a(a,b,c,d){function e(){k.memberRole=k.membersRights.write,k.currentWorkGroup=b.mainVm.sidebar.getData().currentSelectedDocument,b.$watch(function(){return b.mainVm.sidebar.getData().currentSelectedDocument.current},function(a){d.get(a.uuid,b.userLogged.uuid).then(function(a){k.currentWorkgroupMember=a,b.mainVm.sidebar.addData("currentWorkgroupMember",a)})},!0)}function f(a,b){var c={userMail:a.mail,userDomainId:a.domain,readonly:k.memberRole===k.membersRights.readonly,admin:k.memberRole===k.membersRights.admin};d.create(k.currentWorkGroup.current.uuid,c).then(function(a){b.push(a.plain())})}function g(a){k.membersSearchFilter.role=k.membersSearchFilter.role===a?"":a}function h(b){k.propertyOrderBy=b,k.propertyOrderByAsc=k.propertyOrderBy!==b||!k.propertyOrderByAsc,k.currentWorkGroup.current.members=a("orderBy")(k.currentWorkGroup.current.members,b,k.propertyOrderByAsc)}function i(a,b){return _.remove(a,b),d.remove(k.currentWorkGroup.current.uuid,b.userUuid)}function j(a,b){a.role=b,b===l&&(a.admin=!0,a.readonly=!1),b===n&&(a.admin=!1,a.readonly=!0),b===m&&(a.admin=!1,a.readonly=!1),d.update(k.currentWorkGroup.current.uuid,a).then(function(b){a=b})}var k=this;const l="admin",m="normal",n="readonly";k.addMember=f,k.changeFilterByProperty=g,k.changePropertyOrderBy=h,k.membersRights=c.roles,k.membersSearchFilter={$:"",role:""},k.propertyFilter="",k.propertyOrderBy="firstName",k.propertyOrderByAsc=!0,k.removeMember=i,k.updateMember=j,e()}angular.module("linshare.sharedSpace").controller("WorkGroupMembersController",a),a.$inject=["$filter","$scope","lsAppConfig","workgroupMembersRestService"]}(),function(){function a(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s){function t(){g.addPart("filesList"),g.addPart("sharedspace"),f(["ACTION.NEW_FOLDER","GROWL_ALERT.ACTION.COPY","GROWL_ALERT.ERROR.DELETE_ERROR.26006","GROWL_ALERT.ACTION.DELETE_SINGULAR","SWEET_ALERT.ON_MULTIPLE_DOWNLOAD.TITLE","SWEET_ALERT.ON_MULTIPLE_DOWNLOAD.TEXT","SWEET_ALERT.ON_MULTIPLE_DOWNLOAD.CONFIRM_BUTTON","GROWL_ALERT.ERROR.RENAME_FILE","GROWL_ALERT.ERROR.RENAME_FOLDER","GROWL_ALERT.ERROR.RENAME_INVALID"]).then(function(a){X=a["ACTION.NEW_FOLDER"],S=a["GROWL_ALERT.ACTION.COPY"],T=a["GROWL_ALERT.ERROR.DELETE_ERROR.26006"],U=a["GROWL_ALERT.ACTION.DELETE_SINGULAR"],Y=a["SWEET_ALERT.ON_MULTIPLE_DOWNLOAD.TITLE"],Z=a["SWEET_ALERT.ON_MULTIPLE_DOWNLOAD.TEXT"],aa=a["SWEET_ALERT.ON_MULTIPLE_DOWNLOAD.CONFIRM_BUTTON"],V=a["GROWL_ALERT.ERROR.RENAME_FILE"],W=a["GROWL_ALERT.ERROR.RENAME_FOLDER"]}),A(),K(),C(),H()}function u(a){P.nodesList.push(a),b.isNewAddition=!0,P.tableParamsService.reloadTableParams(),e(function(){b.isNewAddition=!1},0)}function v(a){a._from===P.workgroupPage&&a.folderDetails.workgroupUuid===P.folderDetails.workgroupUuid&&a.folderDetails.folderUuid===P.folderDetails.folderUuid&&a.asyncUploadDeferred.promise.then(function(a){u(a.linshareDocument)})}function w(a,b){var c=b||P.folderDetails.folderUuid;s.copy(P.folderDetails.workgroupUuid,a,c).then(function(a){var b=s.restangularize(a,P.folderDetails.workgroupUuid);p.success(S),u(b)})}function x(){if(P.canCreateFolder){var a=s.restangularize({name:X,parent:P.folderDetails.folderUuid,type:R},P.folderDetails.workgroupUuid);s.create(P.folderDetails.workgroupUuid,a,!0).then(function(b){a.name=b.name,a.parent=b.parent,a.type=b.type,P.canCreateFolder=!1,P.nodesList.push(a),P.tableParamsService.reloadTableParams(),e(function(){J(a,'td[uuid=""] .file-name-disp')},0)})}}function y(a){i.deleteDocuments(a,function(a){_.forEach(a,function(a){a.remove().then(function(){p.success(U),_.remove(P.nodesList,a),_.remove(P.selectedDocuments,a),P.tableParamsService.reloadTableParams()},function(a){400===a.status&&26006===a.data.errCode&&p.error(T)})})})}function z(a){s.download(P.folderDetails.workgroupUuid,a.uuid).then(function(b){i.downloadFileFromResponse(b,a.name,a.type)})}function A(){s.get(P.folderDetails.workgroupUuid,P.folderDetails.folderUuid,!0).then(function(a){P.breadcrumb=a.treePath||[],P.breadcrumb.shift(),G()||P.breadcrumb.push({name:P.folderDetails.folderName,uuid:P.folderDetails.folderUuid})})}function B(c){var d=a.defer(),e={};return s.get(P.folderDetails.workgroupUuid,c.uuid).then(function(a){e=a,a.hasThumbnail?s.thumbnail(P.folderDetails.workgroupUuid,c.uuid).then(function(a){e.thumbnail=a}):delete e.thumbnail,s.getAudit(P.folderDetails.workgroupUuid,c.uuid).then(function(a){h.generateAllDetails(b.userLogged.uuid,a.plain()).then(function(a){e.auditActions=a,d.resolve(e)})})},function(a){d.reject(a)}),d.promise}function C(){r.get(P.folderDetails.workgroupUuid,b.userLogged.uuid).then(function(a){P.currentWorkgroupMember=a,P.fabButton.actions.push({action:null,label:"ADD_FILES_DROPDOWN.UPLOAD_FILE",icon:"ls-upload-fill",flowBtn:!0,hide:P.currentWorkgroupMember.readonly})})}function D(a,b){var d,e=!0,f=!!_.isNil(a)||!P.isDocument(a.type);_.isNil(a)||b||(d=$("td[uuid="+a.uuid+"]").find(".file-name-disp"),e="false"===angular.element(d).attr("contenteditable"));var g={workgroupUuid:P.folderDetails.workgroupUuid,workgroupName:P.folderDetails.workgroupName.trim(),parentUuid:a?a.parent:null,folderUuid:a?a.uuid:null,folderName:a?a.name.trim():null};f&&e&&(_.isNil(g.folderUuid)?c.go("sharedspace.workgroups.root",g):c.go("sharedspace.workgroups.folder",g))}function E(a,b){a?c.go("sharedspace.all"):P.goToFolder(b,!0)}function F(a){return a===Q}function G(){var a=P.folderDetails.folderUuid;return _.isNil(a)||""===a}function H(){o.initTableParams(P.nodesList,P.paramFilter,P.folderDetails.uploadedFileUuid).then(function(a){P.tableParamsService=o,P.tableParams=o.getTableParams(),P.lengthOfSelectedDocuments=o.lengthOfSelectedDocuments,P.resetSelectedDocuments=o.resetSelectedItems,P.selectedDocuments=o.getSelectedItemsList(),P.selectDocumentsOnCurrentPage=o.tableSelectAll,P.addSelectedDocument=o.toggleItemSelection,P.sortDropdownSetActive=o.tableSort,P.toggleFilterBySelectedFiles=o.isolateSelection,P.flagsOnSelectedPages=o.getFlagsOnSelectedPages(),P.toggleSelectedSort=o.getToggleSelectedSort(),_.isNil(a.itemToSelect)||P.showSelectedNodeDetails(a.itemToSelect)})}function I(a){b.mainVm.sidebar.setData(P),b.mainVm.sidebar.setContent(a),b.mainVm.sidebar.show()}function J(a,b){b=b||"td[uuid="+a.uuid+"] .file-name-disp",k.rename(a,b).then(function(b){var c=_.findIndex(P.nodesList,a);P.nodesList[c]=b,a.name!==b.name?e(function(){J(b,"td[uuid="+b.uuid+"] .file-name-disp"),p.error(W)},0):P.canCreateFolder=!0})["catch"](function(c){switch(c.data.errCode){case 26445:case 28005:var d=F(a.type)?V:W;p.error(d),J(a,b);break;case m.CANCELLED_BY_USER:a.uuid||P.nodesList.splice(_.findIndex(P.nodesList,a),1),P.canCreateFolder=!0}})["finally"](function(){P.tableParamsService.reloadTableParams()})}function K(){P.fabButton={toolbar:{activate:!0,label:"BOUTON_ADD_FILE_TITLE"},actions:[{action:null,label:"WORKGROUPS_LIST.SHARED_FOLDER",icon:"ls-workgroup disabled-work-in-progress",disabled:!0,hide:l.linshareModeProduction},{action:function(){return P.showWorkgroupDetails(!0)},label:"WORKGROUPS_LIST.ADD_A_MEMBER",icon:"ls-add-user"},{action:function(){return P.createFolder()},label:"WORKGROUPS_LIST.FOLDER",icon:"ls-folder"},{action:null,label:"WORKGROUPS_LIST.UPLOAD_REQUEST",icon:"ls-upload-request disabled-work-in-progress",disabled:!0,hide:l.linshareModeProduction},{action:null,label:"WORKGROUPS_LIST.PROJECT",icon:"ls-project disabled-work-in-progress",disabled:!0,hide:l.linshareModeProduction}]}}function L(a){P.getNodeDetails(a).then(function(a){P.currentSelectedDocument.current=a,P.mdtabsSelection.selectedIndex=0,P.loadSidebarContent(P.workgroupNode)})}function M(a){q.get(P.folderDetails.workgroupUuid).then(function(c){q.getAudit(P.folderDetails.workgroupUuid).then(function(d){h.generateAllDetails(b.userLogged.uuid,d.plain()).then(function(b){c.auditActions=b,P.currentSelectedDocument.current=c,P.mdtabsSelection.selectedIndex=a?1:0,P.loadSidebarContent(P.workgroupPage)})})})}function N(){swal({title:Y,text:Z,type:"error",confirmButtonColor:"#05b1ff",confirmButtonText:aa,closeOnConfirm:!0})}function O(){P.searchMobileDropdown?(angular.element("#drop-area").removeClass("search-toggled"),angular.element("#searchInMobileFiles").val("").trigger("change")):(angular.element("#drop-area").addClass("search-toggled"),angular.element("#top-search-wrap input").focus()),P.searchMobileDropdown=!P.searchMobileDropdown}var P=this;const Q="DOCUMENT",R="FOLDER";var S,T,U,V,W,X,Y,Z,aa;P.addUploadedDocument=v,P.breadcrumb=[],P.canCreateFolder=!0,P.copyNode=w,P.createFolder=x,P.currentPage="workgroup_nodes",P.currentSelectedDocument={},P.deleteNodes=y,P.downloadFile=z,P.flowUploadService=j,P.folderDetails=d,P.getNodeDetails=B,P.goToFolder=D,P.goToPreviousFolder=E,P.isDocument=F,P.isRootFolder=G,P.loadSidebarContent=I,P.mdtabsSelection={selectedIndex:0},P.nodesList=n,P.paramFilter={name:""},P.renameNode=J,P.showSelectedNodeDetails=L,P.showWorkgroupDetails=M,P.unavailableMultiDownload=N,P.workgroupPage=l.workgroupPage,P.workgroupNode=l.workgroupNode,t(),P.toggleSearchState=O}angular.module("linshare.sharedSpace").controller("WorkgroupNodesController",a),a.$inject=["$q","$scope","$state","$stateParams","$timeout","$translate","$translatePartialLoader","auditDetailsService","documentUtilsService","flowUploadService","itemUtilsService","lsAppConfig","lsErrorCode","nodesList","tableParamsService","toastService","workgroupRestService","workgroupMembersRestService","workgroupNodesRestService"]}();var materialAdmin=angular.module("materialAdmin",["ngAnimate","ngResource","ui.router","ui.bootstrap","angular-loading-bar","oc.lazyLoad","nouislider","ngTable"]);angular.module("materialAdmin").run(["$templateCache",function(a){a.put("template/chat.html",'<div class="chat-search"><div class="fg-line"><input type="text" class="form-control" placeholder="Search People"></div></div><div class="listview"><a class="lv-item" href=""><div class="media"><div class="pull-left p-relative"><img class="lv-img-sm" src="img/profile-pics/2.jpg" alt=""> <i class="chat-status-busy"></i></div><div class="media-body"><div class="lv-title">Jonathan Morris</div><small class="lv-small">Available</small></div></div></a> <a class="lv-item" href=""><div class="media"><div class="pull-left"><img class="lv-img-sm" src="img/profile-pics/1.jpg" alt=""></div><div class="media-body"><div class="lv-title">David Belle</div><small class="lv-small">Last seen 3 hours ago</small></div></div></a> <a class="lv-item" href=""><div class="media"><div class="pull-left p-relative"><img class="lv-img-sm" src="img/profile-pics/3.jpg" alt=""> <i class="chat-status-online"></i></div><div class="media-body"><div class="lv-title">Fredric Mitchell Jr.</div><small class="lv-small">Availble</small></div></div></a> <a class="lv-item" href=""><div class="media"><div class="pull-left p-relative"><img class="lv-img-sm" src="img/profile-pics/4.jpg" alt=""> <i class="chat-status-online"></i></div><div class="media-body"><div class="lv-title">Glenn Jecobs</div><small class="lv-small">Availble</small></div></div></a> <a class="lv-item" href=""><div class="media"><div class="pull-left"><img class="lv-img-sm" src="img/profile-pics/5.jpg" alt=""></div><div class="media-body"><div class="lv-title">Bill Phillips</div><small class="lv-small">Last seen 3 days ago</small></div></div></a> <a class="lv-item" href=""><div class="media"><div class="pull-left"><img class="lv-img-sm" src="img/profile-pics/6.jpg" alt=""></div><div class="media-body"><div class="lv-title">Wendy Mitchell</div><small class="lv-small">Last seen 2 minutes ago</small></div></div></a> <a class="lv-item" href=""><div class="media"><div class="pull-left p-relative"><img class="lv-img-sm" src="img/profile-pics/7.jpg" alt=""> <i class="chat-status-busy"></i></div><div class="media-body"><div class="lv-title">Teena Bell Ann</div><small class="lv-small">Busy</small></div></div></a></div>'),a.put("template/footer.html",'Copyright &copy; 2015 Material Admin<ul class="f-menu"><li><a href="">Home</a></li><li><a href="">Dashboard</a></li><li><a href="">Reports</a></li><li><a href="">Support</a></li><li><a href="">Contact</a></li></ul>'),a.put("template/header-image-logo.html",'<ul class="header-inner clearfix"><li id="menu-trigger" data-target="mainmenu" data-toggle-sidebar data-model-left="mactrl.sidebarToggle.left" data-ng-class="{ \'open\': mactrl.sidebarToggle.left === true }"><div class="line-wrap"><div class="line top"></div><div class="line center"></div><div class="line bottom"></div></div></li><li class="hidden-xs"><a href="index.html" class="m-l-10" data-ng-click="mactrl.sidebarStat($event)"><img src="img/demo/logo.png" alt=""></a></li><li class="pull-right"><ul class="top-menu"><li id="top-search" data-ng-click="hctrl.openSearch()"><a href=""><span class="tm-label">Search</span></a></li><li class="dropdown" uib-dropdown><a uib-dropdown-toggle href=""><span class="tm-label">Messages</span></a><div class="dropdown-menu dropdown-menu-lg pull-right"><div class="listview"><div class="lv-header">Messages</div><div class="lv-body"><a class="lv-item" href=""><div class="media"><div class="pull-left"><img class="lv-img-sm" src="img/profile-pics/1.jpg" alt=""></div><div class="media-body"><div class="lv-title">David Belle</div><small class="lv-small">Cum sociis natoque penatibus et magnis dis parturient montes</small></div></div></a> <a class="lv-item" href=""><div class="media"><div class="pull-left"><img class="lv-img-sm" src="img/profile-pics/2.jpg" alt=""></div><div class="media-body"><div class="lv-title">Jonathan Morris</div><small class="lv-small">Nunc quis diam diamurabitur at dolor elementum, dictum turpis vel</small></div></div></a> <a class="lv-item" href=""><div class="media"><div class="pull-left"><img class="lv-img-sm" src="img/profile-pics/3.jpg" alt=""></div><div class="media-body"><div class="lv-title">Fredric Mitchell Jr.</div><small class="lv-small">Phasellus a ante et est ornare accumsan at vel magnauis blandit turpis at augue ultricies</small></div></div></a> <a class="lv-item" href=""><div class="media"><div class="pull-left"><img class="lv-img-sm" src="img/profile-pics/4.jpg" alt=""></div><div class="media-body"><div class="lv-title">Glenn Jecobs</div><small class="lv-small">Ut vitae lacus sem ellentesque maximus, nunc sit amet varius dignissim, dui est consectetur neque</small></div></div></a> <a class="lv-item" href=""><div class="media"><div class="pull-left"><img class="lv-img-sm" src="img/profile-pics/4.jpg" alt=""></div><div class="media-body"><div class="lv-title">Bill Phillips</div><small class="lv-small">Proin laoreet commodo eros id faucibus. Donec ligula quam, imperdiet vel ante placerat</small></div></div></a></div><a class="lv-footer" href="">View All</a></div></div></li><li class="dropdown hidden-xs" uib-dropdown><a uib-dropdown-toggle href=""><span class="tm-label">Notification</span></a><div class="dropdown-menu dropdown-menu-lg pull-right"><div class="listview" id="notifications"><div class="lv-header">Notification<ul class="actions"><li class="dropdown"><a href="" data-clear="notification"><i class="zmdi zmdi-check-all"></i></a></li></ul></div><div class="lv-body"><a class="lv-item" href=""><div class="media"><div class="pull-left"><img class="lv-img-sm" src="img/profile-pics/1.jpg" alt=""></div><div class="media-body"><div class="lv-title">David Belle</div><small class="lv-small">Cum sociis natoque penatibus et magnis dis parturient montes</small></div></div></a> <a class="lv-item" href=""><div class="media"><div class="pull-left"><img class="lv-img-sm" src="img/profile-pics/2.jpg" alt=""></div><div class="media-body"><div class="lv-title">Jonathan Morris</div><small class="lv-small">Nunc quis diam diamurabitur at dolor elementum, dictum turpis vel</small></div></div></a> <a class="lv-item" href=""><div class="media"><div class="pull-left"><img class="lv-img-sm" src="img/profile-pics/3.jpg" alt=""></div><div class="media-body"><div class="lv-title">Fredric Mitchell Jr.</div><small class="lv-small">Phasellus a ante et est ornare accumsan at vel magnauis blandit turpis at augue ultricies</small></div></div></a> <a class="lv-item" href=""><div class="media"><div class="pull-left"><img class="lv-img-sm" src="img/profile-pics/4.jpg" alt=""></div><div class="media-body"><div class="lv-title">Glenn Jecobs</div><small class="lv-small">Ut vitae lacus sem ellentesque maximus, nunc sit amet varius dignissim, dui est consectetur neque</small></div></div></a> <a class="lv-item" href=""><div class="media"><div class="pull-left"><img class="lv-img-sm" src="img/profile-pics/4.jpg" alt=""></div><div class="media-body"><div class="lv-title">Bill Phillips</div><small class="lv-small">Proin laoreet commodo eros id faucibus. Donec ligula quam, imperdiet vel ante placerat</small></div></div></a></div><a class="lv-footer" href="">View Previous</a></div></div></li><li class="hidden-xs"><a target="_blank" href="https://wrapbootstrap.com/theme/superflat-simple-responsive-admin-theme-WB082P91H"><span class="tm-label">Link</span></a></li></ul></li></ul><!-- Top Search Content --><div id="top-search-wrap"><div class="tsw-inner"><i id="top-search-close" data-ng-click="hctrl.closeSearch()" class="zmdi zmdi-arrow-left"></i> <input type="text"></div></div>'),a.put("template/header-textual-menu.html",'<ul class="header-inner clearfix"><li id="menu-trigger" data-target="mainmenu" data-toggle-sidebar data-model-left="mactrl.sidebarToggle.left" data-ng-class="{ \'open\': mactrl.sidebarToggle.left === true }"><div class="line-wrap"><div class="line top"></div><div class="line center"></div><div class="line bottom"></div></div></li><li class="logo hidden-xs"><a data-ui-sref="home" data-ng-click="mactrl.sidebarStat($event)">Material Admin</a></li><li class="pull-right"><ul class="top-menu"><li id="top-search" data-ng-click="hctrl.openSearch()"><a href=""><span class="tm-label">Search</span></a></li><li class="dropdown" uib-dropdown><a uib-dropdown-toggle href=""><span class="tm-label">Messages</span></a><div class="dropdown-menu dropdown-menu-lg pull-right"><div class="listview"><div class="lv-header">Messages</div><div class="lv-body"><a class="lv-item" href=""><div class="media"><div class="pull-left"><img class="lv-img-sm" src="img/profile-pics/1.jpg" alt=""></div><div class="media-body"><div class="lv-title">David Belle</div><small class="lv-small">Cum sociis natoque penatibus et magnis dis parturient montes</small></div></div></a> <a class="lv-item" href=""><div class="media"><div class="pull-left"><img class="lv-img-sm" src="img/profile-pics/2.jpg" alt=""></div><div class="media-body"><div class="lv-title">Jonathan Morris</div><small class="lv-small">Nunc quis diam diamurabitur at dolor elementum, dictum turpis vel</small></div></div></a> <a class="lv-item" href=""><div class="media"><div class="pull-left"><img class="lv-img-sm" src="img/profile-pics/3.jpg" alt=""></div><div class="media-body"><div class="lv-title">Fredric Mitchell Jr.</div><small class="lv-small">Phasellus a ante et est ornare accumsan at vel magnauis blandit turpis at augue ultricies</small></div></div></a> <a class="lv-item" href=""><div class="media"><div class="pull-left"><img class="lv-img-sm" src="img/profile-pics/4.jpg" alt=""></div><div class="media-body"><div class="lv-title">Glenn Jecobs</div><small class="lv-small">Ut vitae lacus sem ellentesque maximus, nunc sit amet varius dignissim, dui est consectetur neque</small></div></div></a> <a class="lv-item" href=""><div class="media"><div class="pull-left"><img class="lv-img-sm" src="img/profile-pics/4.jpg" alt=""></div><div class="media-body"><div class="lv-title">Bill Phillips</div><small class="lv-small">Proin laoreet commodo eros id faucibus. Donec ligula quam, imperdiet vel ante placerat</small></div></div></a></div><a class="lv-footer" href="">View All</a></div></div></li><li class="dropdown hidden-xs" uib-dropdown><a uib-dropdown-toggle href=""><span class="tm-label">Notification</span></a><div class="dropdown-menu dropdown-menu-lg pull-right"><div class="listview" id="notifications"><div class="lv-header">Notification<ul class="actions"><li class="dropdown"><a href="" data-clear="notification"><i class="zmdi zmdi-check-all"></i></a></li></ul></div><div class="lv-body"><a class="lv-item" href=""><div class="media"><div class="pull-left"><img class="lv-img-sm" src="img/profile-pics/1.jpg" alt=""></div><div class="media-body"><div class="lv-title">David Belle</div><small class="lv-small">Cum sociis natoque penatibus et magnis dis parturient montes</small></div></div></a> <a class="lv-item" href=""><div class="media"><div class="pull-left"><img class="lv-img-sm" src="img/profile-pics/2.jpg" alt=""></div><div class="media-body"><div class="lv-title">Jonathan Morris</div><small class="lv-small">Nunc quis diam diamurabitur at dolor elementum, dictum turpis vel</small></div></div></a> <a class="lv-item" href=""><div class="media"><div class="pull-left"><img class="lv-img-sm" src="img/profile-pics/3.jpg" alt=""></div><div class="media-body"><div class="lv-title">Fredric Mitchell Jr.</div><small class="lv-small">Phasellus a ante et est ornare accumsan at vel magnauis blandit turpis at augue ultricies</small></div></div></a> <a class="lv-item" href=""><div class="media"><div class="pull-left"><img class="lv-img-sm" src="img/profile-pics/4.jpg" alt=""></div><div class="media-body"><div class="lv-title">Glenn Jecobs</div><small class="lv-small">Ut vitae lacus sem ellentesque maximus, nunc sit amet varius dignissim, dui est consectetur neque</small></div></div></a> <a class="lv-item" href=""><div class="media"><div class="pull-left"><img class="lv-img-sm" src="img/profile-pics/4.jpg" alt=""></div><div class="media-body"><div class="lv-title">Bill Phillips</div><small class="lv-small">Proin laoreet commodo eros id faucibus. Donec ligula quam, imperdiet vel ante placerat</small></div></div></a></div><a class="lv-footer" href="">View Previous</a></div></div></li><li class="hidden-xs"><a target="_blank" href="https://wrapbootstrap.com/theme/superflat-simple-responsive-admin-theme-WB082P91H"><span class="tm-label">Link</span></a></li></ul></li></ul><!-- Top Search Content --><div id="top-search-wrap"><div class="tsw-inner"><i id="top-search-close" data-ng-click="hctrl.closeSearch()" class="zmdi zmdi-arrow-left"></i> <input type="text"></div></div>'),
a.put("template/header-top-menu.html",'<ul class="header-inner clearfix"><li id="menu-trigger" data-trigger=".ha-menu" class="visible-xs"><div class="line-wrap"><div class="line top"></div><div class="line center"></div><div class="line bottom"></div></div></li><li class="logo hidden-xs"><a data-ui-sref="home">Material Admin</a></li><li class="pull-right"><ul class="top-menu"><li class="dropdown" uib-dropdown><a uib-dropdown-toggle href=""><i class="tmn-counts">6</i> <i class="tm-icon zmdi zmdi-email"></i></a><div class="dropdown-menu dropdown-menu-lg pull-right"><div class="listview"><div class="lv-header">Messages</div><div class="lv-body"><a class="lv-item" href=""><div class="media"><div class="pull-left"><img class="lv-img-sm" src="img/profile-pics/1.jpg" alt=""></div><div class="media-body"><div class="lv-title">David Belle</div><small class="lv-small">Cum sociis natoque penatibus et magnis dis parturient montes</small></div></div></a> <a class="lv-item" href=""><div class="media"><div class="pull-left"><img class="lv-img-sm" src="img/profile-pics/2.jpg" alt=""></div><div class="media-body"><div class="lv-title">Jonathan Morris</div><small class="lv-small">Nunc quis diam diamurabitur at dolor elementum, dictum turpis vel</small></div></div></a> <a class="lv-item" href=""><div class="media"><div class="pull-left"><img class="lv-img-sm" src="img/profile-pics/3.jpg" alt=""></div><div class="media-body"><div class="lv-title">Fredric Mitchell Jr.</div><small class="lv-small">Phasellus a ante et est ornare accumsan at vel magnauis blandit turpis at augue ultricies</small></div></div></a> <a class="lv-item" href=""><div class="media"><div class="pull-left"><img class="lv-img-sm" src="img/profile-pics/4.jpg" alt=""></div><div class="media-body"><div class="lv-title">Glenn Jecobs</div><small class="lv-small">Ut vitae lacus sem ellentesque maximus, nunc sit amet varius dignissim, dui est consectetur neque</small></div></div></a> <a class="lv-item" href=""><div class="media"><div class="pull-left"><img class="lv-img-sm" src="img/profile-pics/4.jpg" alt=""></div><div class="media-body"><div class="lv-title">Bill Phillips</div><small class="lv-small">Proin laoreet commodo eros id faucibus. Donec ligula quam, imperdiet vel ante placerat</small></div></div></a></div><a class="lv-footer" href="">View All</a></div></div></li><li class="dropdown" uib-dropdown><a uib-dropdown-toggle><i class="tmn-counts">9</i> <i class="tm-icon zmdi zmdi-notifications"></i></a><div class="dropdown-menu dropdown-menu-lg pull-right"><div class="listview" id="notifications"><div class="lv-header">Notification<ul class="actions"><li class="dropdown"><a href="" data-clear="notification"><i class="zmdi zmdi-check-all"></i></a></li></ul></div><div class="lv-body"><a class="lv-item" href=""><div class="media"><div class="pull-left"><img class="lv-img-sm" src="img/profile-pics/1.jpg" alt=""></div><div class="media-body"><div class="lv-title">David Belle</div><small class="lv-small">Cum sociis natoque penatibus et magnis dis parturient montes</small></div></div></a> <a class="lv-item" href=""><div class="media"><div class="pull-left"><img class="lv-img-sm" src="img/profile-pics/2.jpg" alt=""></div><div class="media-body"><div class="lv-title">Jonathan Morris</div><small class="lv-small">Nunc quis diam diamurabitur at dolor elementum, dictum turpis vel</small></div></div></a> <a class="lv-item" href=""><div class="media"><div class="pull-left"><img class="lv-img-sm" src="img/profile-pics/3.jpg" alt=""></div><div class="media-body"><div class="lv-title">Fredric Mitchell Jr.</div><small class="lv-small">Phasellus a ante et est ornare accumsan at vel magnauis blandit turpis at augue ultricies</small></div></div></a> <a class="lv-item" href=""><div class="media"><div class="pull-left"><img class="lv-img-sm" src="img/profile-pics/4.jpg" alt=""></div><div class="media-body"><div class="lv-title">Glenn Jecobs</div><small class="lv-small">Ut vitae lacus sem ellentesque maximus, nunc sit amet varius dignissim, dui est consectetur neque</small></div></div></a> <a class="lv-item" href=""><div class="media"><div class="pull-left"><img class="lv-img-sm" src="img/profile-pics/4.jpg" alt=""></div><div class="media-body"><div class="lv-title">Bill Phillips</div><small class="lv-small">Proin laoreet commodo eros id faucibus. Donec ligula quam, imperdiet vel ante placerat</small></div></div></a></div><a class="lv-footer" href="">View Previous</a></div></div></li><li class="dropdown" uib-dropdown><a uib-dropdown-toggle href=""><i class="tmn-counts">2</i> <i class="tm-icon zmdi zmdi-view-list-alt"></i></a><div class="dropdown-menu pull-right dropdown-menu-lg"><div class="listview"><div class="lv-header">Tasks</div><div class="lv-body"><div class="lv-item"><div class="lv-title m-b-5">HTML5 Validation Report</div><div class="progress"><div class="progress-bar" role="progressbar" aria-valuenow="95" aria-valuemin="0" aria-valuemax="100" style="width: 95%"><span class="sr-only">95% Complete (success)</span></div></div></div><div class="lv-item"><div class="lv-title m-b-5">Google Chrome Extension</div><div class="progress"><div class="progress-bar progress-bar-success" role="progressbar" aria-valuenow="80" aria-valuemin="0" aria-valuemax="100" style="width: 80%"><span class="sr-only">80% Complete (success)</span></div></div></div><div class="lv-item"><div class="lv-title m-b-5">Social Intranet Projects</div><div class="progress"><div class="progress-bar progress-bar-info" role="progressbar" aria-valuenow="20" aria-valuemin="0" aria-valuemax="100" style="width: 20%"><span class="sr-only">20% Complete</span></div></div></div><div class="lv-item"><div class="lv-title m-b-5">Bootstrap Admin Template</div><div class="progress"><div class="progress-bar progress-bar-warning" role="progressbar" aria-valuenow="60" aria-valuemin="0" aria-valuemax="100" style="width: 60%"><span class="sr-only">60% Complete (warning)</span></div></div></div><div class="lv-item"><div class="lv-title m-b-5">Youtube Client App</div><div class="progress"><div class="progress-bar progress-bar-danger" role="progressbar" aria-valuenow="80" aria-valuemin="0" aria-valuemax="100" style="width: 80%"><span class="sr-only">80% Complete (danger)</span></div></div></div></div><a class="lv-footer" href="">View All</a></div></div></li><li class="dropdown" uib-dropdown><a uib-dropdown-toggle href=""><i class="tm-icon zmdi zmdi-more-vert"></i></a><ul class="dropdown-menu dm-icon pull-right"><li class="hidden-xs"><a data-ng-click="hctrl.fullScreen()" href=""><i class="zmdi zmdi-fullscreen"></i> Toggle Fullscreen</a></li><li><a data-ng-click="hctrl.clearLocalStorage()" href=""><i class="zmdi zmdi-delete"></i> Clear Local Storage</a></li><li><a href=""><i class="zmdi zmdi-face"></i> Privacy Settings</a></li><li><a href=""><i class="zmdi zmdi-settings"></i> Other Settings</a></li></ul></li></ul></li></ul><div class="search"><div class="fg-line"><input type="text" class="form-control" placeholder="Search..."></div></div><nav class="ha-menu"><ul><li class="waves-effect" data-ui-sref-active="active"><a data-ui-sref="home" data-ng-click="mactrl.sidebarStat($event)">Home</a></li><li class="dropdown" uib-dropdown data-ng-class="{ \'active\': mactrl.$state.includes(\'headers\') }"><div class="waves-effect" uib-dropdown-toggle>Headers</div><ul class="dropdown-menu"><li data-ui-sref-active="active"><a data-ui-sref="headers.textual-menu">Textual menu</a></li><li data-ui-sref-active="active"><a data-ui-sref="headers.image-logo">Image logo</a></li><li data-ui-sref-active="active"><a data-ui-sref="headers.mainmenu-on-top">Mainmenu on top</a></li></ul></li><li class="waves-effect" data-ui-sref-active="active"><a data-ui-sref="typography">Typography</a></li><li class="dropdown" uib-dropdown><div class="waves-effect" uib-dropdown-toggle>Widgets</div><ul class="dropdown-menu"><li data-ui-sref-active="active"><a data-ui-sref="widgets.widget-templates">Templates</a></li><li data-ui-sref-active="active"><a data-ui-sref="widgets.widgets">Widgets</a></li></ul></li><li class="dropdown" uib-dropdown><div class="waves-effect" uib-dropdown-toggle>Tables</div><ul class="dropdown-menu"><li data-ui-sref-active="active"><a data-ui-sref="tables.tables">Normal Tables</a></li><li data-ui-sref-active="active"><a data-ui-sref="tables.data-table">Data Tables</a></li></ul></li><li class="dropdown" uib-dropdown><div class="waves-effect" uib-dropdown-toggle>Forms</div><ul class="dropdown-menu"><li data-ui-sref-active="active"><a data-ui-sref="form.basic-form-elements">Basic Form Elements</a></li><li data-ui-sref-active="active"><a data-ui-sref="form.form-components">Form Components</a></li><li data-ui-sref-active="active"><a data-ui-sref="form.form-examples">Form Examples</a></li><li data-ui-sref-active="active"><a data-ui-sref="form.form-validations">Form Validation</a></li></ul></li><li class="dropdown" uib-dropdown><div class="waves-effect" uib-dropdown-toggle>User Interface</div><ul class="dropdown-menu"><li data-ui-sref-active="active"><a data-ui-sref="user-interface.ui-bootstrap">UI Bootstrap</a></li><li data-ui-sref-active="active"><a data-ui-sref="user-interface.colors">Colors</a></li><li data-ui-sref-active="active"><a data-ui-sref="user-interface.animations">Animations</a></li><li data-ui-sref-active="active"><a data-ui-sref="user-interface.box-shadow">Box Shadow</a></li><li data-ui-sref-active="active"><a data-ui-sref="user-interface.buttons">Buttons</a></li><li data-ui-sref-active="active"><a data-ui-sref="user-interface.icons">Icons</a></li><li data-ui-sref-active="active"><a data-ui-sref="user-interface.alerts">Alerts</a></li><li data-ui-sref-active="active"><a data-ui-sref="user-interface.preloaders">Preloaders</a></li><li data-ui-sref-active="active"><a data-ui-sref="user-interface.notifications-dialogs">Notifications & Dialogs</a></li><li data-ui-sref-active="active"><a data-ui-sref="user-interface.media">Media</a></li><li data-ui-sref-active="active"><a data-ui-sref="user-interface.other-components">Others</a></li></ul></li><li class="dropdown" uib-dropdown><div class="waves-effect" uib-dropdown-toggle>Charts</div><ul class="dropdown-menu"><li data-ui-sref-active="active"><a data-ui-sref="charts.flot-charts">Flot Charts</a></li><li data-ui-sref-active="active"><a data-ui-sref="charts.other-charts">Other Charts</a></li></ul></li><li class="waves-effect" data-ui-sref-active="active"><a data-ui-sref="calendar">Calendar</a></li></ul></nav><div class="skin-switch dropdown hidden-xs" uib-dropdown><button uib-dropdown-toggle class="btn ss-icon"><i class="zmdi zmdi-palette"></i></button><div class="dropdown-menu"><span ng-repeat="w in mactrl.skinList" class="ss-skin bgm-{{ w }}" data-ng-click="mactrl.skinSwitch(w)"></span></div></div>'),a.put("template/header.html",'<ul class="header-inner clearfix"><li id="menu-trigger" data-target="mainmenu" data-toggle-sidebar data-model-left="mactrl.sidebarToggle.left" data-ng-class="{ \'open\': mactrl.sidebarToggle.left === true }"><div class="line-wrap"><div class="line top"></div><div class="line center"></div><div class="line bottom"></div></div></li><li class="logo hidden-xs"><a data-ui-sref="home" data-ng-click="mactrl.sidebarStat($event)">Material Admin</a></li><li class="pull-right"><ul class="top-menu"><li id="toggle-width"><div class="toggle-switch"><input id="tw-switch" type="checkbox" hidden data-change-layout="mactrl.layoutType"><label for="tw-switch" class="ts-helper"></label></div></li><li id="top-search"><a href="" data-ng-click="hctrl.openSearch()"><i class="tm-icon zmdi zmdi-search"></i></a></li><li class="dropdown" uib-dropdown><a uib-dropdown-toggle href=""><i class="tm-icon zmdi zmdi-email"></i> <i class="tmn-counts">6</i></a><div class="dropdown-menu dropdown-menu-lg stop-propagate pull-right"><div class="listview"><div class="lv-header">Messages</div><div class="lv-body"><a class="lv-item" ng-href="" ng-repeat="w in hctrl.messageResult.list"><div class="media"><div class="pull-left"><img class="lv-img-sm" ng-src="img/profile-pics/{{ w.img }}" alt=""></div><div class="media-body"><div class="lv-title">{{ w.user }}</div><small class="lv-small">{{ w.text }}</small></div></div></a></div><div class="clearfix"></div><a class="lv-footer" href="">View All</a></div></div></li><li class="dropdown" uib-dropdown><a uib-dropdown-toggle href=""><i class="tm-icon zmdi zmdi-notifications"></i> <i class="tmn-counts">9</i></a><div class="dropdown-menu dropdown-menu-lg stop-propagate pull-right"><div class="listview" id="notifications"><div class="lv-header">Notification<ul class="actions"><li><a href="" data-ng-click="hctrl.clearNotification($event)"><i class="zmdi zmdi-check-all"></i></a></li></ul></div><div class="lv-body"><a class="lv-item" ng-href="" ng-repeat="w in hctrl.messageResult.list"><div class="media"><div class="pull-left"><img class="lv-img-sm" ng-src="img/profile-pics/{{ w.img }}" alt=""></div><div class="media-body"><div class="lv-title">{{ w.user }}</div><small class="lv-small">{{ w.text }}</small></div></div></a></div><div class="clearfix"></div><a class="lv-footer" href="">View Previous</a></div></div></li><li class="dropdown hidden-xs" uib-dropdown><a uib-dropdown-toggle href=""><i class="tm-icon zmdi zmdi-view-list-alt"></i> <i class="tmn-counts">2</i></a><div class="dropdown-menu pull-right dropdown-menu-lg"><div class="listview"><div class="lv-header">Tasks</div><div class="lv-body"><div class="lv-item"><div class="lv-title m-b-5">HTML5 Validation Report</div><div class="progress"><div class="progress-bar" role="progressbar" aria-valuenow="95" aria-valuemin="0" aria-valuemax="100" style="width: 95%"><span class="sr-only">95% Complete (success)</span></div></div></div><div class="lv-item"><div class="lv-title m-b-5">Google Chrome Extension</div><div class="progress"><div class="progress-bar progress-bar-success" role="progressbar" aria-valuenow="80" aria-valuemin="0" aria-valuemax="100" style="width: 80%"><span class="sr-only">80% Complete (success)</span></div></div></div><div class="lv-item"><div class="lv-title m-b-5">Social Intranet Projects</div><div class="progress"><div class="progress-bar progress-bar-info" role="progressbar" aria-valuenow="20" aria-valuemin="0" aria-valuemax="100" style="width: 20%"><span class="sr-only">20% Complete</span></div></div></div><div class="lv-item"><div class="lv-title m-b-5">Bootstrap Admin Template</div><div class="progress"><div class="progress-bar progress-bar-warning" role="progressbar" aria-valuenow="60" aria-valuemin="0" aria-valuemax="100" style="width: 60%"><span class="sr-only">60% Complete (warning)</span></div></div></div><div class="lv-item"><div class="lv-title m-b-5">Youtube Client App</div><div class="progress"><div class="progress-bar progress-bar-danger" role="progressbar" aria-valuenow="80" aria-valuemin="0" aria-valuemax="100" style="width: 80%"><span class="sr-only">80% Complete (danger)</span></div></div></div></div><div class="clearfix"></div><a class="lv-footer" href="">View All</a></div></div></li><li class="dropdown" uib-dropdown><a uib-dropdown-toggle href=""><i class="tm-icon zmdi zmdi-more-vert"></i></a><ul class="dropdown-menu dm-icon pull-right"><li class="skin-switch hidden-xs"><span ng-repeat="w in mactrl.skinList | limitTo : 6" class="ss-skin bgm-{{ w }}" data-ng-click="mactrl.skinSwitch(w)"></span></li><li class="divider hidden-xs"></li><li class="hidden-xs"><a data-ng-click="hctrl.fullScreen()" href=""><i class="zmdi zmdi-fullscreen"></i> Toggle Fullscreen</a></li><li><a data-ng-click="hctrl.clearLocalStorage()" href=""><i class="zmdi zmdi-delete"></i> Clear Local Storage</a></li><li><a href=""><i class="zmdi zmdi-face"></i> Privacy Settings</a></li><li><a href=""><i class="zmdi zmdi-settings"></i> Other Settings</a></li></ul></li><li class="hidden-xs" data-target="chat" data-toggle-sidebar data-model-right="mactrl.sidebarToggle.right" data-ng-class="{ \'open\': mactrl.sidebarToggle.right === true }"><a href=""><i class="tm-icon zmdi zmdi-comment-alt-text"></i></a></li></ul></li></ul><!-- Top Search Content --><div id="top-search-wrap"><div class="tsw-inner"><i id="top-search-close" class="zmdi zmdi-arrow-left" data-ng-click="hctrl.closeSearch()"></i> <input type="text"></div></div>'),a.put("template/profile-menu.html",'<li class="btn-wave" data-ui-sref-active="active"><a data-ui-sref="pages.profile.profile-about">About</a></li><li class="btn-wave" data-ui-sref-active="active"><a data-ui-sref="pages.profile.profile-timeline">Timeline</a></li><li class="btn-wave" data-ui-sref-active="active"><a data-ui-sref="pages.profile.profile-photos">Photos</a></li><li class="btn-wave" data-ui-sref-active="active"><a data-ui-sref="pages.profile.profile-connections">Connections</a></li>'),a.put("template/sidebar-left.html",'<div class="sidebar-inner c-overflow"><div class="profile-menu"><a href="" toggle-submenu><div class="profile-pic"><img src="img/profile-pics/1.jpg" alt=""></div><div class="profile-info">Malinda Hollaway <i class="zmdi zmdi-caret-down"></i></div></a><ul class="main-menu"><li><a data-ui-sref="pages.profile.profile-about" data-ng-click="mactrl.sidebarStat($event)"><i class="zmdi zmdi-account"></i> View Profile</a></li><li><a href=""><i class="zmdi zmdi-input-antenna"></i> Privacy Settings</a></li><li><a href=""><i class="zmdi zmdi-settings"></i> Settings</a></li><li><a href=""><i class="zmdi zmdi-time-restore"></i> Logout</a></li></ul></div><ul class="main-menu"><li data-ui-sref-active="active"><a data-ui-sref="home" data-ng-click="mactrl.sidebarStat($event)"><i class="zmdi zmdi-home"></i> Home</a></li><li class="sub-menu" data-ng-class="{ \'active toggled\': mactrl.$state.includes(\'headers\') }"><a href="" toggle-submenu><i class="zmdi zmdi-view-compact"></i> Headers</a><ul><li><a data-ui-sref-active="active" data-ui-sref="headers.textual-menu" data-ng-click="mactrl.sidebarStat($event)">Textual menu</a></li><li><a data-ui-sref-active="active" data-ui-sref="headers.image-logo" data-ng-click="mactrl.sidebarStat($event)">Image logo</a></li><li><a data-ui-sref-active="active" data-ui-sref="headers.mainmenu-on-top" data-ng-click="mactrl.sidebarStat($event)">Mainmenu on top</a></li></ul></li><li data-ui-sref-active="active"><a data-ui-sref="typography" data-ng-click="mactrl.sidebarStat($event)"><i class="zmdi zmdi-format-underlined"></i> Typography</a></li><li class="sub-menu" data-ng-class="{ \'active toggled\': mactrl.$state.includes(\'widgets\') }"><a href="" toggle-submenu><i class="zmdi zmdi-widgets"></i> Widgets</a><ul><li><a data-ui-sref-active="active" data-ui-sref="widgets.widget-templates" data-ng-click="mactrl.sidebarStat($event)">Templates</a></li><li><a data-ui-sref-active="active" data-ui-sref="widgets.widgets" data-ng-click="mactrl.sidebarStat($event)">Widgets</a></li></ul></li><li class="sub-menu" data-ng-class="{ \'active toggled\': mactrl.$state.includes(\'tables\') }"><a href="" toggle-submenu><i class="zmdi zmdi-view-list"></i> Tables</a><ul><li><a data-ui-sref-active="active" data-ui-sref="tables.tables" data-ng-click="mactrl.sidebarStat($event)">Tables</a></li><li><a data-ui-sref-active="active" data-ui-sref="tables.data-table" data-ng-click="mactrl.sidebarStat($event)">Data Tables</a></li></ul></li><li class="sub-menu" data-ng-class="{ \'active toggled\': mactrl.$state.includes(\'form\') }"><a href="" toggle-submenu><i class="zmdi zmdi-collection-text"></i> Forms</a><ul><li><a data-ui-sref-active="active" data-ui-sref="form.basic-form-elements" data-ng-click="mactrl.sidebarStat($event)">Basic Form Elements</a></li><li><a data-ui-sref-active="active" data-ui-sref="form.form-components" data-ng-click="mactrl.sidebarStat($event)">Form Components</a></li><li><a data-ui-sref-active="active" data-ui-sref="form.form-examples" data-ng-click="mactrl.sidebarStat($event)">Form Examples</a></li><li><a data-ui-sref-active="active" data-ui-sref="form.form-validations" data-ng-click="mactrl.sidebarStat($event)">Form Validation</a></li></ul></li><li class="sub-menu" data-ng-class="{ \'active toggled\': mactrl.$state.includes(\'user-interface\') }"><a href="" toggle-submenu><i class="zmdi zmdi-swap-alt"></i>User Interface</a><ul><li><a data-ui-sref-active="active" data-ui-sref="user-interface.ui-bootstrap" data-ng-click="mactrl.sidebarStat($event)">UI Bootstrap</a></li><li><a data-ui-sref-active="active" data-ui-sref="user-interface.colors" data-ng-click="mactrl.sidebarStat($event)">Colors</a></li><li><a data-ui-sref-active="active" data-ui-sref="user-interface.animations" data-ng-click="mactrl.sidebarStat($event)">Animations</a></li><li><a data-ui-sref-active="active" data-ui-sref="user-interface.box-shadow" data-ng-click="mactrl.sidebarStat($event)">Box Shadow</a></li><li><a data-ui-sref-active="active" data-ui-sref="user-interface.buttons" data-ng-click="mactrl.sidebarStat($event)">Buttons</a></li><li><a data-ui-sref-active="active" data-ui-sref="user-interface.icons" data-ng-click="mactrl.sidebarStat($event)">Icons</a></li><li><a data-ui-sref-active="active" data-ui-sref="user-interface.alerts" data-ng-click="mactrl.sidebarStat($event)">Alerts</a></li><li><a data-ui-sref-active="active" data-ui-sref="user-interface.preloaders" data-ng-click="mactrl.sidebarStat($event)">Preloaders</a></li><li><a data-ui-sref-active="active" data-ui-sref="user-interface.notifications-dialogs" data-ng-click="mactrl.sidebarStat($event)">Notifications & Dialogs</a></li><li><a data-ui-sref-active="active" data-ui-sref="user-interface.media" data-ng-click="mactrl.sidebarStat($event)">Media</a></li><li><a data-ui-sref-active="active" data-ui-sref="user-interface.other-components" data-ng-click="mactrl.sidebarStat($event)">Others</a></li></ul></li><li class="sub-menu" data-ng-class="{ \'active toggled\': mactrl.$state.includes(\'charts\') }"><a href="" toggle-submenu><i class="zmdi zmdi-trending-up"></i>Charts</a><ul><li><a data-ui-sref-active="active" data-ui-sref="charts.flot-charts" data-ng-click="mactrl.sidebarStat($event)">Flot Charts</a></li><li><a data-ui-sref-active="active" data-ui-sref="charts.other-charts" data-ng-click="mactrl.sidebarStat($event)">Other Charts</a></li></ul></li><li data-ui-sref-active="active"><a data-ui-sref="calendar" data-ng-click="mactrl.sidebarStat($event)"><i class="zmdi zmdi-calendar"></i> Calendar</a></li><li class="sub-menu" data-ng-class="{ \'active toggled\': mactrl.$state.includes(\'photo-gallery\') }"><a href="" toggle-submenu><i class="zmdi zmdi-image"></i>Photo Gallery</a><ul><li><a data-ui-sref-active="active" data-ui-sref="photo-gallery.photos" data-ng-click="mactrl.sidebarStat($event)">Default</a></li><li><a data-ui-sref-active="active" data-ui-sref="photo-gallery.timeline" data-ng-click="mactrl.sidebarStat($event)">Timeline</a></li></ul></li><li data-ui-sref-active="active"><a data-ui-sref="generic-classes" data-ng-click="mactrl.sidebarStat($event)"><i class="zmdi zmdi-layers"></i> Generic Classes</a></li><li class="sub-menu" data-ng-class="{ \'active toggled\': mactrl.$state.includes(\'pages\') }"><a href="" toggle-submenu><i class="zmdi zmdi-collection-item"></i> Sample Pages</a><ul><li><a data-ui-sref-active="active" data-ui-sref="pages.profile.profile-about" data-ng-click="mactrl.sidebarStat($event)">Profile</a></li><li><a data-ui-sref-active="active" data-ui-sref="pages.listview" data-ng-click="mactrl.sidebarStat($event)">List View</a></li><li><a data-ui-sref-active="active" data-ui-sref="pages.messages" data-ng-click="mactrl.sidebarStat($event)">Messages</a></li><li><a data-ui-sref-active="active" data-ui-sref="pages.pricing-table" data-ng-click="mactrl.sidebarStat($event)">Pricing Table</a></li><li><a data-ui-sref-active="active" data-ui-sref="pages.contacts" data-ng-click="mactrl.sidebarStat($event)">Contacts</a></li><li><a data-ui-sref-active="active" data-ui-sref="pages.invoice" data-ng-click="mactrl.sidebarStat($event)">Invoice</a></li><li><a data-ui-sref-active="active" data-ui-sref="pages.wall" data-ng-click="mactrl.sidebarStat($event)">Wall</a></li><li><a href="login.html">Login and Sign Up</a></li><li><a href="lockscreen.html">Lockscreen</a></li><li><a href="404.html">Error 404</a></li></ul></li><li class="sub-menu"><a href="" toggle-submenu><i class="zmdi zmdi-menu"></i> 3 Level Menu</a><ul><li><a href="">Level 2 link</a></li><li><a href="">Another level 2 Link</a></li><li class="sub-menu"><a href="" toggle-submenu>I have children too</a><ul><li><a href="">Level 3 link</a></li><li><a href="">Another Level 3 link</a></li><li><a href="">Third one</a></li></ul></li><li><a href="">One more 2</a></li></ul></li><li><a href="https://wrapbootstrap.com/theme/material-admin-responsive-angularjs-WB011H985"><i class="zmdi zmdi-money"></i> Buy this template</a></li></ul></div>'),a.put("template/carousel/carousel.html",'<div ng-mouseenter="pause()" ng-mouseleave="play()" class="carousel" ng-swipe-right="prev()" ng-swipe-left="next()"><ol class="carousel-indicators" ng-show="slides.length > 1"><li ng-repeat="slide in slides | orderBy:\'index\' track by $index" ng-class="{active: isActive(slide)}" ng-click="select(slide)"></li></ol><div class="carousel-inner" ng-transclude></div><a class="left carousel-control" ng-click="prev()" ng-show="slides.length > 1"><span class="zmdi zmdi-chevron-left"></span></a> <a class="right carousel-control" ng-click="next()" ng-show="slides.length > 1"><span class="zmdi zmdi-chevron-right"></span></a></div>'),a.put("template/datepicker/day.html",'<table role="grid" aria-labelledby="{{::uniqueId}}-title" aria-activedescendant="{{activeDateId}}" class="dp-table dpt-day"><thead><tr class="tr-dpnav"><th><button type="button" class="pull-left btn-dp" ng-click="move(-1)" tabindex="-1"><i class="zmdi zmdi-long-arrow-left"></i></button></th><th colspan="{{::5 + showWeeks}}"><button id="{{::uniqueId}}-title" role="heading" aria-live="assertive" aria-atomic="true" type="button" ng-click="toggleMode()" ng-disabled="datepickerMode === maxMode" tabindex="-1" class="w-100 btn-dp"><div class="dp-title">{{title}}</div></button></th><th><button type="button" class="pull-right btn-dp" ng-click="move(1)" tabindex="-1"><i class="zmdi zmdi-long-arrow-right"></i></button></th></tr><tr class="tr-dpday"><th ng-if="showWeeks" class="text-center"></th><th ng-repeat="label in ::labels track by $index" class="text-center"><small aria-label="{{::label.full}}">{{::label.abbr}}</small></th></tr></thead><tbody><tr ng-repeat="row in rows track by $index"><td ng-if="showWeeks" class="text-center h6"><em>{{ weekNumbers[$index] }}</em></td><td ng-repeat="dt in row track by dt.date" class="text-center" role="gridcell" id="{{::dt.uid}}" ng-class="::dt.customClass"><button type="button" class="w-100 btn-dp btn-dpday btn-dpbody" ng-class="{\'dp-today\': dt.current, \'dp-selected\': dt.selected, \'dp-active\': isActive(dt)}" ng-click="select(dt.date)" ng-disabled="dt.disabled" tabindex="-1"><span ng-class="::{\'dp-day-muted\': dt.secondary, \'dp-day-today\': dt.current}">{{::dt.label}}</span></button></td></tr></tbody></table>'),a.put("template/datepicker/month.html",'<table role="grid" aria-labelledby="{{::uniqueId}}-title" aria-activedescendant="{{activeDateId}}" class="dp-table"><thead><tr class="tr-dpnav"><th><button type="button" class="pull-left btn-dp" ng-click="move(-1)" tabindex="-1"><i class="zmdi zmdi-long-arrow-left"></i></button></th><th><button id="{{::uniqueId}}-title" role="heading" aria-live="assertive" aria-atomic="true" type="button" ng-click="toggleMode()" ng-disabled="datepickerMode === maxMode" tabindex="-1" class="w-100 btn-dp"><div class="dp-title">{{title}}</div></button></th><th><button type="button" class="pull-right btn-dp" ng-click="move(1)" tabindex="-1"><i class="zmdi zmdi-long-arrow-right"></i></button></th></tr></thead><tbody><tr ng-repeat="row in rows track by $index"><td ng-repeat="dt in row track by dt.date" class="text-center" role="gridcell" id="{{::dt.uid}}" ng-class="::dt.customClass"><button type="button" class="w-100 btn-dp btn-dpbody" ng-class="{\'dp-selected\': dt.selected, \'dp-active\': isActive(dt)}" ng-click="select(dt.date)" ng-disabled="dt.disabled" tabindex="-1"><span ng-class="::{\'dp-day-today\': dt.current}">{{::dt.label}}</span></button></td></tr></tbody></table>'),a.put("template/datepicker/popup.html",'<ul class="dropdown-menu" ng-keydown="keydown($event)"><li ng-transclude></li><li ng-if="showButtonBar" class="dp-actions clearfix"><button type="button" class="btn btn-link" ng-click="select(\'today\')">{{ getText(\'current\') }}</button> <button type="button" class="btn btn-link" ng-click="close()">{{ getText(\'close\') }}</button></li></ul>'),a.put("template/datepicker/year.html",'<table role="grid" aria-labelledby="{{::uniqueId}}-title" aria-activedescendant="{{activeDateId}}" class="dp-table"><thead><tr class="tr-dpnav"><th><button type="button" class="pull-left btn-dp" ng-click="move(-1)" tabindex="-1"><i class="zmdi zmdi-long-arrow-left"></i></button></th><th colspan="3"><button id="{{::uniqueId}}-title" role="heading" aria-live="assertive" aria-atomic="true" type="button" class="w-100 btn-dp" ng-click="toggleMode()" ng-disabled="datepickerMode === maxMode" tabindex="-1"><div class="dp-title">{{title}}</div></button></th><th><button type="button" class="pull-right btn-dp" ng-click="move(1)" tabindex="-1"><i class="zmdi zmdi-long-arrow-right"></i></button></th></tr></thead><tbody><tr ng-repeat="row in rows track by $index"><td ng-repeat="dt in row track by dt.date" class="text-center" role="gridcell" id="{{::dt.uid}}"><button type="button" class="w-100 btn-dp btn-dpbody" ng-class="{\'dp-selected\': dt.selected, \'dp-active\': isActive(dt)}" ng-click="select(dt.date)" ng-disabled="dt.disabled" tabindex="-1"><span ng-class="::{\'dp-day-today\': dt.current}">{{::dt.label}}</span></button></td></tr></tbody></table>'),a.put("template/pagination/pager.html",'<ul class="pager"><li ng-class="{disabled: noPrevious(), previous: align}"><a href ng-click="selectPage(page - 1, $event)">Previous</a></li><li ng-class="{disabled: noNext(), next: align}"><a href ng-click="selectPage(page + 1, $event)">Next</a></li></ul>'),a.put("template/pagination/pagination.html",'<ul class="pagination"><li ng-if="boundaryLinks" ng-class="{disabled: noPrevious()}"><a href ng-click="selectPage(1, $event)"><i class="zmdi zmdi-more-horiz"><i></i></i></a></li><li ng-if="directionLinks" ng-class="{disabled: noPrevious()}"><a href ng-click="selectPage(page - 1, $event)"><i class="zmdi zmdi-chevron-left"></i></a></li><li ng-repeat="page in pages track by $index" ng-class="{active: page.active}"><a href ng-click="selectPage(page.number, $event)">{{page.text}}</a></li><li ng-if="directionLinks" ng-class="{disabled: noNext()}"><a href ng-click="selectPage(page + 1, $event)"><i class="zmdi zmdi-chevron-right"></i></a></li><li ng-if="boundaryLinks" ng-class="{disabled: noNext()}"><a href ng-click="selectPage(totalPages, $event)"><i class="zmdi zmdi-more-horiz"><i></i></i></a></li></ul>'),a.put("template/tabs/tabset.html",'<div class="clearfix"><ul class="tab-nav" ng-class="{\'tn-vertical\': vertical, \'tn-justified\': justified, \'tab-nav-right\': right}" ng-transclude></ul><div class="tab-content"><div class="tab-pane" ng-repeat="tab in tabs" ng-class="{active: tab.active}" tab-content-transclude="tab"></div></div></div>')}]),materialAdmin.directive("changeLayout",function(){return{restrict:"A",scope:{changeLayout:"="},link:function(a,b,c){"1"===a.changeLayout&&b.prop("checked",!0),b.on("change",function(){b.is(":checked")?(localStorage.setItem("ma-layout-status",1),a.$apply(function(){a.changeLayout="1"})):(localStorage.setItem("ma-layout-status",0),a.$apply(function(){a.changeLayout="0"}))})}}}).directive("toggleSidebar",function(){return{restrict:"A",scope:{modelLeft:"=",modelRight:"="},link:function(a,b,c){b.on("click",function(){"mainmenu"===b.data("target")&&(a.modelLeft===!1?a.$apply(function(){a.modelLeft=!0}):a.$apply(function(){a.modelLeft=!1;
})),"chat"===b.data("target")&&(a.modelRight===!1?a.$apply(function(){a.modelRight=!0}):a.$apply(function(){a.modelRight=!1}))})}}}).directive("toggleSubmenu",function(){return{restrict:"A",link:function(a,b,c){b.click(function(){b.next().slideToggle(200),b.parent().toggleClass("toggled")})}}}).directive("stopPropagate",function(){return{restrict:"C",link:function(a,b){b.on("click",function(a){a.stopPropagation()})}}}).directive("aPrevent",function(){return{restrict:"C",link:function(a,b){b.on("click",function(a){a.preventDefault()})}}}).directive("print",function(){return{restrict:"A",link:function(a,b){b.click(function(){window.print()})}}}),materialAdmin.directive("cOverflow",["scrollService",function(a){return{restrict:"C",link:function(b,c){$("html").hasClass("ismobile")||a.malihuScroll(c,"minimal-dark","y")}}}]).directive("btn",function(){return{restrict:"C",link:function(a,b){b.hasClass("btn-icon")||b.hasClass("btn-float")?Waves.attach(b,["waves-circle"]):b.hasClass("btn-light")?Waves.attach(b,["waves-light"]):Waves.attach(b),Waves.init()}}}),materialAdmin.directive("curvedlineChart",function(){return{restrict:"A",link:function(a,b){for(var c=[],d=[],e=[],f=0;f<=10;f+=1)c.push([f,parseInt(30*Math.random())]);for(var f=0;f<=20;f+=1)d.push([f,parseInt(30*Math.random())]);for(var f=0;f<=10;f+=1)e.push([f,parseInt(30*Math.random())]);var g={series:{shadowSize:0,curvedLines:{apply:!0,active:!0,monotonicFit:!0},lines:{show:!1,lineWidth:0}},grid:{borderWidth:0,labelMargin:10,hoverable:!0,clickable:!0,mouseActiveRadius:6},xaxis:{tickDecimals:0,ticks:!1},yaxis:{tickDecimals:0,ticks:!1},legend:{show:!1}};$.plot($(b),[{data:c,lines:{show:!0,fill:.98},label:"Product 1",stack:!0,color:"#e3e3e3"},{data:e,lines:{show:!0,fill:.98},label:"Product 2",stack:!0,color:"#f1dd2c"}],g),$(".flot-chart")[0]&&($(".flot-chart").bind("plothover",function(a,b,c){if(c){var d=c.datapoint[0].toFixed(2),e=c.datapoint[1].toFixed(2);$(".flot-tooltip").html(c.series.label+" of "+d+" = "+e).css({top:c.pageY+5,left:c.pageX+5}).show()}else $(".flot-tooltip").hide()}),$("<div class='flot-tooltip' class='chart-tooltip'></div>").appendTo("body"))}}}).directive("lineChart",function(){return{restrict:"A",link:function(a,b){function c(){for(d.length>0&&(d=d.slice(1));d.length<e;){var a=d.length>0?d[d.length-1]:50,b=a+10*Math.random()-5;b<0?b=0:b>90&&(b=90),d.push(b)}for(var c=[],f=0;f<d.length;++f)c.push([f,d[f]]);return c}for(var d=[],e=100,f=[],g=[],h=[],i=0;i<=10;i+=1)f.push([i,parseInt(30*Math.random())]);for(var i=0;i<=20;i+=1)g.push([i,parseInt(30*Math.random())]);for(var i=0;i<=10;i+=1)h.push([i,parseInt(30*Math.random())]);var j={series:{shadowSize:0,lines:{show:!1,lineWidth:0}},grid:{borderWidth:0,labelMargin:10,hoverable:!0,clickable:!0,mouseActiveRadius:6},xaxis:{tickDecimals:0,ticks:!1},yaxis:{tickDecimals:0,ticks:!1},legend:{show:!1}};$("#line-chart")[0]&&$.plot($("#line-chart"),[{data:f,lines:{show:!0,fill:.98},label:"Product 1",stack:!0,color:"#e3e3e3"},{data:h,lines:{show:!0,fill:.98},label:"Product 2",stack:!0,color:"#FFC107"}],j),$("#recent-items-chart")[0]&&$.plot($("#recent-items-chart"),[{data:c(),lines:{show:!0,fill:.8},label:"Items",stack:!0,color:"#00BCD4"}],j)}}}).directive("barChart",function(){return{restrict:"A",link:function(a,b,c){var d=[[1,60],[2,30],[3,50],[4,100],[5,10],[6,90],[7,85]],e=[[1,20],[2,90],[3,60],[4,40],[5,100],[6,25],[7,65]],f=[[1,100],[2,20],[3,60],[4,90],[5,80],[6,10],[7,5]],g=new Array;g.push({data:d,label:"Tokyo",bars:{show:!0,barWidth:.08,order:1,lineWidth:0,fillColor:"#8BC34A"}}),g.push({data:e,label:"Seoul",bars:{show:!0,barWidth:.08,order:2,lineWidth:0,fillColor:"#00BCD4"}}),g.push({data:f,label:"Beijing",bars:{show:!0,barWidth:.08,order:3,lineWidth:0,fillColor:"#FF9800"}}),$.plot($(b),g,{grid:{borderWidth:1,borderColor:"#eee",show:!0,hoverable:!0,clickable:!0},yaxis:{tickColor:"#eee",tickDecimals:0,font:{lineHeight:13,style:"normal",color:"#9f9f9f"},shadowSize:0},xaxis:{tickColor:"#fff",tickDecimals:0,font:{lineHeight:13,style:"normal",color:"#9f9f9f"},shadowSize:0},legend:{container:".flc-bar",backgroundOpacity:.5,noColumns:0,backgroundColor:"white",lineWidth:0}})}}}).directive("dynamicChart",function(){return{restrict:"A",link:function(a,b,c){function d(){for(f.length>0&&(f=f.slice(1));f.length<g;){var a=f.length>0?f[f.length-1]:50,b=a+10*Math.random()-5;b<0?b=0:b>90&&(b=90),f.push(b)}for(var c=[],d=0;d<f.length;++d)c.push([d,f[d]]);return c}function e(){i.setData([d()]),i.draw(),setTimeout(e,h)}var f=[],g=300,h=30,i=$.plot(b,[d()],{series:{label:"Server Process Data",lines:{show:!0,lineWidth:.2,fill:.6},color:"#00BCD4",shadowSize:0},yaxis:{min:0,max:100,tickColor:"#eee",font:{lineHeight:13,style:"normal",color:"#9f9f9f"},shadowSize:0},xaxis:{tickColor:"#eee",show:!0,font:{lineHeight:13,style:"normal",color:"#9f9f9f"},shadowSize:0,min:0,max:250},grid:{borderWidth:1,borderColor:"#eee",labelMargin:10,hoverable:!0,clickable:!0,mouseActiveRadius:6},legend:{container:".flc-dynamic",backgroundOpacity:.5,noColumns:0,backgroundColor:"white",lineWidth:0}});e()}}}).directive("pieDonut",function(){return{restrict:"A",link:function(a,b,c){var d=[{data:1,color:"#F44336",label:"Toyota"},{data:2,color:"#03A9F4",label:"Nissan"},{data:3,color:"#8BC34A",label:"Hyundai"},{data:4,color:"#FFEB3B",label:"Scion"},{data:4,color:"#009688",label:"Daihatsu"}];$("#pie-chart")[0]&&$.plot("#pie-chart",d,{series:{pie:{show:!0,stroke:{width:2}}},legend:{container:".flc-pie",backgroundOpacity:.5,noColumns:0,backgroundColor:"white",lineWidth:0},grid:{hoverable:!0,clickable:!0},tooltip:!0,tooltipOpts:{content:"%p.0%, %s",shifts:{x:20,y:0},defaultTheme:!1,cssClass:"flot-tooltip"}}),$("#donut-chart")[0]&&$.plot("#donut-chart",d,{series:{pie:{innerRadius:.5,show:!0,stroke:{width:2}}},legend:{container:".flc-donut",backgroundOpacity:.5,noColumns:0,backgroundColor:"white",lineWidth:0},grid:{hoverable:!0,clickable:!0},tooltip:!0,tooltipOpts:{content:"%p.0%, %s",shifts:{x:20,y:0},defaultTheme:!1,cssClass:"flot-tooltip"}})}}}),materialAdmin.directive("sparklineBar",function(){return{restrict:"A",link:function(a,b){function c(a,b,c,d,e,f){$(a).sparkline(b,{type:"bar",height:c,barWidth:d,barColor:e,barSpacing:f})}c(".stats-bar",[6,4,8,6,5,6,7,8,3,5,9,5,8,4,3,6,8],"45px",3,"#fff",2),c(".stats-bar-2",[4,7,6,2,5,3,8,6,6,4,8,6,5,8,2,4,6],"45px",3,"#fff",2)}}}).directive("sparklineLine",function(){return{restrict:"A",link:function(a,b){function c(a,b,c,d,e,f,g,h,i,j,k,l,m){$(a).sparkline(b,{type:"line",width:c,height:d,lineColor:e,fillColor:f,lineWidth:g,maxSpotColor:h,minSpotColor:i,spotColor:j,spotRadius:k,highlightSpotColor:l,highlightLineColor:m})}c(".stats-line",[9,4,6,5,6,4,5,7,9,3,6,5],85,45,"#fff","rgba(0,0,0,0)",1.25,"rgba(255,255,255,0.4)","rgba(255,255,255,0.4)","rgba(255,255,255,0.4)",3,"#fff","rgba(255,255,255,0.4)"),c(".stats-line-2",[5,6,3,9,7,5,4,6,5,6,4,9],85,45,"#fff","rgba(0,0,0,0)",1.25,"rgba(255,255,255,0.4)","rgba(255,255,255,0.4)","rgba(255,255,255,0.4)",3,"#fff","rgba(255,255,255,0.4)"),c(".dash-widget-visits",[9,4,6,5,6,4,5,7,9,3,6,5],"100%","95px","rgba(255,255,255,0.7)","rgba(0,0,0,0)",2,"rgba(255,255,255,0.4)","rgba(255,255,255,0.4)","rgba(255,255,255,0.4)",5,"rgba(255,255,255,0.4)","#fff")}}}).directive("sparklinePie",function(){return{restrict:"A",link:function(a,b,c){function d(a,b,c,d,e){$(a).sparkline(b,{type:"pie",width:c,height:d,sliceColors:e,offset:0,borderWidth:0})}$(".stats-pie")[0]&&d(".stats-pie",[20,35,30,5],45,45,["#fff","rgba(255,255,255,0.7)","rgba(255,255,255,0.4)","rgba(255,255,255,0.2)"])}}}).directive("easypieChart",function(){return{restrict:"A",link:function(a,b){function c(a,b,c,d,e,f,g){$(a).easyPieChart({trackColor:b,scaleColor:c,barColor:d,lineWidth:e,lineCap:f,size:g})}c(".main-pie","rgba(255,255,255,0.2)","rgba(255,255,255,0.5)","rgba(255,255,255,0.7)",7,"butt",148),c(".sub-pie-1","#eee","#ccc","#2196F3",4,"butt",95),c(".sub-pie-2","#eee","#ccc","#FFC107",4,"butt",95)}}}),materialAdmin.directive("fgLine",function(){return{restrict:"C",link:function(a,b){$(".fg-line")[0]&&($("body").on("focus",".form-control",function(){$(this).closest(".fg-line").addClass("fg-toggled")}),$("body").on("blur",".form-control",function(){var a=$(this).closest(".form-group"),b=a.find(".form-control").val();a.hasClass("fg-float")?0==b.length&&$(this).closest(".fg-line").removeClass("fg-toggled"):$(this).closest(".fg-line").removeClass("fg-toggled")}))}}}).directive("autoSize",function(){return{restrict:"A",link:function(a,b){b[0]&&autosize(b)}}}).directive("selectPicker",function(){return{restrict:"A",link:function(a,b,c){b.selectpicker()}}}).directive("inputMask",function(){return{restrict:"A",scope:{inputMask:"="},link:function(a,b){b.mask(a.inputMask.mask)}}}).directive("colordPicker",function(){return{restrict:"A",link:function(a,b,c){$(b).each(function(){var a=$(this).closest(".cp-container").find(".cp-value");$(this).farbtastic(a)})}}}).directive("formControl",function(){return{restrict:"C",link:function(a,b,c){angular.element("html").hasClass("ie9")&&$("input, textarea").placeholder({customClass:"ie9-placeholder"})}}}),materialAdmin.controller("AlertDemoCtrl",["$scope",function(a){a.alerts=[{type:"info",msg:"Well done! You successfully read this important alert message."},{type:"success",msg:"Well done! You successfully read this important alert message."},{type:"warning",msg:"Warning! Better check yourself, you're not looking too good."},{type:"danger",msg:"Oh snap! Change a few things up and try submitting again."}],a.closeAlert=function(b){a.alerts.splice(b,1)}}]).controller("ButtonsDemoCtrl",["$scope",function(a){a.singleModel=1,a.radioModel="Middle",a.checkModel={left:!1,middle:!0,right:!1}}]).controller("CarouselDemoCtrl",["$scope",function(a){a.myInterval=0,a.slides=[{img:"c-1.jpg",title:"First Slide Label",text:"Some sample text goes here..."},{img:"c-2.jpg",title:"Second Slide Label",text:"Some sample text goes here..."},{img:"c-3.jpg"}]}]).controller("CollapseDemoCtrl",["$scope",function(a){a.isCollapsed=!1}]).controller("UibDropdownDemoCtrl",["$scope",function(a){a.items=[{name:"The first choice!",icon:"home"},{name:"And another choice",icon:"account"},{name:"But wait! A third!",icon:"email"},{name:"And fourth on here",icon:"pin"}]}]).controller("ModalDemoCtrl",["$scope","$uibModal","$log",function(a,b,c){function d(c,d,e,f){b.open({animation:c,templateUrl:"myModalContent.html",controller:"ModalInstanceCtrl",size:d,backdrop:e,keyboard:f,resolve:{content:function(){return a.modalContent}}})}a.modalContent="Lorem ipsum dolor sit amet, consectetur adipiscing elit. Proin sodales orci ante, sed ornare eros vestibulum ut. Ut accumsan vitae eros sit amet tristique. Nullam scelerisque nunc enim, non dignissim nibh faucibus ullamcorper. Fusce pulvinar libero vel ligula iaculis ullamcorper. Integer dapibus, mi ac tempor varius, purus nibh mattis erat, vitae porta nunc nisi non tellus. Vivamus mollis ante non massa egestas fringilla. Vestibulum egestas consectetur nunc at ultricies. Morbi quis consectetur nunc.",a.open=function(a){d(!0,a,!0,!0)},a.openWithoutAnimation=function(){d(!1,"",!0,!0)},a.openStatic=function(){d(!0,"","static",!0)},a.openKeyboard=function(){d(!0,"",!0,!1)}}]).controller("ModalInstanceCtrl",["$scope","$modalInstance","content",function(a,b,c){a.modalContent=c,a.ok=function(){b.close()},a.cancel=function(){b.dismiss("cancel")}}]).controller("PaginationDemoCtrl",["$scope","$log",function(a,b){a.totalItems=64,a.currentPage=4,a.setPage=function(b){a.currentPage=b},a.maxSize=5,a.bigTotalItems=175,a.bigCurrentPage=1}]).controller("PopoverDemoCtrl",["$scope",function(a){a.dynamicPopover={templateUrl:"myPopoverTemplate.html"}}]).controller("ProgressDemoCtrl",["$scope",function(a){a.max=200,a.random=function(){var b,c=Math.floor(100*Math.random()+1);b=c<25?"success":c<50?"info":c<75?"warning":"danger",a.showWarning="danger"===b||"warning"===b,a.dynamic=c,a.type=b},a.random(),a.randomStacked=function(){a.stacked=[];for(var b=["success","info","warning","danger"],c=0,d=Math.floor(4*Math.random()+1);c<d;c++){var e=Math.floor(4*Math.random());a.stacked.push({value:Math.floor(30*Math.random()+1),type:b[e]})}},a.randomStacked()}]).controller("TabsDemoCtrl",["$scope","$window",function(a,b){a.tabs=[{title:"Home",content:"In hac habitasse platea dictumst. Class aptent taciti sociosqu ad litora torquent per conubia nostra, per inceptos hymenaeos. Nam eget dui. In ac felis quis tortor malesuada pretium. Phasellus consectetuer vestibulum elit. Duis lobortis massa imperdiet quam. Pellentesque commodo eros a enim. Vestibulum ante ipsum primis in faucibus orci luctus et ultrices posuere cubilia Curae; In ac dui quis mi consectetuer lacinia. Phasellus a est. Pellentesque commodo eros a enim. Cras ultricies mi eu turpis hendrerit fringilla. Donec mollis hendrerit risus. Vestibulum turpis sem, aliquet eget, lobortis pellentesque, rutrum eu, nisl. Praesent egestas neque eu enim. In hac habitasse platea dictumst."},{title:"Profile",content:"Duis arcu tortor, suscipit eget, imperdiet nec, imperdiet iaculis, ipsum. Vestibulum purus quam, scelerisque ut, mollis sed, nonummy id, metus. Nulla sit amet est. Praesent ac massa at ligula laoreet iaculis. Vivamus aliquet elit ac nisl. Nulla porta dolor. Cras dapibus. Aliquam lorem ante, dapibus in, viverra quis, feugiat a, tellus."},{title:"Messages",content:"Etiam rhoncus. Phasellus leo dolor, tempus non, auctor et, hendrerit quis, nisi. Cras id dui. Curabitur turpis. Etiam ut purus mattis mauris sodales aliquam. Aenean viverra rhoncus pede. Nulla sit amet est. Donec mi odio, faucibus at, scelerisque quis, convallis in, nisi. Praesent ac sem eget est egestas volutpat. Cras varius. Morbi mollis tellus ac sapien. In enim justo, rhoncus ut, imperdiet a, venenatis vitae, justo. Nam ipsum risus, rutrum vitae, vestibulum eu, molestie vel, lacus. Fusce vel dui.Morbi mattis ullamcorper velit. Etiam rhoncus. Phasellus leo dolor, tempus non, auctor et, hendrerit quis, nisi. Cras id dui. Curabitur turpis. Etiam ut purus mattis mauris sodales aliquam. Aenean viverra rhoncus pede. Nulla sit amet est. Donec mi odio, faucibus at, scelerisque quis, convallis in, nisi. Praesent ac sem eget est egestas volutpat. Cras varius. Morbi mollis tellus ac sapien. In enim justo, rhoncus ut, imperdiet a, venenatis vitae, justo. Nam ipsum risus, rutrum vitae, vestibulum eu, molestie vel, lacus. Fusce vel dui."},{title:"Settings",content:"Praesent turpis. Phasellus magna. Fusce vulputate eleifend sapien. Duis arcu tortor, suscipit eget, imperdiet nec, imperdiet iaculis, ipsum. Donec elit libero, sodales nec, volutpat a, suscipit non, turpis."}]}]).controller("TooltipDemoCtrl",["$scope","$sce",function(a,b){a.htmlTooltip=b.trustAsHtml("I've been made <b>bold</b>!")}]).controller("DatepickerDemoCtrl",["$scope",function(a){a.today=function(){a.dt=new Date},a.today(),a.toggleMin=function(){a.minDate=a.minDate?null:new Date},a.toggleMin(),a.open=function(b,c){b.preventDefault(),b.stopPropagation(),a[c]=!0},a.dateOptions={formatYear:"yy",startingDay:1},a.formats=["dd-MMMM-yyyy","yyyy/MM/dd","dd.MM.yyyy","shortDate"],a.format=a.formats[0]}]).controller("TypeaheadCtrl",["$scope","$http",function(a,b){a.selected=void 0,a.states=["Alabama","Alaska","Arizona","Arkansas","California","Colorado","Connecticut","Delaware","Florida","Georgia","Hawaii","Idaho","Illinois","Indiana","Iowa","Kansas","Kentucky","Louisiana","Maine","Maryland","Massachusetts","Michigan","Minnesota","Mississippi","Missouri","Montana","Nebraska","Nevada","New Hampshire","New Jersey","New Mexico","New York","North Dakota","North Carolina","Ohio","Oklahoma","Oregon","Pennsylvania","Rhode Island","South Carolina","South Dakota","Tennessee","Texas","Utah","Vermont","Virginia","Washington","West Virginia","Wisconsin","Wyoming"],a.getLocation=function(a){return b.get("//maps.googleapis.com/maps/api/geocode/json",{params:{address:a,sensor:!1}}).then(function(a){return a.data.results.map(function(a){return a.formatted_address})})}}]),materialAdmin.directive("mediaElement",function(){return{restrict:"A",link:function(a,b){b.mediaelementplayer()}}}).directive("lightbox",function(){return{restrict:"C",link:function(a,b){b.lightGallery({enableTouch:!0})}}}),materialAdmin.directive("weatherWidget",function(){return{restrict:"A",link:function(a,b){$.simpleWeather({location:"Austin, TX",woeid:"",unit:"f",success:function(a){html='<div class="weather-status">'+a.temp+"&deg;"+a.units.temp+"</div>",html+='<ul class="weather-info"><li>'+a.city+", "+a.region+"</li>",html+='<li class="currently">'+a.currently+"</li></ul>",html+='<div class="weather-icon wi-'+a.code+'"></div>',html+='<div class="dash-widget-footer"><div class="weather-list tomorrow">',html+='<span class="weather-list-icon wi-'+a.forecast[2].code+'"></span><span>'+a.forecast[1].high+"/"+a.forecast[1].low+"</span><span>"+a.forecast[1].text+"</span>",html+="</div>",html+='<div class="weather-list after-tomorrow">',html+='<span class="weather-list-icon wi-'+a.forecast[2].code+'"></span><span>'+a.forecast[2].high+"/"+a.forecast[2].low+"</span><span>"+a.forecast[2].text+"</span>",html+="</div></div>",$("#weather-widget").html(html)},error:function(a){$("#weather-widget").html("<p>"+a+"</p>")}})}}}).directive("swalBasic",function(){return{restrict:"A",link:function(a,b,c){b.click(function(){swal("Here's a message!")})}}}).directive("swalText",function(){return{restrict:"A",link:function(a,b,c){b.click(function(){swal("Here's a message!","Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed lorem erat, tincidunt vitae ipsum et, pellentesque maximus enim. Mauris eleifend ex semper, lobortis purus sed, pharetra felis")})}}}).directive("swalSuccess",function(){return{restrict:"A",link:function(a,b,c){b.click(function(){swal("Good job!","Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed lorem erat, tincidunt vitae ipsum et, pellentesque maximus enim. Mauris eleifend ex semper, lobortis purus sed, pharetra felis","success")})}}}).directive("swalWarning",function(){return{restrict:"A",link:function(a,b,c){b.click(function(){swal({title:"Are you sure?",text:"You will not be able to recover this imaginary file!",type:"warning",showCancelButton:!0,confirmButtonColor:"#DD6B55",confirmButtonText:"Yes, delete it!",closeOnConfirm:!1},function(){swal("Deleted!","Your imaginary file has been deleted.","success")})})}}}).directive("swalParams",function(){return{restrict:"A",link:function(a,b,c){b.click(function(){swal({title:"Are you sure?",text:"You will not be able to recover this imaginary file!",type:"warning",showCancelButton:!0,confirmButtonColor:"#DD6B55",confirmButtonText:"Yes, delete it!",cancelButtonText:"No, cancel plx!",closeOnConfirm:!1,closeOnCancel:!1},function(a){a?swal("Deleted!","Your imaginary file has been deleted.","success"):swal("Cancelled","Your imaginary file is safe :)","error")})})}}}).directive("swalImg",function(){return{restrict:"A",link:function(a,b,c){b.click(function(){swal({title:"Sweet!",text:"Here's a custom image.",imageUrl:"img/thumbs-up.png"})})}}}).directive("swalTimer",function(){return{restrict:"A",link:function(a,b,c){b.click(function(){swal({title:"Auto close alert!",text:"I will close in 2 seconds.",timer:2e3,showConfirmButton:!1})})}}}).directive("growlDemo",function(){return{restrict:"A",link:function(a,b,c){function d(a,b,c,d,e,f){$.growl({icon:c,title:" Bootstrap Growl ",message:"Turning standard Bootstrap alerts into awesome notifications",url:""},{element:"body",type:d,allow_dismiss:!0,placement:{from:a,align:b},offset:{x:20,y:85},spacing:10,z_index:1031,delay:2500,timer:1e3,url_target:"_blank",mouse_over:!1,animate:{enter:e,exit:f},icon_type:"class",template:'<div data-growl="container" class="alert" role="alert"><button type="button" class="close" data-growl="dismiss"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button><span data-growl="icon"></span><span data-growl="title"></span><span data-growl="message"></span><a href="#" data-growl="url"></a></div>'})}b.on("click",function(a){a.preventDefault();var b=c.from,e=c.align,f=c.icon,g=c.type,h=c.animationIn,i=c.animationOut;d(b,e,f,g,h,i)})}}}),angular.module("linshareUiUserApp",["ngAnimate","ngCookies","ngMessages","ngResource","ngRoute","ngSanitize","ngTable","restangular","ui.router","http-auth-interceptor","ui.bootstrap","flow","angular-growl","linshare.audit","linshare.upload","linshare.userProfile","linshare.authentication","linshare.contactsLists","linshare.document","linshare.share","linshare.sharedSpace","linshare.guests","linshare.receivedShare","LocalStorageModule","pascalprecht.translate","materialAdmin","ngMaterial","ui.bootstrap.contextMenu","localytics.directives","linshare.anonymousUrl","linshare.resetPassword"]),angular.module("linshareUiUserApp").config(["RestangularProvider","flowFactoryProvider","$compileProvider","$translateProvider","$translatePartialLoaderProvider","lsAppConfig","lsUserConfig","$windowProvider",function(a,b,c,d,e,f,g,h){f=_.assign(f,g);var i=f.localPath?f.localPath:"i18n/original/";d.useLoader("$translatePartialLoader",{urlTemplate:i+"/{lang}/{part}.json",loadFailureHandler:"translateLoadFailureHandlerService"}),d.fallbackLanguage("en-US"),e.addPart("general"),e.addPart("notification"),d.preferredLanguage("en-US"),a.setDefaultHttpFields({cache:!1}),a.setDefaultHeaders({"Content-Type":"application/json;"}),a.setRestangularFields({id:"uuid"}),a.addFullRequestInterceptor(function(a,b,c,d,e){return e["WWW-No-Authenticate"]="linshare",angular.isObject(a)&&(delete a.isSelected,delete a.typeImage,delete a.info),a}),b.defaults={simultaneousUploads:f.simultaneous_upload,target:h.$get().location.origin+"/"+f.baseRestUrl+"/flow.json",allowDuplicateUploads:!0,generateUniqueIdentifier:function(){return uuid.v4()},query:function(a){var b="",c="";_.isUndefined(a.folderDetails)||_.isNil(a.folderDetails.workgroupUuid)||(b=a.folderDetails.workgroupUuid,c=_.isNil(a.folderDetails.folderUuid)?"":a.folderDetails.folderUuid);var d={asyncTask:!0,workGroupUuid:b,workGroupParentNodeUuid:c};return d},permanentErrors:[401,500,501],headers:{"WWW-No-Authenticate":"linshare"}},c.aHrefSanitizationWhitelist(/^\s*(https?|ftp|mailto|tel|file|blob):/)}]).config(["localStorageServiceProvider","$logProvider","lsAppConfig",function(a,b,c){b.debugEnabled(c.debug),a.setPrefix("lsUser").setNotify(!0,!0)}]).run(["$rootScope","$filter","$location","Restangular","$log","$window","localStorageService","languageService","toastService",function(a,b,c,d,e,f,g,h,i){a.browserLanguage=f.navigator.language||f.navigator.userLanguage;var j=g.get("locale");j?h.changeLocale(j):h.changeLocale(a.browserLanguage),d.setErrorInterceptor(function(a,c,d){switch(a.status){case 400:e.debug("Error "+a.status,a);break;case 404:e.debug("Resource not found",a);break;case 500:e.debug("Error "+a.status,a);break;case 503:e.debug("Error "+a.status,a);break;default:if(!a.status){var f=b("translate"),g=f("NO_RESPONSE_ERROR");return f("GROWL_ALERT.ERROR."+g).then(function(a){i.error(a)}),e.debug("deferred",c),e.debug("response",a),e.debug("responseHandler",d),c.resolve(!1),!1}e.debug("Error "+a.status,a)}return!0}),a.$on("$stateChangeStart",function(b,c,d,e,f){a.toState=c.name,a.toParams=d,a.fromState=e.name,a.fromParams=f}),d.addResponseInterceptor(function(b,c,d,f,g,h){return e.debug("addResponseInterceptor => response",g),401===g.status&&a.$emit("lsIntercept401"),b}),a.$on("lsIntercept401",function(a,b){e.debug("data from lsIntercept401",b)}),a.$on("$stateChangeStart",function(b,c,d,e){a.toState=c.name,a.fromState=e.name}),a.$on("$translatePartialLoaderStructureChanged",function(){h.refreshLocale()})}]).run(["$rootScope","$state","$stateParams","Restangular","lsAppConfig","$window",function(a,b,c,d,e,f){var g=f.location.protocol,h=f.location.host.replace(/\/$/,""),i=g+"//"+h;e.backendUrl=[i,validate(e.baseRestUrl)].join("/"),d.setBaseUrl(e.backendUrl),a.$state=b,a.$stateParams=c,a.linshareBaseUrl=[i,validate(e.baseRestUrl)].join("/"),a.linshareModeProduction=e.production,a.linshareLicence=e.licence}]).run(["$templateCache","$http",function(a,b){b.get("views/includes/templates.html",{cache:a})}]).run(["$templateCache",function(a){a.get("views/includes/sidebar-right.html"),a.get("views/includes/footer.html"),a.get("views/includes/header.html"),a.get("views/includes/profile-menu.html"),a.get("views/includes/sidebar-left.html"),a.put("views/includes/templates.html","")}]),function(){function a(a,b){function c(a,b){b.checkAuthentication(!1).then(function(b){_.isUndefined(b.status)?a.go("home"):a.is("login")||a.go("login")})}b.otherwise(function(a){a.invoke(["$state","authenticationRestService",function(a,b){c(a,b)}])}),a.state("common",{templateUrl:"views/common/common.html",resolve:{authentication:["authenticationRestService",function(a){return a.checkAuthentication()}],user:["authenticationRestService",function(a){return a.getCurrentUser()}],functionalities:["functionalityRestService",function(a){return a.getFunctionalities()}]}}).state("home",{parent:"common",url:"/home",templateUrl:"views/home/home.html",controller:"HomeController",resolve:{user:["user",function(a){return a}],functionalities:["functionalities",function(a){return a}]}}).state("login",{url:"/login?next",templateUrl:"views/common/loginForm.html",controller:"loginController",controllerAs:"loginVm",resolve:{authentication:["$state","authenticationRestService",function(a,b){c(a,b)}]}}).state("documents",{parent:"common",controller:"documentsController",url:"/files",template:"<div ui-view></div>"}).state("documents.files",{url:"/list?fileUuid",templateUrl:"modules/linshare.document/views/documentsList.html",controller:"documentController",params:{uploadedFileUuid:null},resolve:{functionality:["$state","functionalities","user",function(a,b,c){c.canUpload||a.go("home")}],documentsList:["LinshareDocumentRestService",function(a){return a.getList()}]}}).state("documents.files.selected",{url:"/selected_files",templateUrl:"modules/linshare.document/views/selected_files.html",controller:"selectedDocumentsController",params:{selected:null,hiddenParam:"YES"}}).state("documents.received",{url:"/received?fileUuid",templateUrl:"modules/linshare.receivedShare/views/list.html",controller:"ReceivedController",resolve:{user:["user",function(a){return a}],files:["receivedShareRestService",function(a){return a.getList()}],documentSelected:["$stateParams","files",function(a,b){return _.isUndefined(a.fileUuid)?null:_.find(b,function(b){return b.uuid===a.fileUuid})}]}}).state("documents.shared",{url:"/shared",templateUrl:"modules/linshare.share/views/shared.html",controller:"LinshareShareController",resolve:{sharedDocumentsList:["LinshareShareService",function(a){return a.getList()}]}}).state("documents.share",{url:"/share",templateUrl:"views/documents/shareModal.html",controller:"ReceivedController"}).state("documents.upload",{url:"/upload/:from",params:{idUpload:null},templateUrl:"modules/linshare.upload/views/lsUpload.html",controller:"uploadQueueController",controllerAs:"uploadQueueVm",resolve:{functionality:["$state","functionalities","user",function(a,b,c){b.WORK_GROUP.enable||c.canUpload||a.go("home")}],checkUrl:["$state","$stateParams","functionalities","lsAppConfig","user",function(a,b,c,d,e){switch(b.from){case d.mySpacePage:e.canUpload||(a.go("documents.upload",{from:d.workgroupPage}),b.from=d.workgroupPage);break;case d.workgroupPage:c.WORK_GROUP.enable||(a.go("documents.upload",{from:d.mySpacePage}),b.from=d.mySpacePage);break;default:a.go("documents.upload",{from:d.mySpacePage}),b.from=d.mySpacePage}}]}}).state("documents.profile",{url:"/profile",templateUrl:"views/common/user-profile.html",controller:"AuthenticationController",controllerAs:"authenticationVm"}).state("sharedspace",{parent:"common","abstract":!0,url:"/sharedspace",template:"<div ui-view></div>",resolve:{functionality:["$state","functionalities",function(a,b){b.WORK_GROUP.enable||a.go("home")}]}}).state("sharedspace.all",{url:"/list",templateUrl:"modules/linshare.sharedSpace/views/workgroups.html",controller:"SharedSpaceController as vm",resolve:{workgroups:["workgroupRestService","functionalities",function(a,b){return a.getList()}]}}).state("sharedspace.workgroups",{"abstract":!0,url:"/workgroups",template:"<div ui-view></div>"}).state("sharedspace.workgroups.root",{url:"/:workgroupUuid/:workgroupName",templateUrl:"modules/linshare.sharedSpace/views/workgroupNodesList.html",controller:"WorkgroupNodesController as workgroupNodesVm",params:{uploadedFileUuid:null,parentUuid:null},resolve:{nodesList:["workgroupNodesRestService","$stateParams","functionalities",function(a,b,c){return a.getList(b.workgroupUuid)}]}}).state("sharedspace.workgroups.folder",{url:"/:workgroupUuid/:workgroupName/:folderUuid/:folderName",templateUrl:"modules/linshare.sharedSpace/views/workgroupNodesList.html",controller:"WorkgroupNodesController as workgroupNodesVm",params:{uploadedFileUuid:null,parentUuid:null,folderUuid:null,folderName:null},resolve:{nodesList:["workgroupNodesRestService","$stateParams","functionalities",function(a,b,c){return a.getList(b.workgroupUuid,b.folderUuid)}]}}).state("administration",{parent:"common",url:"/administration",template:"<div ui-view></div>"}).state("administration.contactslists",{"abstract":!0,url:"/contactslists",template:"<div ui-view></div>",resolve:{functionality:["$state","functionalities",function(a,b){b.CONTACTS_LIST.enable||a.go("home")}]}}).state("administration.contactslists.list",{url:"/:from",params:{createNew:void 0},templateUrl:"modules/linshare.contactsLists/views/contactsListsList.html",controller:"contactsListsListController",controllerAs:"contactsListsListVm",resolve:{checkUrl:["$state","$stateParams","lsAppConfig","functionality",function(a,b,c,d){if(0===b.from.length)b.from=c.contactsListsMinePage;else if(b.from!==c.contactsListsMinePage&&b.from!==c.contactsListsOthersPage)return a.go("administration.contactslists.list",{from:c.contactsListsMinePage})}],createNew:["$stateParams","functionality",function(a,b){return!_.isUndefined(a.createNew)&&a.createNew}],contactsListsList:["$stateParams","lsAppConfig","contactsListsListRestService","functionality",function(a,b,c,d){return c.getList(a.from!==b.contactsListsOthersPage)}]}}).state("administration.contactslists.list.contacts",{url:"/:contactsListUuid/:contactsListName/contacts",params:{addContacts:void 0},templateUrl:"modules/linshare.contactsLists/views/contactsListsContacts.html",controller:"contactsListsContactsController",controllerAs:"contactsListsContactsVm",resolve:{addContacts:["$stateParams","functionality",function(a,b){return!_.isUndefined(a.addContacts)&&a.addContacts}],contactsListsContacts:["contactsListsContactsRestService","$stateParams","functionality",function(a,b,c){return a.getList(b.contactsListUuid)}]}}).state("administration.guests",{url:"/adminguests",templateUrl:"modules/linshare.guests/views/list.html",controller:"LinshareGuestsController",controllerAs:"guestVm",resolve:{functionality:["$state","functionalities",function(a,b){_.isNil(b.GUESTS)?a.go("home"):b.GUESTS.enable||a.go("home")}],userType:["$state","lsAppConfig","user",function(a,b,c){c.accountType===b.accountType.guest&&a.go("home")}]}}).state("administration.users",{url:"/users",templateUrl:"views/home/main.html"}).state("administration.groups",{url:"/sharedspace",templateUrl:"views/home/main.html"}).state("administration.hidden_links",{url:"/hidden_links",templateUrl:"views/common/hidden_links.html"}).state("upload_request",{parent:"common",url:"/upload_requests",template:"<div ui-view></div>"}).state("audit",{parent:"common",url:"/audit",template:"<div ui-view></div>"}).state("audit.global",{url:"/audit_global",templateUrl:"modules/linshare.audit/views/auditList.html",controller:"AuditController",controllerAs:"auditVm"}).state("audit.upload_request",{url:"/audit_upload_request",templateUrl:"views/home/main.html"}).state("share",{parent:"common",url:"/share",template:"<div ui-view></div>"
}).state("share.detail",{url:"/view/:id",templateUrl:"modules/linshare.share/views/shares_detail.html",controller:"LinshareShareListController",controllerAs:"shareListVm",resolve:{previousState:["$state",function(a){var b={Name:a.current.name,Params:a.params};return b}],shareIndex:["$stateParams",function(a){return a.id}]}}).state("share.files",{url:"/advancedshare",templateUrl:"modules/linshare.share/views/advancedSharing.html",params:{selected:null,hiddenParam:"YES"},controller:"LinshareShareActionController"}).state("share.files.new-share",{url:"/new_share",templateUrl:"modules/linshare.share/views/new_advanced_sharing.html",controller:"LinshareAdvancedShareController",resolve:{allFunctionalities:["functionalities",function(a){return a}]}}).state("transfert",{parent:"common",url:"/transfert",template:"<div ui-view></div>"}).state("transfert.new_share",{url:"/newShare",templateUrl:"modules/linshare.share/views/partage_template.html"}).state("transfert.new_upload",{url:"/newUpload",templateUrl:"modules/linshare.share/views/upload_template.html"}).state("share.files.share-detail",{url:"/share_detail",templateUrl:"modules/linshare.share/views/shares_detail.html"})}angular.module("linshareUiUserApp").config(a),a.$inject=["$stateProvider","$urlRouterProvider"]}(),function(){function a(a,b,c,d,e){function f(){var a=c.getLocale();j.loginLocale=g(a)}function g(a){a=a.split("-");var b,c=a[0];return a.length>1&&(b=a[1].toLowerCase()),{language:c,country:b}}function h(){var c;b.login(j.email,j.password).then(function(b){a(["LOGIN.NOTIFICATION.SUCCESS"]).then(function(a){c=a["LOGIN.NOTIFICATION.SUCCESS"].replace("${firstName}",b.firstName),e.info(c)})})["catch"](function(b){switch(b.status){case 401:a(["LOGIN.NOTIFICATION.ERROR"]).then(function(a){c=a["LOGIN.NOTIFICATION.ERROR"],e.error(c)})}})}function i(a){c.changeLocale(a),j.loginLocale=g(a)}var j=this;j.changeLoginLanguage=i,j.email="",j.lsAppConfig=d,j.password="",j.submitForm=h,f()}angular.module("linshareUiUserApp").controller("loginController",a),a.$inject=["$translate","authenticationRestService","languageService","lsAppConfig","toastService"]}(),function(){function a(a,b,c,d,e,f,g,h,i){function j(){b.cards={myFilesSpace:!1,uploadShare:!1,uploadGroup:!1,uploadRequest:!1},b.cards.myFilesSpace=i.canUpload,b.cards.uploadGroup=f.WORK_GROUP.enable,b.cards.uploadShare=b.cards.myFilesSpace||b.cards.uploadGroup,b.fabButton={toolbar:{activate:!0,label:"BOUTON_ADD_FILE_TITLE"},actions:[{action:"documents.upload({from: lsAppConfig.mySpacePage})",label:"ADD_FILES_DROPDOWN.UPLOAD_AND_SHARE",icon:"ls-share-file",flowBtn:!0},{action:"documents.files",label:"ADD_FILES_DROPDOWN.UPLOAD_IN_MY_FILES",icon:"ls-upload-fill",flowBtn:!0},{action:null,label:"ADD_FILES_DROPDOWN.UPLOAD_IN_WORKGROUP",icon:"ls-shared-space disabled-work-in-progress",disabled:!0,hide:g.linshareModeProduction}]},e.addPart("home"),b.$on("flow::fileAdded",function(a,c,d){d._from=b.mySpacePage}),k()}function k(){h.getList().then(function(a){var c=_.find(l,{key:d.use()}),e=c?c.lang:"ENGLISH";b.welcomeMessage=a[0][e]})}const l={ENGLISH:{lang:"ENGLISH",key:g.lang.en},FRENCH:{lang:"FRENCH",key:g.lang.fr},VIETNAMESE:{lang:"VIETNAMESE",key:g.lang.vi}};b.lsAppConfig=g,j()}angular.module("linshareUiUserApp").controller("HomeController",a),a.$inject=["$q","$scope","$timeout","$translate","$translatePartialLoader","functionalities","lsAppConfig","welcomeMessageRestService","user"]}(),function(){function a(){return{restrict:"A",templateUrl:b}}function b(a,b){return"directives/sidebar-content/sidebar-content-"+b.sidebarContent+".html"}angular.module("linshareUiUserApp").directive("sidebarContent",a)}(),function(){function a(a,b,c,d){function e(){a.all([b.getCurrentUser(),c.getAll()]).then(function(a){var b=a[0],c=a[1];h.links.splice(0,0,{name:"MENU_TITLE.CONTACTS_LISTS",link:"administration.contactslists.list",disabled:!c.CONTACTS_LIST.enable},{name:"MENU_TITLE.GUESTS",link:"administration.guests",disabled:!!_.isNil(c.GUESTS)||!c.GUESTS.enable&&b.canCreateGuest}),j.links.splice(0,0,{name:"MENU_TITLE.MY_FILES",link:"documents.files",disabled:!b.canUpload}),m.disabled=!c.WORK_GROUP.enable,l.disabled=!(c.WORK_GROUP.enable||b.canUpload)}),h={name:"MENU_TITLE.ADMIN",icon:"ls-settings",color:"#E91E63",disabled:!1,links:[{name:"MENU_TITLE.USERS",link:"administration.users",disabled:d.production},{name:"MENU_TITLE.GROUP_MEMBERS",link:"administration.groups",disabled:d.production}]},i={name:"MENU_TITLE.AUDIT",link:"audit.global",icon:"zmdi zmdi-time-restore",color:"#FFC107",disabled:!1},j={name:"MENU_TITLE.FILES",icon:"ls-my-space",color:"#2196F3",disabled:!1,links:[{name:"MENU_TITLE.RECEIVED_SHARES",link:"documents.received",disabled:!1},{name:"MENU_TITLE.SHARES",link:"documents.shared",disabled:!0}]},k={name:"MENU_TITLE.HOME",link:"home",icon:"ls-homepage",color:"#05B1FF",disabled:!1},l={name:"MENU_TITLE.UPLOAD_AND_SHARE",link:"documents.upload",icon:"ls-uploads",color:"#05B1FF"},m={name:"MENU_TITLE.SHARED_SPACE",link:"sharedspace.all",icon:"ls-shared-space",color:"#05B1FF",disabled:!1},o={name:"MENU_TITLE.UPLOAD_MANAGMENT",icon:"ls-upload-request",color:"#8BC34A",disabled:d.production,links:[{name:"MENU_TITLE.UPLOAD_PROPOSITIONS",link:"upload_request.propositions",disabled:d.production},{name:"MENU_TITLE.UPLOAD_REQUESTS",link:"upload_request.requests",disabled:d.production}]},n=[k,l,j,m,h,o,i]}function f(){return n}function g(a,b){var c=null;return _.forEach(n,function(d){_.isUndefined(d.links)?d.link===a&&(c=d):_.forEach(d.links,function(e){e.link===a&&(c=b?e:d)})}),c}var h,i,j,k,l,m,n,o,p={build:e,getAvailableTabs:f,getProperties:g};return p}angular.module("linshareUiUserApp").factory("MenuService",a),a.$inject=["$q","authenticationRestService","functionalityRestService","lsAppConfig"]}(),function(){function a(a,b,c,d){function e(b){return a.debug("LinshareFunctionalityRestService : get",b),k(c.all(l).one(b).get())}function f(){return a.debug("LinshareFunctionalityRestService : getAll"),j.promise}function g(){return a.debug("LinshareFunctionalityRestService : getFunctionalities"),k(c.all(l).getList()).then(function(a){angular.forEach(a,function(a){var b={};b[a.identifier]=a,angular.extend(i,b)}),j.resolve(i)},function(b){a.error("error getting all functionalities",b)}),j.promise}function h(b){return a.debug("LinshareFunctionalityRestService : getFunctionalityParams",b),f().then(function(a){return a[b]})}var i={},j=b.defer(),k=d.responseHandler,l="functionalities",m={get:e,getAll:f,getFunctionalities:g,getFunctionalityParams:h};return m}angular.module("linshareUiUserApp").factory("functionalityRestService",a),a.$inject=["$log","$q","Restangular","ServerManagerService"]}(),function(){function a(a,b,c,d,e){function f(b,c){var d=_.isUndefined(c)||""===c?b:b+": "+c;e.isActive()||e.error(d),a.error(d)}function g(d,e,g){g=!!_.isUndefined(g)||g,e=_.isUndefined(e)?"DEFAULT":e;var h,i,j=b.defer(),k="SERVER_RESPONSE.HTTP_CODES.",l="SERVER_RESPONSE.DETAILS."+e+".";return d.then(function(a){j.resolve(a)})["catch"](function(b){switch(a.debug("ServerManagerService - responseHandler:"+b),h=b,i=h.data.errCode,j.reject(b),b.status){case 400:k+="ERROR_400";break;case 401:k+="ERROR_401";break;case 403:k+="ERROR_403";break;case 404:k+="ERROR_404",i=i||"SERVER";break;case 405:k+="ERROR_405";break;case 408:k+="ERROR_408";break;case 500:k+="ERROR_500";break;case 501:k+="ERROR_501";break;case 502:k+="ERROR_502";break;case 503:k+="ERROR_503",i=i||"SERVER";break;case 520:k+="ERROR_520";break;default:k+="ERROR_DEFAULT"}g&&(l+=_.isUndefined(i)?"NONE":i,c.refresh().then(function(){c([k,l]).then(function(a){a[k]!==k&&a[l]!==l?f(a[k],a[l]):_.isUndefined(i)?f(h.statusText):f(h.statusText,i+": "+h.data.message)})}))}),j.promise}d.addPart("serverResponse");var h={responseHandler:g};return h}angular.module("linshareUiUserApp").factory("ServerManagerService",a),a.$inject=["$log","$q","$translate","$translatePartialLoader","toastService"]}(),function(){function a(a,b,c,d){function e(e,f){b.error('The "'+d.localPath+"/"+f+"/"+e+'.json" part was not loaded.');var g="i18n/original/"+f+"/"+e+".json",h=c.when(a.get(g).then(function(a){return a.data}));return h}return e}angular.module("linshareUiUserApp").factory("translateLoadFailureHandlerService",a),a.$inject=["$http","$log","$q","lsAppConfig"]}(),function(){function a(a,b,c){function d(){return a.debug("LinshareWelcomeMessageRestService : getList"),e(b.all(f).getList())}var e=c.responseHandler,f="welcome_messages",g={getList:d};return g}angular.module("linshareUiUserApp").factory("welcomeMessageRestService",a),a.$inject=["$log","Restangular","ServerManagerService"]}(),function(){function a(a,b){function c(c,d,e,f){c.$on("$stateChangeSuccess",function(){c.mactrl.sidebarToggle.left=f.checkAndSetNewWidth(),f.checkAndSetNewWidthSidebarRight(),f.resizeTableBody()}),a.isMobile||angular.element(window).resize(function(){c.mactrl.sidebarToggle.left=f.checkAndSetNewWidth(),f.checkAndSetNewWidthSidebarRight(),f.resizeTableBody()}),c.$watch(function(a){return a.innerWidth},function(){a.isMobile||(c.mactrl.sidebarToggle.left=f.checkAndSetNewWidth(),b(function(){f.resizeTableBody()},450))}),c.$watch(function(a){return a.innerHeight},function(){a.isMobile||(f.resizeTableBody(),b(function(){f.resizeTableBody()},1e3))})}var d={restrict:"A",controller:"CheckTableHeightController",controllerAs:"checkTableHeightVm",link:c};return d}angular.module("linshareUiUserApp").directive("checkTableHeight",a),a.$inject=["$rootScope","$timeout"]}(),function(){function a(a){function b(){var a=angular.element(window).width();return a>1093}function c(){var b=angular.element(window).width();b<a.mobileWidthBreakpoint?(angular.element("aside#chat.sidebar-right").appendTo("body"),angular.element("aside#chat.sidebar-right").addClass("setSidebarRightMobileState")):angular.element("aside#chat.sidebar-right").removeClass("setSidebarRightMobileState")}var d={checkAndSetNewWidth:b,checkAndSetNewWidthSidebarRight:c};return d}angular.module("linshareUiUserApp").factory("checkTableHeightService",a),a.$inject=["$rootScope"]}(),function(){function a(a,b){function c(){var a=angular.element(window).outerHeight(),b=angular.element("#header").outerHeight(),c=angular.element("#breadcrumb-wrap").outerHeight(),d=angular.element(".table thead").outerHeight(),e=angular.element(".ng-table-pager").outerHeight(),f=angular.element("#copyright-footer").outerHeight(),g=b+c+d+e+f,h=a-g-2;angular.element("#file-list-table tbody").attr("style","max-height : "+h+"px"),angular.element(".fixed-activity-table-height tbody").attr("style","max-height : "+h+"px ; min-height :"+h+"px");var i=a-(b+c+f)-2;angular.element(".drag-n-drop-height").attr("style","height : "+i+"px")}var d=this;d.checkAndSetNewWidth=b.checkAndSetNewWidth,d.checkAndSetNewWidthSidebarRight=b.checkAndSetNewWidthSidebarRight,d.resizeTableBody=c}angular.module("linshareUiUserApp").controller("CheckTableHeightController",a),a.$inject=["$scope","checkTableHeightService"]}(),function(){function a(a,b){function c(){e.tabs=b.getAvailableTabs()}function d(a,b){a.disabled===!1&&(e.customColor={color:b})}var e=this;e.$timeout=a,e.changeColor=d,e.tabs={},c()}angular.module("linshareUiUserApp").controller("lsLeftSidebarController",a),a.$inject=["$timeout","MenuService"]}(),function(){function a(){return{restrict:"A",transclude:!0,scope:!1,controller:"lsLeftSidebarController",controllerAs:"lsLeftSidebarVm",templateUrl:"views/common/sidebar.html",replace:!1}}angular.module("linshareUiUserApp").directive("lsLeftSidebar",a)}(),function(){function a(a){function b(){c()}function c(){/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)&&angular.element("html").addClass("ismobile")}var d=this;d.$state=a,d.layoutType=localStorage.getItem("ma-layout-status"),d.listviewSearchStat=!1,d.lvMenuStat=!1,d.sidebarToggle={left:!0,right:!1},b()}angular.module("linshareUiUserApp").controller("materialAdminController",a),a.$inject=["$state"]}(),function(){function a(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r){function s(){function a(){c.all([i.getCurrentUser(),l.getAll()]).then(function(a){var b=a[0],c=a[1];A.showTransfert=b.canUpload||c.WORK_GROUP.enable,e.loggedUser.setUser(b),b.firstLetter=b.firstName.charAt(0),e.userLogged=b,u()})}o.build(),e.loggedUser=new m,A.sidebar=new z,k.initFlowUploadService(),e.mactrl.sidebarToggle.left&&j.checkAndSetNewWidth(e.mactrl.sidebarToggle.left),d.isMobile||angular.element(window).resize(function(){e.mactrl.sidebarToggle.left=j.checkAndSetNewWidth(),j.checkAndSetNewWidthSidebarRight()}),e.$watch(function(){return h.innerWidth},function(a){d.isMobile=a<=d.mobileWidthBreakpoint,e.mactrl.sidebarToggle.left=j.checkAndSetNewWidth(),g(function(){j.checkAndSetNewWidthSidebarRight()},450)}),e.$on("flow::fileSuccess",function(a,c,d,f){b.debug("UPLOAD SUCCESS",d.name),d.doingAsyncUpload=!0,A.flowUploadService.addUploadedFile(d,f).then(function(a){e.getUserQuotas(),a._from===n.mySpacePage&&p.sharableDocuments(a,e.share_array,e.refFlowShares),v(a)})["catch"](function(a){v(a)})}),e.$on("flow::fileAdded",function(a,b,c){A.flowUploadService.checkQuotas([c],!1,e.setUserQuotas)}),e.$on("flow::fileRemoved",function(a,b,c){A.removeShareDocument(c)}),e.$on("flow::fileError",function(a,b,c){A.removeShareDocument(c),A.flowUploadService.checkQuotas([c],!0,e.setUserQuotas)}),e.$on("flow::uploadStart",function(a,b){_.forEach(b.files,function(a){a.quotaChecked||A.flowUploadService.checkQuotas([a],!1,e.setUserQuotas)})}),d.$on("$stateChangeStart",function(a,b){A.sidebar.hide(),c.all([o.getProperties(b.name,!1),o.getProperties(b.name,!0)]).then(function(a){e.currentState=a[0],e.linkActive=a[1]})}),d.$on("$stateChangeError",function(a,c,d,e,g,h){b.debug("$stateChangeError - ",h),h.status<500&&401!==h.status?f.go(B):f.go(C)}),e.$on("event:auth-loginConfirmed",function(c,d){a(),i.version().then(function(a){e.coreVersion=a.version}),o.build(),b.debug("event:auth-loginConfirmed : toState",e.urlTogoAfterLogin),e.loggedUser.setUser(d),e.userLogged=d,t(),_.isUndefined(e.urlTogoAfterLogin)?f.go(B):f.go(e.urlTogoAfterLogin,e.urlTogoAfterLoginParams)}),e.$on("event:auth-loginRequired",function(){b.debug("event:auth-loginRequired : toState",d.toState),e.urlTogoAfterLogin=d.toState,e.urlTogoAfterLoginParams=d.toParams,e.loggedUser.getUser(),e.urlTogoAfterLogin===C?(e.urlTogoAfterLogin=B,f.go(C)):f.go(C,{next:e.urlTogoAfterLogin})}),e.$watch(function(){return h.innerHeight},function(){e.sizeHeight=h.innerHeight-50}),e.$watch("mainVm.sidebar.isVisible()",function(a){j.checkAndSetNewWidthSidebarRight(),D>d.mobileWidthBreakpoint?(e.isMobileMode=!1,a===!0?(angular.element(".collapsible-content").addClass("set-width"),D>=900&&angular.element(".collapsible-actions-toolbar").addClass("set-width")):(angular.element("#file-list-table td .ctn-name-actions").attr("style",""),angular.element(".collapsible-content").removeClass("set-width"),angular.element(".collapsible-content").css("width","100%"),D>=900&&(angular.element(".collapsible-actions-toolbar").removeClass("set-width"),angular.element(".collapsible-actions-toolbar").css("width","100%")))):(e.isMobileMode=!0,angular.element(".collapsible-content").removeClass("set-width"),angular.element(".collapsible-content").css("width","100%"),D>=900&&(angular.element(".collapsible-actions-toolbar").removeClass("set-width"),angular.element(".collapsible-actions-toolbar").css("width","100%")))}),e.$watch("mactrl.sidebarToggle.left",function(){h.localStorage.setItem("sidebarToggleLeft",e.mactrl.sidebarToggle.left)}),localStorage.setItem("ma-layout-status",0),a()}function t(){a.get("/about.json").success(function(a){e.productVersion=a.version})}function u(){r.getQuota(e.userLogged.quotaUuid).then(function(a){e.setUserQuotas(a.plain())})}function v(a){a._from===n.mySpacePage&&p.sharableDocuments(a,e.share_array,e.refFlowShares)}function w(a){j.checkAndSetNewWidth(a)}function x(a){var b=e.share_array,c=_.find(b,function(b){return _.remove(b.documents,_.isUndefined),_.find(b.documents,function(b){return b.uniqueIdentifier===a.uniqueIdentifier})});if(!_.isUndefined(c)){_.remove(c.documents,_.isUndefined);var d=_.find(c.documents,function(b){return b.uniqueIdentifier===a.uniqueIdentifier});if(_.remove(c.documents,d),_.remove(c.waitingUploadIdentifiers,function(b){return b===a.uniqueIdentifier}),0===c.documents.length||a.error)_.remove(b,c);else{var f=_.find(c.documents,function(a){return a.uniqueIdentifier});_.isUndefined(f)&&new q(c).share()}}}function y(a){e.userQuotas.used=a.usedSpace,e.userQuotas.total=a.quota,e.userQuotas.remaining=e.userQuotas.total-e.userQuotas.used,e.userQuotas.percent=Math.floor(e.userQuotas.used/e.userQuotas.total*100),e.userQuotas.maxFileSize=a.maxFileSize,e.userQuotas.percent>=85&&e.userQuotas.percent<95?e.userQuotas.progressBarColor="quotas-progress-bar-orange":e.userQuotas.percent>=95?e.userQuotas.progressBarColor="quotas-progress-bar-red":e.userQuotas.progressBarColor="quotas-progress-bar-green"}function z(){function a(a){k.content=a}function b(){return k.content}function c(a){k.data=a}function d(){return k.data}function e(a,b){k.data[a]=b}function f(a){delete k.data[a]}function g(){k.visible=!k.toggle}function h(){k.visible=!0}function i(a,b){k.visible=!1,k.setContent(null),b&&!_.isUndefined(b.reset)&&b.reset()}function j(){return k.visible}var k={visible:!1,content:"",data:{},setContent:a,getContent:b,setData:c,getData:d,addData:e,removeData:f,toggle:g,show:h,hide:i,isVisible:j};return k}var A=this;const B="home",C="login";var D=angular.element(window).width();d.isMobile=angular.element("html").hasClass("ismobile"),d.mobileWidthBreakpoint=768,d.sidebarLeftWidth=268,d.sidebarRightWidth=350,e.getUserQuotas=u,e.lsAppConfig=n,e.mySpacePage=n.mySpacePage,e.productVersion="dev",e.refFlowShares={},e.setUserQuotas=y,e.share_array=[],e.sizeHeight=h.innerHeight-50,e.userQuotas={},e.workgroupPage=n.workgroupPage,A.flowUploadService=k,A.removeShareDocument=x,A.resizeDragNDropCtn=w,s()}angular.module("linshareUiUserApp").controller("UiUserMainController",a),a.$inject=["$http","$log","$q","$rootScope","$scope","$state","$timeout","$window","authenticationRestService","checkTableHeightService","flowUploadService","functionalityRestService","LinshareUserService","lsAppConfig","MenuService","sharableDocumentService","ShareObjectService","uploadRestService"]}(),function(){function a(){return{restrict:"A",link:b}}function b(a,b){a.$on("flow::filesSubmitted",function(){b.show(0,function(){b.addClass("active-anim-transfert-icon")}).delay(3e3).hide(0,function(){b.removeClass("active-anim-transfert-icon")})})}angular.module("linshareUiUserApp").directive("newUploadBounce",a)}(),function(){function a(){return{restrict:"A",templateUrl:"directives/uploadPopupFiles/uploadPopupFiles.html",scope:!0,link:b}}function b(a,b,c){var d;a.fromWhere=c.uploadPopupFiles,b.hide(),a.$watch("filesFilterred",function(){a.filesFilterred.length>0?b.show():b.hide(),d=_.filter(a.$flow.files,{_from:a.fromWhere}),a.currentFilesLength=d?d.length:0})}angular.module("linshareUiUserApp").directive("uploadPopupFiles",a)}(),function(){function a(a){return{restrict:"E",templateUrl:"",scope:{toggle:"=",dataType:"="},controller:a,controllerAs:"linshareSidebarVm",bindToController:!0}}angular.module("linshareUiUserApp").directive("linshareSidebar",a),a.$inject=["LinshareSidebarController"]}(),function(){angular.module("linshareUiUserApp").constant("lsAppConfig",{baseRestUrl:"linshare/webservice/rest/user/v2",debug:!1,localPath:"i18n/original",postLogoutUrl:null,accountType:{internal:"INTERNAL",guest:"GUEST",superadmin:"SUPERADMIN",system:"SYSTEM"},asyncUploadDelay:2e3,date_en_format:"MM/dd/yyyy",date_fr_format:"dd/MM/yyyy",lang:{fr:"fr-FR",en:"en-US",vi:"vi-VN"},licence:!0,production:!0,rejectedChar:["<",">",":",'"',"/","\\","|","?","*",","],roles:{admin:"ADMIN",write:"WRITE",readonly:"READ"},simultaneous_upload:1,tableParams:{count:25,sorting:{modificationDate:"desc"}},mySpacePage:"myspace",workgroupPage:"workgroup",guestsList:"guests-list",workgroupList:"group_list",contactsListsMinePage:"contactslists-mine",contactsListsOthersPage:"contactslists-others",activeShareDetails:"active-share-details",addMember:"add-member",contactslists:"contactslists",contactslistsAddContacts:"contactslists-add-contacts",contactslistsContact:"contactslists-contact",details:"details",guestCreate:"guest-create",guestDetails:"guest-details",moreOptions:"more-options",share:"share",shareDetails:"share-details",workgroupNode:"workgroup-node"})}(),function(){angular.module("linshareUiUserApp").constant("lsErrorCode",{CANCELLED_BY_USER:100})}();